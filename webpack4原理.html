<!DOCTYPE html>
<!-- saved from url=(0134)http://interview.poetries.top/principle-docs/webpack/03-%E4%BB%8E%E6%BA%90%E7%A0%81%E7%AA%A5%E6%8E%A2Webpack4.x%E5%8E%9F%E7%90%86.html -->
<html lang="en-US" class=" "><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    
    <title>Webpackæœ¬è´¨ | é¢è¯•æŒ‡å—</title>
    
    <link rel="icon" href="./webpack4åŸç†_files/logo.png">
    <link rel="manifest" href="http://interview.poetries.top/manifest.json">
    <link rel="apple-touch-icon" href="http://interview.poetries.top/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="http://interview.poetries.top/icons/safari-pinned-tab.svg" color="#3eaf7c">
    
    
    
    
    
    
    
    <link rel="preload" href="./webpack4åŸç†_files/0.styles.a3a6df6c.css" as="style"><link rel="preload" href="./webpack4åŸç†_files/app.25cf4eee.js.ä¸‹è½½" as="script"><link rel="preload" href="./webpack4åŸç†_files/5.bc663a4c.js.ä¸‹è½½" as="script"><link rel="preload" href="./webpack4åŸç†_files/4.1aaf03c6.js.ä¸‹è½½" as="script"><link rel="preload" href="./webpack4åŸç†_files/12.ac0bc851.js.ä¸‹è½½" as="script"><link rel="preload" href="./webpack4åŸç†_files/11.3e5297f1.js.ä¸‹è½½" as="script"><link rel="prefetch" href="./webpack4åŸç†_files/1.d83c2af0.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/10.fdecf69b.js"><link rel="prefetch" href="./webpack4åŸç†_files/100.df83f687.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/101.3986f029.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/102.1468be32.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/103.bfef2896.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/104.1731bbb1.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/105.710b118c.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/106.b955d37d.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/107.6f79a916.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/108.34ee5a8e.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/109.f6c05e4d.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/110.a375ddec.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/111.bcc5c187.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/112.afcfef56.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/113.2e7c6e37.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/114.9cfdb334.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/115.063815ec.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/116.4e29ee01.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/117.b106fd0d.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/118.e4e784f7.js"><link rel="prefetch" href="./webpack4åŸç†_files/119.94fe014a.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/13.57028e74.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/14.043c3e8a.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/15.a6d0032e.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/16.6094fda8.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/17.f17aa05b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/18.9732bfb3.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/19.2c38a6bb.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/20.92742304.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/21.28c8a661.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/22.3222a772.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/23.8192ecea.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/24.b5156b88.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/25.034d5e81.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/26.c78d8f63.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/27.cd94c89c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/28.b2c8e24c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/29.e9a30c2c.js"><link rel="prefetch" href="./webpack4åŸç†_files/3.f5ea6e07.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/30.2bd67425.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/31.6333035e.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/32.1a34dfa0.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/33.b5863ac0.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/34.cababd6c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/35.0b09d4a2.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/36.8f89ed73.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/37.38d590c3.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/38.4799c402.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/39.c9d13f25.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/40.21e1dcb8.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/41.16e0641a.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/42.9ce6fd83.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/43.8936e729.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/44.5ebdd233.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/45.ce59a54c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/46.b6f1380b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/47.5fe8aac4.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/48.a31741eb.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/49.16132e72.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/50.ca74d5c9.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/51.f21f79ee.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/52.6ff2b7c5.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/53.003482ca.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/54.136b1210.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/55.5d00c7ca.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/56.e5b5668d.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/57.9275f210.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/58.dcf3e81b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/59.5cbf4407.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/6.f2ac32df.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/60.ecfb5f55.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/61.8356d65b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/62.8ca03065.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/63.a0c06a04.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/64.406f4c0f.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/65.9d0c9d57.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/66.ca2ccee4.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/67.b01df864.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/68.e99acf6a.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/69.f7dbb3b1.js"><link rel="prefetch" href="./webpack4åŸç†_files/7.26b183c1.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/70.b3199540.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/71.d7c346c6.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/72.6afb9cd3.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/73.80370c6b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/74.eec2a38b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/75.fdbda41f.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/76.c8a9acd3.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/77.02560728.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/78.f3bcf134.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/79.01333f71.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/8.b6777e86.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/80.a7dfb481.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/81.29a3aa15.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/82.9039f284.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/83.e29f794c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/84.9aea4d6e.js"><link rel="prefetch" href="./webpack4åŸç†_files/85.6fa07b30.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/86.b0a530f1.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/87.a2c892ff.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/88.2c0ab353.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/89.0a6986cd.js"><link rel="prefetch" href="./webpack4åŸç†_files/9.7231fa75.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/90.80c04201.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/91.19846beb.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/92.09ef3493.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/93.8bad40d8.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/94.f0810e7b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/95.3a648c4f.js"><link rel="prefetch" href="./webpack4åŸç†_files/96.827e7cb2.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/97.cc180b8f.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/98.d2138442.js.ä¸‹è½½"><link rel="prefetch" href="./webpack4åŸç†_files/99.7e99e846.js.ä¸‹è½½">
    <link rel="stylesheet" href="./webpack4åŸç†_files/0.styles.a3a6df6c.css">
  <style type="text/css">.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}</style>
  <meta name="description" content="å‰ç«¯é¢è¯•æŒ‡å—ï¼Œå‰ç«¯é¢è¯•é¢˜æ•´ç†ï¼ŒæŒ‰æ¨¡å—åˆ†ç±»æ•´ç†æ€»ç»“ï¼Œæ‰“é€ æœ€å…¨é¢çš„å‰ç«¯é¢è¯•é¢˜"><meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png"><meta name="msapplication-TileColor" content="#000000"></head>
  <body class="">
    <div id="app"><div class="theme-container"><header class="navbar" style="background: rgb(255, 255, 255);"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="http://interview.poetries.top/" class="home-link router-link-active"><img src="./åŸç†_files/logo.png" alt="é¢è¯•æŒ‡å—" class="logo"> <span class="site-name can-hide">é¢è¯•æŒ‡å—</span></a> <div class="links" style="background: rgb(255, 255, 255); max-width: 1771px;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="" class="" placeholder=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div><a href="./index.html" class="nav-link">åŸºç¡€
    </a></div></div><div class="nav-item"><div><a href="./è¿›é˜¶.html" class="nav-link">âœ¨è¿›é˜¶
    </a></div></div><div class="nav-item"><div><a href="./ç²¾é€‰.html" class="nav-link">ğŸ‘ç²¾é€‰
    </a></div></div><div class="nav-item"><div><a href="./é«˜é¢‘.html" class="nav-link">ğŸ”¥é«˜é¢‘
    </a></div></div><div class="nav-item"><div><a href="./æŒ‡å—.html" class="nav-link">æŒ‡å—
    </a></div></div><div class="nav-item"><div><a href="./æ€§èƒ½.html" class="nav-link">æ€§èƒ½
    </a></div></div><div class="nav-item"><div><a href="./ç»¼åˆ.html" class="nav-link">ç»¼åˆ
    </a></div></div><div class="nav-item"><div><a href="./vue.html" class="nav-link">åŸç†
    </a></div></div><div class="nav-item"><div><a href="./æ‰‹å†™.html" class="nav-link">æ‰‹å†™
    </a></div></div><div class="nav-item"><div><a href="./è‡ªæ£€.html" class="nav-link">è‡ªæ£€
    </a></div></div><div class="nav-item"><div><a href="./é¢ç».html" class="nav-link">â­é¢ç»
    </a></div></div><div class="nav-item"><div><a href="./æ¯æ—¥ä¸€é¢˜.html" class="nav-link">ğŸ’¥æ¯æ—¥ä¸€é¢˜
    </a></div></div><div class="nav-item"><div><a href="./è®¾è®¡æ¨¡å¼.html" class="nav-link">è®¾è®¡æ¨¡å¼
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/algorithm-interview/note/01-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E2%80%94%E2%80%94%E4%BB%8E0%E5%88%B01%E6%8E%8C%E6%8F%A1%E7%AE%97%E6%B3%95%E9%9D%A2%E8%AF%95%E9%9C%80%E8%A6%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%80%EF%BC%89.html" class="nav-link">
  </a></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ‹“å±•é˜…è¯»" class="dropdown-title"><span class="title">æ‹“å±•é˜…è¯»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display: none;"><li class="dropdown-item"><h4>ä¸“é¢˜</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-base-docs/compute-docs/Linux.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-mobile-docs/h5-docs/1-%E5%A4%A7%E5%8E%82%20H5%20%E5%BC%80%E5%8F%91%E6%A6%82%E8%BF%B0.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-css-inspiration-docs/css-docs/note/01-%E6%B5%8F%E8%A7%88%E5%99%A8.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/learn-vue-base/base/1-Vue%20CLI%203%20%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%9F%BA%E7%A1%80.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-react-docs/react-web-action/01-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%9A%84%E5%9B%9B%E4%B8%AA%E6%97%B6%E4%BB%A3.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-micro-docs/docs/01-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E8%AF%9E%E7%94%9F.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-engineering-docs/docs/npm-script.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-ts-axios-docs/ts-axios/chapter1/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-algorithm-docs/algorithm/prepare/01-%E5%A6%82%E4%BD%95%E7%B3%BB%E7%BB%9F%E9%AB%98%E6%95%88%E5%9C%B0%E5%AD%A6%E4%B9%A0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/browser-working-principle/guide/part1/lesson01.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      æµè§ˆå™¨åŸç†
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/http-protocol/notes/base/01-HTTP%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      HTTPåŸºç¡€
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/webpack.html" class="nav-link">webpack
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/npm-script.html" class="nav-link">npmå·¥ä½œæµ
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/canvas.html" class="nav-link">Canvas
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/Taro.html" class="nav-link">TaroåŸç†
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      Nodeå­¦ä¹ æŒ‡å—
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/vue-analysis/prepare/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      Vueæºç åˆ†æ
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li><li class="dropdown-item"><h4>å…¶ä»–</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-blog-docs/blog-docs/javascript/-Ajax%E6%80%BB%E7%BB%93%E7%AF%87.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      æ—¥å¸¸ç§¯ç´¯
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://blog.poetries.top/archives/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      åšæ–‡
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="background: rgb(255, 255, 255);"><nav class="nav-links"><div class="nav-item"><div><a href="http://interview.poetries.top/docs/base.html" class="nav-link">åŸºç¡€
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/simply.html" class="nav-link">âœ¨è¿›é˜¶
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/excellent-docs/1-HTML%E6%A8%A1%E5%9D%97.html" class="nav-link">ğŸ‘ç²¾é€‰
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/excellent.html" class="nav-link">ğŸ”¥é«˜é¢‘
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/guide.html" class="nav-link">æŒ‡å—
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/performance.html" class="nav-link">æ€§èƒ½
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/detail-expain.html" class="nav-link">ç»¼åˆ
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/principle-docs/comprehensive/01-%E8%99%9A%E6%8B%9FDOM%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.html" class="nav-link">åŸç†
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/handwritten.html" class="nav-link">æ‰‹å†™
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/qa/1-%E5%89%8D%E7%AB%AF100%E9%A2%98%E8%87%AA%E6%A3%80.html" class="nav-link">è‡ªæ£€
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/interview-exp/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F%E6%B1%87%E6%80%BB.html" class="nav-link">â­é¢ç»
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html" class="nav-link">ğŸ’¥æ¯æ—¥ä¸€é¢˜
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/design-pattern.html" class="nav-link">è®¾è®¡æ¨¡å¼
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/algorithm-interview/note/01-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E2%80%94%E2%80%94%E4%BB%8E0%E5%88%B01%E6%8E%8C%E6%8F%A1%E7%AE%97%E6%B3%95%E9%9D%A2%E8%AF%95%E9%9C%80%E8%A6%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%80%EF%BC%89.html" class="nav-link">
  </a></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ‹“å±•é˜…è¯»" class="dropdown-title"><span class="title">æ‹“å±•é˜…è¯»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display: none;"><li class="dropdown-item"><h4>ä¸“é¢˜</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-base-docs/compute-docs/Linux.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-mobile-docs/h5-docs/1-%E5%A4%A7%E5%8E%82%20H5%20%E5%BC%80%E5%8F%91%E6%A6%82%E8%BF%B0.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-css-inspiration-docs/css-docs/note/01-%E6%B5%8F%E8%A7%88%E5%99%A8.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/learn-vue-base/base/1-Vue%20CLI%203%20%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%9F%BA%E7%A1%80.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-react-docs/react-web-action/01-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%9A%84%E5%9B%9B%E4%B8%AA%E6%97%B6%E4%BB%A3.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-micro-docs/docs/01-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E8%AF%9E%E7%94%9F.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-engineering-docs/docs/npm-script.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-ts-axios-docs/ts-axios/chapter1/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-algorithm-docs/algorithm/prepare/01-%E5%A6%82%E4%BD%95%E7%B3%BB%E7%BB%9F%E9%AB%98%E6%95%88%E5%9C%B0%E5%AD%A6%E4%B9%A0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/browser-working-principle/guide/part1/lesson01.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      æµè§ˆå™¨åŸç†
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/http-protocol/notes/base/01-HTTP%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      HTTPåŸºç¡€
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/webpack.html" class="nav-link">webpack
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/npm-script.html" class="nav-link">npmå·¥ä½œæµ
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/canvas.html" class="nav-link">Canvas
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/Taro.html" class="nav-link">TaroåŸç†
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      Nodeå­¦ä¹ æŒ‡å—
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/vue-analysis/prepare/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      Vueæºç åˆ†æ
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li><li class="dropdown-item"><h4>å…¶ä»–</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-blog-docs/blog-docs/javascript/-Ajax%E6%80%BB%E7%BB%93%E7%AF%87.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      æ—¥å¸¸ç§¯ç´¯
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://blog.poetries.top/archives/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      åšæ–‡
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li></ul></div></div> <!----></nav> <div style="padding-left:1.5rem;"><div class="qr"><img src="./webpack4åŸç†_files/qr.ee193d28.jpg" alt="poetries" width="120" height="120" loading="lazy"> <p class="we-intro">
    å…³æ³¨å…¬ä¼—å·ï¼Œè·å–æ›´å¤šèµ„è®¯
  </p></div></div>
  <ul class="sidebar-links"><li><section class="sidebar-group depth-0">
    <p class="sidebar-heading"><span>Vue</span> <!----></p> 
    <ul class="sidebar-links sidebar-group-items"><li>
      <a href="./vue.html" class="sidebar-link">ä»æºç è§£è¯»Vueç”Ÿå‘½å‘¨æœŸ</a></li>
      <li><a href="./ç»„ä»¶çš„æœ¬è´¨.html" class="sidebar-link">ç»„ä»¶çš„æœ¬è´¨</a></li>
      <li><a href="./ç»„ä»¶è®¾è®¡.html" class="sidebar-link">æœ‰çŠ¶æ€ç»„ä»¶çš„è®¾è®¡</a></li>
      <li><a href="./è®¾è®¡vnode.html" class="sidebar-link">è®¾è®¡ VNode</a></li>
      <li><a href="./vnodeçš„hå‡½æ•°.html" class="sidebar-link">è¾…åŠ©åˆ›å»º VNode çš„ h å‡½æ•°</a></li>
      <li><a href="./è‡ªå®šä¹‰æ¸²æŸ“.html" class="sidebar-link">è‡ªå®šä¹‰æ¸²æŸ“å™¨å’Œå¼‚æ­¥æ¸²æŸ“</a></li>
      <li><a href="./æ¸²æŸ“å™¨çš„æŒ‚è½½.html" class="sidebar-link">æ¸²æŸ“å™¨ä¹‹æŒ‚è½½</a></li>
      <li><a href="./æ¸²æŸ“diff.html" class="sidebar-link">æ¸²æŸ“å™¨çš„æ ¸å¿ƒ Diff ç®—æ³•</a></li>
      <li><a href="./æ¸²æŸ“å™¨patch.html" class="sidebar-link">æ¸²æŸ“å™¨ä¹‹patch</a></li>
      <li><a href="./vueå“åº”å¼.html" class="sidebar-link">å›¾è§£ Vue å“åº”å¼åŸç†</a></li>
      <li><a href="./vueå¼‚æ­¥æ›´æ–°.html" class="sidebar-link">å›¾è§£ Vue å¼‚æ­¥æ›´æ–°</a></li>
      <li><a href="./vueè¿è¡Œæœºåˆ¶.html" class="sidebar-link">å‰–æ Vue å†…éƒ¨è¿è¡Œæœºåˆ¶</a></li>
      <li><a href="./æ¨¡æ‹Ÿå“åº”å¼.html" class="sidebar-link">vueå“åº”å¼åŸç†æ¨¡æ‹Ÿ</a></li>
      <li><a href="./vuex.html" class="sidebar-link">vueçŠ¶æ€ç®¡ç†ä¹‹vuex</a></li>
    </ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> 
      <ul class="sidebar-links sidebar-group-items">
        <li><a href="./react.html" class="sidebar-link">React</a></li>
        <li><a href="./dva.html" class="sidebar-link">Dvaæ€»ç»“</a></li>
        <li><a href="./MobX.html" class="sidebar-link">MobXæ€»ç»“</a></li>
        <li><a href="./redux.html" class="sidebar-link">æµ…æredux</a></li>
        <li><a href="./reduxä¸­é—´ä»¶.html" class="sidebar-link">Reduxä¹‹æµ…æä¸­é—´ä»¶</a></li>
        <li><a href="./reduxæºç .html" class="sidebar-link">Reduxä¹‹æºç åˆ†æ</a></li>
        <li><a href="./reduxå¼‚æ­¥action.html" class="sidebar-link">Reduxä¹‹å¼‚æ­¥ActionåŠæ“ä½œ</a></li>
      </ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Webpack</span> <!----></p> 
        <ul class="sidebar-links sidebar-group-items">
          <li><a href="./webpackæ‰“åŒ…åŸç†.html" class="sidebar-link">Webpack4æ‰“åŒ…æœºåˆ¶åŸç†è§£æ</a></li>
          <li><a href="./çƒ­æ›´æ–°.html" class="sidebar-link">webpackä¸­çš„HMRçƒ­æ›´æ–°åŸç†å‰–æ</a></li>
          <li><a href="./webpack4åŸç†.html" class="sidebar-link">ä»æºç çª¥æ¢Webpack4.xåŸç†</a></li>
          <li><a href="./å®ç°webpackæ‰“åŒ….html" class="sidebar-link">å®ç°webpackå°å‹æ‰“åŒ…å·¥å…·</a></li>
          <li><a href="./babelåŸç†.html" class="sidebar-link">BabelåŸç†åŠå…¶ä½¿ç”¨</a></li>
        </ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ç»¼åˆ</span> <!----></p>
           <ul class="sidebar-links sidebar-group-items">
             <li><a href="./è™šæ‹ŸdomåŸç†.html" class="active sidebar-link">è™šæ‹ŸDOMåŸç†åˆ†æ</a></li>
             <li><a href="./settimeoutæŒ‡å—.html" class="active sidebar-link">setTimeout</a></li>
             <li class="sidebar-sub-header"><a href="./promise.html" class="sidebar-link">æµ…æPromiseåŸç†</a></li>
        <a href="./æµè§ˆå™¨å¦‚ä½•æ¸²æŸ“.html" class="sidebar-link">æµè§ˆå™¨æ¸²æŸ“åŸç†</a></li>
        <li><a href="./mvvm.html" class="sidebar-link">å‰ç«¯é¢è¯•ä¹‹MVVMæµ…æ</a></li>
        <li><a href="./ç»„ä»¶åŒ–.html" class="sidebar-link">å‰ç«¯é¢è¯•ä¹‹ç»„ä»¶åŒ–</a></li>
        <li><a href="./è™šæ‹Ÿdom1.html" class="sidebar-link">è™šæ‹ŸDOMï¼ˆä¸€ï¼‰</a></li>
        <li><a href="./è™šæ‹Ÿdom2.html" class="sidebar-link">è™šæ‹ŸDOMï¼ˆäºŒï¼‰</a></li>
        <li><a href="./performance.html" class="sidebar-link">å‰ç«¯æ€§èƒ½ä¹‹Performance</a></li>
      </ul></section></li></ul> 
 </aside> <main class="page"> <div id="container" class="theme-default-content pay-content"><div class="content__default"><h3 id="webpackæœ¬è´¨"><a href="http://interview.poetries.top/principle-docs/webpack/03-%E4%BB%8E%E6%BA%90%E7%A0%81%E7%AA%A5%E6%8E%A2Webpack4.x%E5%8E%9F%E7%90%86.html#webpack%E6%9C%AC%E8%B4%A8" class="header-anchor">#</a> Webpackæœ¬è´¨</h3> <blockquote><p>Webpackæœ¬è´¨ä¸Šä¸€ç§åŸºäºäº‹ä»¶æµçš„ç¼–ç¨‹èŒƒä¾‹ï¼Œå…¶å®å°±æ˜¯ä¸€ç³»åˆ—çš„æ’ä»¶è¿è¡Œ</p></blockquote> <p><code>Webpack</code>ä¸»è¦ä½¿ç”¨<code>Compiler</code>å’Œ<code>Compilation</code>ä¸¤ä¸ªç±»æ¥æ§åˆ¶<code>Webpack</code>çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚ä»–ä»¬éƒ½ç»§æ‰¿äº†<code>Tapabel</code>å¹¶ä¸”é€šè¿‡Tapabelæ¥æ³¨å†Œäº†ç”Ÿå‘½å‘¨æœŸä¸­çš„æ¯ä¸€ä¸ªæµç¨‹éœ€è¦è§¦å‘çš„äº‹ä»¶</p> <h3 id="tapabel"><a href="http://interview.poetries.top/principle-docs/webpack/03-%E4%BB%8E%E6%BA%90%E7%A0%81%E7%AA%A5%E6%8E%A2Webpack4.x%E5%8E%9F%E7%90%86.html#tapabel" class="header-anchor">#</a> Tapabel</h3> <blockquote><p><code>Tapabel</code>æ˜¯ä¸€ä¸ªç±»ä¼¼äº <code>Node.js</code> çš„ <code>EventEmitter</code>çš„åº“ï¼Œä¸»è¦æ˜¯æ§åˆ¶é’©å­å‡½æ•°çš„å‘å¸ƒä¸è®¢é˜…ï¼Œæ˜¯<code>Webpack</code>æ’ä»¶ç³»ç»Ÿçš„å¤§ç®¡å®¶</p></blockquote> <p><strong>Tapabelæä¾›çš„é’©å­åŠç¤ºä¾‹</strong></p> <blockquote><p><code>Tapable</code>åº“ä¸ºæ’ä»¶æä¾›äº†å¾ˆå¤š Hookä»¥ä¾¿æŒ‚è½½ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>
    SyncHook<span class="token punctuation">,</span>                   <span class="token comment">// åŒæ­¥é’©å­</span>
    SyncBailHook<span class="token punctuation">,</span>               <span class="token comment">// åŒæ­¥ç†”æ–­é’©å­</span>
    SyncWaterfallHook<span class="token punctuation">,</span>          <span class="token comment">// åŒæ­¥æµæ°´é’©å­</span>
    SyncLoopHook<span class="token punctuation">,</span>               <span class="token comment">// åŒæ­¥å¾ªç¯é’©å­</span>
    AsyncParalleHook<span class="token punctuation">,</span>           <span class="token comment">// å¼‚æ­¥å¹¶å‘é’©å­</span>
    AsyncParallelBailHook<span class="token punctuation">,</span>      <span class="token comment">// å¼‚æ­¥å¹¶å‘ç†”æ–­é’©å­</span>
    AsyncSeriesHook<span class="token punctuation">,</span>            <span class="token comment">// å¼‚æ­¥ä¸²è¡Œé’©å­</span>
    AsyncSeriesBailHook<span class="token punctuation">,</span>        <span class="token comment">// å¼‚æ­¥ä¸²è¡Œç†”æ–­é’©å­</span>
    AsyncSeriesWaterfallHook     <span class="token comment">// å¼‚æ­¥ä¸²è¡Œæµæ°´é’©å­</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"tapable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>Tabpack</code> æä¾›äº†åŒæ­¥&amp;å¼‚æ­¥ç»‘å®šé’©å­çš„æ–¹æ³•ï¼Œæ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote> <table><thead><tr><th>Async</th> <th>Sync</th></tr></thead> <tbody><tr><td>ç»‘å®šï¼š<code>tapAsync/tapPromise/tap</code></td> <td>ç»‘å®šï¼š<code>tap</code></td></tr> <tr><td>æ‰§è¡Œï¼š<code>callAsync/promise</code></td> <td>æ‰§è¡Œï¼š<code>call|</code></td></tr></tbody></table> <p><strong>Tabpackç®€å•ç¤ºä¾‹</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> demohook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SyncHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"arg1"</span><span class="token punctuation">,</span> <span class="token string">"arg2"</span><span class="token punctuation">,</span> <span class="token string">"arg3"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç»‘å®šäº‹ä»¶åˆ°webpackäº‹ä»¶æµ</span>
demohook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">"hook1"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> arg3</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> arg3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1 2 3</span>
<span class="token comment">// æ‰§è¡Œç»‘å®šçš„äº‹ä»¶</span>
<span class="token function">demohook</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="æºç è§£è¯»"><a href="http://interview.poetries.top/principle-docs/webpack/03-%E4%BB%8E%E6%BA%90%E7%A0%81%E7%AA%A5%E6%8E%A2Webpack4.x%E5%8E%9F%E7%90%86.html#%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB" class="header-anchor">#</a> æºç è§£è¯»</h3> <p><strong>1. åˆå§‹åŒ–å¯åŠ¨ä¹‹Webpackçš„å…¥å£æ–‡ä»¶</strong></p> <ul><li>è¿½æœ¬æº¯æºï¼Œç¬¬ä¸€æ­¥æˆ‘ä»¬è¦æ‰¾åˆ°<code>Webpack</code>çš„å…¥å£æ–‡ä»¶ã€‚</li> <li>å½“é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨Webpackåï¼Œ<code>npm</code>ä¼šè®©å‘½ä»¤è¡Œå·¥å…·è¿›å…¥<code>node_modules.bin</code> ç›®å½•ã€‚</li> <li>ç„¶åæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ <code>webpack.sh</code> æˆ–è€… webpack.cmd æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±æ‰§è¡Œå®ƒä»¬ï¼Œä¸å­˜åœ¨å°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚</li> <li>å®é™…çš„å…¥å£æ–‡ä»¶æ˜¯ï¼š<code>node_modules/webpack/bin/webpack.js</code>ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é‡Œé¢çš„æ ¸å¿ƒå‡½æ•°ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/bin/webpack.js</span>
<span class="token comment">// æ­£å¸¸æ‰§è¡Œè¿”å›</span>
process<span class="token punctuation">.</span>exitCode <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    
<span class="token comment">// è¿è¡ŒæŸä¸ªå‘½ä»¤                               </span>
<span class="token keyword">const</span> <span class="token function-variable function">runCommand</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">command<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token comment">// åˆ¤æ–­æŸä¸ªåŒ…æ˜¯å¦å®‰è£…</span>
<span class="token keyword">const</span> <span class="token function-variable function">isInstalled</span> <span class="token operator">=</span> <span class="token parameter">packageName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token comment">// webpackå¯ç”¨çš„CLIï¼šwebpacl-cliå’Œwebpack-command</span>
<span class="token keyword">const</span> CLIs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token comment">// åˆ¤æ–­æ˜¯å¦ä¸¤ä¸ªCLIæ˜¯å¦å®‰è£…äº†</span>
<span class="token keyword">const</span> installedClis <span class="token operator">=</span> CLIs<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">cli</span><span class="token operator">=&gt;</span>cli<span class="token punctuation">.</span>installed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ ¹æ®å®‰è£…æ•°é‡è¿›è¡Œå¤„ç†</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>installedClis<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> 
 <span class="token punctuation">(</span>installedClis<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><blockquote><p>å¯åŠ¨åï¼Œ<code>Webpack</code>æœ€ç»ˆä¼šæ‰¾åˆ° <code>webpack-cli /webpack-command</code>çš„ <code>npm</code> åŒ…ï¼Œå¹¶ä¸” æ‰§è¡Œ <code>CLI</code>ã€‚</p></blockquote> <p><strong>2. webpack-cli</strong></p> <blockquote><p>ææ¸…æ¥šäº†<code>Webpack</code>å¯åŠ¨çš„å…¥å£æ–‡ä»¶åï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬æŠŠç›®å…‰è½¬ç§»åˆ°<code>webpack-cli</code>ï¼Œçœ‹çœ‹å®ƒåšäº†å“ªäº›äº‹å„¿ã€‚</p></blockquote> <ul><li>å¼•å…¥ <code>yargs</code>ï¼Œå¯¹å‘½ä»¤è¡Œè¿›è¡Œå®šåˆ¶åˆ†æå‘½ä»¤è¡Œå‚æ•°ï¼Œå¯¹å„ä¸ªå‚æ•°è¿›è¡Œè½¬æ¢ï¼Œç»„æˆç¼–è¯‘é…ç½®é¡¹å¼•ç”¨<code>webpack</code>ï¼Œæ ¹æ®é…ç½®é¡¹è¿›è¡Œç¼–è¯‘å’Œæ„å»º</li> <li><code>webpack-cli</code> ä¼šå¤„ç†ä¸éœ€è¦ç»è¿‡ç¼–è¯‘çš„å‘½ä»¤ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack-cli/bin/cli.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token constant">NON_COMPILATION_ARGS</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./utils/constants"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">NON_COMPILATION_CMD</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">arg</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arg <span class="token operator">===</span> <span class="token string">"serve"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        global<span class="token punctuation">.</span>process<span class="token punctuation">.</span>argv <span class="token operator">=</span> global<span class="token punctuation">.</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> a <span class="token operator">!==</span> <span class="token string">"serve"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        process<span class="token punctuation">.</span>argv <span class="token operator">=</span> global<span class="token punctuation">.</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token constant">NON_COMPILATION_ARGS</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> a <span class="token operator">===</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">NON_COMPILATION_CMD</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./utils/prompt-command"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token constant">NON_COMPILATION_CMD</span><span class="token punctuation">,</span><span class="token operator">...</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>webpack-cli</code>æä¾›çš„ä¸éœ€è¦ç¼–è¯‘çš„å‘½ä»¤å¦‚ä¸‹</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack-cli/bin/untils/constants.js</span>
<span class="token keyword">const</span> <span class="token constant">NON_COMPILATION_ARGS</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">"init"</span><span class="token punctuation">,</span>                 <span class="token comment">// åˆ›å»ºä¸€ä»½webpacké…ç½®æ–‡ä»¶</span>
    <span class="token string">"migrate"</span><span class="token punctuation">,</span>              <span class="token comment">// è¿›è¡Œwebpackç‰ˆæœ¬è¿ç§»</span>
    <span class="token string">"add"</span><span class="token punctuation">,</span>                  <span class="token comment">// å¾€webpacké…ç½®æ–‡ä»¶ä¸­å¢åŠ å±æ€§</span>
    <span class="token string">"remove"</span><span class="token punctuation">,</span>               <span class="token comment">// å¾€webpacké…ç½®æ–‡ä»¶ä¸­åˆ é™¤å±æ€§</span>
    <span class="token string">"serve"</span><span class="token punctuation">,</span>                <span class="token comment">// è¿è¡Œwebpack-serve</span>
    <span class="token string">"generate-loader"</span><span class="token punctuation">,</span>      <span class="token comment">// ç”Ÿæˆwebpack loaderä»£ç </span>
    <span class="token string">"generate-plugin"</span><span class="token punctuation">,</span>      <span class="token comment">// ç”Ÿæˆwebpack pluginä»£ç </span>
    <span class="token string">"info"</span>                  <span class="token comment">// è¿”å›ä¸æœ¬åœ°ç¯å¢ƒç›¸å…³çš„ä¸€äº›ä¿¡æ¯</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>webpack-cli</code> ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·åŒ…<code>yargs</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack-cli/bin/config/config-yargs.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token constant">CONFIG_GROUP</span><span class="token punctuation">,</span>
    <span class="token constant">BASIC_GROUP</span><span class="token punctuation">,</span>
    <span class="token constant">MODULE_GROUP</span><span class="token punctuation">,</span>
    <span class="token constant">OUTPUT_GROUP</span><span class="token punctuation">,</span>
    <span class="token constant">ADVANCED_GROUP</span><span class="token punctuation">,</span>
    <span class="token constant">RESOLVE_GROUP</span><span class="token punctuation">,</span>
    <span class="token constant">OPTIMIZE_GROUP</span><span class="token punctuation">,</span>
    <span class="token constant">DISPLAY_GROUP</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">GROUPS</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>webpack-cli</code>å¯¹é…ç½®æ–‡ä»¶å’Œå‘½ä»¤è¡Œå‚æ•°è¿›è¡Œè½¬æ¢æœ€ç»ˆç”Ÿæˆé…ç½®é€‰é¡¹å‚æ•° <code>options</code>ï¼Œæœ€ç»ˆä¼šæ ¹æ®é…ç½®å‚æ•°å®ä¾‹åŒ–webpackå¯¹è±¡ï¼Œç„¶åæ‰§è¡Œæ„å»ºæµç¨‹ã€‚</li> <li>é™¤æ­¤ä¹‹å¤–ï¼Œè®©æˆ‘ä»¬å›åˆ°<code>node_modules/webpack/lib/webpack.js</code>é‡Œæ¥çœ‹ä¸€ä¸‹<code>Webpack</code>è¿˜åšäº†å“ªäº›å‡†å¤‡å·¥ä½œã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/webpack.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">webpack</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebpackOptionsDefaulter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    compiler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Compiler</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">NodeEnvironmentPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">...</span>
    compiler<span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebpackOptionsApply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">...</span>
    webpack<span class="token punctuation">.</span>WebpackOptionsDefaulter <span class="token operator">=</span> WebpackOptionsDefaulter<span class="token punctuation">;</span>
    webpack<span class="token punctuation">.</span>WebpackOptionsApply <span class="token operator">=</span> WebpackOptionsApply<span class="token punctuation">;</span>
    <span class="token operator">...</span>
    webpack<span class="token punctuation">.</span>NodeEnvironmentPlugin <span class="token operator">=</span> NodeEnvironmentPlugin<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>WebpackOptionsDefaulter</code>çš„åŠŸèƒ½æ˜¯è®¾ç½®ä¸€äº›é»˜è®¤çš„<code>Options</code>(ä»£ç æ¯”è¾ƒå¤šä¸è´´äº†ï¼Œå¤§å®¶è‡ªè¡ŒæŸ¥çœ‹<code>node_modules/webpack/lib/WebpackOptionsDefaulter.js</code>)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/node/NodeEnvironmentPlugin.js</span>
<span class="token keyword">class</span> <span class="token class-name">NodeEnvironmentPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>		
      compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>beforeRun<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">"NodeEnvironmentPlugin"</span><span class="token punctuation">,</span> <span class="token parameter">compiler</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	  <span class="token keyword">if</span> <span class="token punctuation">(</span>compiler<span class="token punctuation">.</span>inputFileSystem <span class="token operator">===</span> inputFileSystem<span class="token punctuation">)</span> inputFileSystem<span class="token punctuation">.</span><span class="token function">purge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>ä»ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ<code>NodeEnvironmentPlugin</code>æ’ä»¶ç›‘å¬äº†<code>beforeRun</code>é’©å­ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ¸…é™¤ç¼“å­˜</p></blockquote> <p><strong>3. WebpackOptionsApply</strong></p> <blockquote><p><code>WebpackOptionsApply</code>ä¼šå°†æ‰€æœ‰çš„é…ç½®<code>options</code>å‚æ•°è½¬æ¢æˆ<code>webpack</code>å†…éƒ¨æ’ä»¶ã€‚</p></blockquote> <p><strong>ä½¿ç”¨é»˜è®¤æ’ä»¶åˆ—è¡¨</strong></p> <ul><li><code>output.library</code> -&gt; <code>LibraryTemplatePlugin</code></li> <li><code>externals</code> -&gt; <code>ExternalsPlugin</code></li> <li><code>devtool</code> -&gt; <code>EvalDevtoolModulePlugin, SourceMapDevToolPlugin</code></li> <li><code>AMDPlugin</code>, <code>CommonJsPlugin</code></li> <li><code>RemoveEmptyChunksPlugin</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/WebpackOptionsApply.js</span>
<span class="token keyword">new</span> <span class="token class-name">EntryOptionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">entryOption</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>context<span class="token punctuation">,</span> options<span class="token punctuation">.</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>å®é™…ä¸Šï¼Œæ’ä»¶æœ€åéƒ½ä¼šå˜æˆ<code>compiler</code>å¯¹è±¡ä¸Šçš„å®ä¾‹ã€‚</p></blockquote> <p><strong>4. EntryOptionPlugin</strong></p> <blockquote><p>ä¸‹æ¥è®©æˆ‘ä»¬è¿›å…¥<code>EntryOptionPlugin</code>æ’ä»¶ï¼Œçœ‹çœ‹å®ƒåšäº†å“ªäº›äº‹å„¿ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/EntryOptionPlugin.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">EntryOptionPlugin</span> <span class="token punctuation">{</span>
    <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>entryOption<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">"EntryOptionPlugin"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> entry</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> entry <span class="token operator">===</span> <span class="token string">"string"</span> <span class="token operator">||</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	        <span class="token function">itemToPlugin</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> entry<span class="token punctuation">,</span> <span class="token string">"main"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> entry <span class="token operator">===</span> <span class="token string">"object"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> name <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		    <span class="token function">itemToPlugin</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> entry<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
	        <span class="token punctuation">}</span>
	    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> entry <span class="token operator">===</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	        <span class="token keyword">new</span> <span class="token class-name">DynamicEntryPlugin</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> entry<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>å¦‚æœæ˜¯æ•°ç»„ï¼Œåˆ™è½¬æ¢æˆå¤šä¸ª<code>entry</code>æ¥å¤„ç†ï¼Œå¦‚æœæ˜¯å¯¹è±¡åˆ™è½¬æ¢æˆä¸€ä¸ªä¸ª<code>entry</code>æ¥å¤„ç†ã€‚</li> <li><code>compiler</code>å®ä¾‹åŒ–æ˜¯åœ¨<code>node_modules/webpack/lib/webpack.js</code>é‡Œå®Œæˆçš„ã€‚é€šè¿‡<code>EntryOptionPlugin</code>æ’ä»¶è¿›è¡Œå‚æ•°æ ¡éªŒã€‚é€šè¿‡<code>WebpackOptionsDefaulter</code>å°†ä¼ å…¥çš„å‚æ•°å’Œé»˜è®¤å‚æ•°è¿›è¡Œåˆå¹¶æˆä¸ºæ–°çš„<code>options</code>ï¼Œåˆ›å»ºcompilerï¼Œä»¥åŠç›¸å…³pluginï¼Œæœ€åé€šè¿‡</li> <li><code>WebpackOptionsApply</code>å°†æ‰€æœ‰çš„é…ç½®<code>options</code>å‚æ•°è½¬æ¢æˆ<code>Webpack</code>å†…éƒ¨æ’ä»¶ã€‚</li> <li>å†æ¬¡æ¥åˆ°æˆ‘ä»¬çš„<code>node_modules/webpack/lib/webpack.js</code>ä¸­</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>watch <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">||</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>watch<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> watchOptions <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
	<span class="token operator">?</span> options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">o</span> <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>watchOptions <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token operator">:</span> options<span class="token punctuation">.</span>watchOptions <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> compiler<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>watchOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>å®ä¾‹<code>compiler</code>åä¼šæ ¹æ®<code>options</code>çš„watchåˆ¤æ–­æ˜¯å¦å¯åŠ¨äº†<code>watch</code>ï¼Œå¦‚æœå¯åŠ¨<code>watch</code>äº†å°±è°ƒç”¨<code>compiler.watch</code>æ¥ç›‘æ§æ„å»ºæ–‡ä»¶ï¼Œå¦åˆ™å¯åŠ¨<code>compiler.run</code>æ¥æ„å»ºæ–‡ä»¶ã€‚</p></blockquote> <h3 id="ç¼–è¯‘æ„å»º"><a href="http://interview.poetries.top/principle-docs/webpack/03-%E4%BB%8E%E6%BA%90%E7%A0%81%E7%AA%A5%E6%8E%A2Webpack4.x%E5%8E%9F%E7%90%86.html#%E7%BC%96%E8%AF%91%E6%9E%84%E5%BB%BA" class="header-anchor">#</a> ç¼–è¯‘æ„å»º</h3> <p><strong>compile</strong></p> <blockquote><p>é¦–å…ˆä¼šå®ä¾‹åŒ–<code>NormalModuleFactory</code>å’Œ<code>ContextModuleFactory</code>ã€‚ç„¶åè¿›å…¥åˆ°<code>run</code>æ–¹æ³•ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/Compiler.js</span>
<span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token operator">...</span>
    <span class="token comment">// beforeRun å¦‚ä¸Šæ–‡NodeEnvironmentPluginæ’ä»¶æ¸…é™¤ç¼“å­˜</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>beforeRun<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">finalCallback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‰§è¡Œrun Hookå¼€å§‹ç¼–è¯‘</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">finalCallback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">readRecords</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">finalCallback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// æ‰§è¡Œcompile</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>onCompiled<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>åœ¨æ‰§è¡Œ<code>this.hooks.compile</code>ä¹‹å‰ä¼šæ‰§è¡Œ<code>this.hooks.beforeCompile</code>ï¼Œæ¥å¯¹ç¼–è¯‘ä¹‹å‰éœ€è¦å¤„ç†çš„æ’ä»¶è¿›è¡Œæ‰§è¡Œã€‚ç´§æ¥ç€<code>this.hooks.compile</code>æ‰§è¡Œåä¼šå®ä¾‹åŒ–<code>Compilation</code>å¯¹è±¡</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/compiler.js</span>
<span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">newCompilationParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>beforeCompile<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// è¿›å…¥compileé˜¶æ®µ</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> compilation <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">newCompilation</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// è¿›å…¥makeé˜¶æ®µ</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>make<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    compilation<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// è¿›å…¥sealé˜¶æ®µ</span>
		compilation<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
		    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>afterCompile<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> compilation<span class="token punctuation">)</span><span class="token punctuation">;</span>
		    <span class="token punctuation">}</span><span class="token punctuation">)</span>
 		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="make"><a href="http://interview.poetries.top/principle-docs/webpack/03-%E4%BB%8E%E6%BA%90%E7%A0%81%E7%AA%A5%E6%8E%A2Webpack4.x%E5%8E%9F%E7%90%86.html#make" class="header-anchor">#</a> make</h3> <ul><li>ä¸€ä¸ªæ–°çš„<code>Compilation</code>åˆ›å»ºå®Œæ¯•ï¼Œå°†ä»<code>Entry</code>å¼€å§‹è¯»å–æ–‡ä»¶ï¼Œæ ¹æ®æ–‡ä»¶ç±»å‹å’Œé…ç½®çš„<code>Loader</code>å¯¹æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆåå†æ‰¾å‡ºè¯¥æ–‡ä»¶ä¾èµ–çš„æ–‡ä»¶ï¼Œé€’å½’çš„ç¼–è¯‘å’Œè§£æã€‚</li> <li>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<code>make</code>é’©å­è¢«ç›‘å¬çš„åœ°æ–¹ã€‚</li> <li>å¦‚ä»£ç ä¸­æ³¨é‡Šæ‰€ç¤ºï¼Œ<code>addEntry</code>æ˜¯<code>make</code>æ„å»ºé˜¶æ®µçœŸæ­£å¼€å§‹çš„æ ‡å¿—</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/SingleEntryPlugin.js</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>make<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span>
    <span class="token string">"SingleEntryPlugin"</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> entry<span class="token punctuation">,</span> name<span class="token punctuation">,</span> context <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	cosnt dep <span class="token operator">=</span> SingleEntryPlugin<span class="token punctuation">.</span><span class="token function">createDependency</span><span class="token punctuation">(</span>entry<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// makeæ„å»ºé˜¶æ®µå¼€å§‹æ ‡å¿— </span>
	compilation<span class="token punctuation">.</span><span class="token function">addEntry</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> dep<span class="token punctuation">,</span> name<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><blockquote><p><code>addEntry</code>å®é™…ä¸Šè°ƒç”¨äº†<code>_addModuleChain</code>æ–¹æ³•ï¼Œ<code>_addModuleChain</code>æ–¹æ³•å°†æ¨¡å—æ·»åŠ åˆ°ä¾èµ–åˆ—è¡¨ä¸­å»ï¼ŒåŒæ—¶è¿›è¡Œæ¨¡å—æ„å»ºã€‚æ„å»ºæ—¶ä¼šæ‰§è¡Œå¦‚ä¸‹å‡½æ•°</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/Compilation.js</span>
<span class="token comment">// addEntry -&gt; addModuleChain</span>
<span class="token function">_addModuleChain</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> dependency<span class="token punctuation">,</span> onModule<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buildModule</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>å¦‚æœæ¨¡å—æ„å»ºå®Œæˆï¼Œä¼šè§¦å‘<code>finishModules</code>ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/Compilation.js</span>
<span class="token function">finish</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>finishModules<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span>modules<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> modules<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    <span class="token keyword">const</span> module <span class="token operator">=</span> modules<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>			
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reportDependencyErrorsAndWarnings</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> <span class="token punctuation">[</span>module<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>1. Module</strong></p> <ul><li><code>Module</code>åŒ…æ‹¬<code>NormalModule</code>(æ™®é€šæ¨¡å—)ã€<code>ContextModule(./src/a ./src/b)</code>ã€<code>ExternalModule(module.exports=jQuery)</code>ã€<code>DelegatedModule(manifest)</code>ä»¥åŠ<code>MultiModule(entry:['a', 'b'])</code>ã€‚</li> <li>æœ¬æ–‡ä»¥<code>NormalModule(æ™®é€šæ¨¡å—)</code>ä¸ºä¾‹å­ï¼Œçœ‹ä¸€ä¸‹æ„å»º(<code>Compilation</code>)çš„è¿‡ç¨‹ã€‚</li></ul> <blockquote><p>ä½¿ç”¨ <code>loader-runner</code> è¿è¡Œ <code>loadersLoader</code>è½¬æ¢å®Œåï¼Œä½¿ç”¨ <code>acorn</code> è§£æç”Ÿæˆ<code>AST</code>ä½¿ç”¨ <code>ParserPlugins</code> æ·»åŠ ä¾èµ–</p></blockquote> <p><strong>2. loader-runner</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/NormalModule.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getContext<span class="token punctuation">,</span> runLoaders <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"loader-runner"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">doBuild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">runLoaders</span><span class="token punctuation">(</span>
        <span class="token operator">...</span>
    <span class="token punctuation">)</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>doBuild</code>ä¼šå»åŠ è½½èµ„æºï¼Œ<code>doBuild</code>ä¸­ä¼šä¼ å…¥èµ„æºè·¯å¾„å’Œæ’ä»¶èµ„æºå»è°ƒç”¨<code>loader-runner</code>æ’ä»¶çš„<code>runLoaders</code>æ–¹æ³•å»åŠ è½½å’Œæ‰§è¡Œ<code>loader</code></p></blockquote> <p><strong>3. acorn</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/Parser.jsconst acorn = require("acorn");</span>
</code></pre></div><blockquote><p>ä½¿ç”¨<code>acorn</code>è§£æè½¬æ¢åçš„å†…å®¹ï¼Œè¾“å‡ºå¯¹åº”çš„æŠ½è±¡è¯­æ³•æ ‘(<code>AST</code>)ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/Compilation.js</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">buildModule</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">failedModule</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">succeedModule</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>æˆåŠŸå°±è§¦å‘<code>succeedModule</code>ï¼Œå¤±è´¥å°±è§¦å‘<code>failedModule</code>ã€‚</li> <li>æœ€ç»ˆå°†ä¸Šè¿°é˜¶æ®µç”Ÿæˆçš„äº§ç‰©å­˜æ”¾åˆ°<code>Compilation.js</code>çš„<code>this.modules = []</code>;ä¸Šã€‚</li></ul> <blockquote><p>å®Œæˆåå°±åˆ°äº†<code>seal</code>é˜¶æ®µã€‚</p></blockquote> <p>è¿™é‡Œè¡¥å……ä»‹ç»ä¸€ä¸‹Chunkç”Ÿæˆçš„ç®—æ³•</p> <p><strong>4. Chunkç”Ÿæˆç®—æ³•</strong></p> <ul><li><code>webpack</code>é¦–å…ˆä¼šå°†<code>entry</code>ä¸­å¯¹åº”çš„<code>module</code>éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„<code>chunk</code>ã€‚</li> <li>éå†<code>module</code>çš„ä¾èµ–åˆ—è¡¨ï¼Œå°†ä¾èµ–çš„<code>module</code>ä¹ŸåŠ å…¥åˆ°<code>chunk</code>ä¸­ã€‚</li> <li>å¦‚æœä¸€ä¸ªä¾èµ–<code>module</code>æ˜¯åŠ¨æ€å¼•å…¥çš„æ¨¡å—ï¼Œä¼šæ ¹æ®è¿™ä¸ª<code>module</code>åˆ›å»ºä¸€ä¸ªæ–°çš„<code>chunk</code>ï¼Œç»§ç»­éå†ä¾èµ–ã€‚</li> <li>é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œç›´è‡³å¾—åˆ°æ‰€æœ‰çš„<code>chunk</code>ã€‚</li></ul> <h3 id="seal"><a href="http://interview.poetries.top/principle-docs/webpack/03-%E4%BB%8E%E6%BA%90%E7%A0%81%E7%AA%A5%E6%8E%A2Webpack4.x%E5%8E%9F%E7%90%86.html#seal" class="header-anchor">#</a> seal</h3> <ul><li>æ‰€æœ‰æ¨¡å—åŠå…¶ä¾èµ–çš„æ¨¡å—éƒ½é€šè¿‡<code>Loader</code>è½¬æ¢å®Œæˆï¼Œæ ¹æ®ä¾èµ–å…³ç³»å¼€å§‹ç”Ÿæˆ<code>Chunk</code>ã€‚</li> <li><code>seal</code>é˜¶æ®µä¹Ÿåšäº†å¤§é‡çš„çš„ä¼˜åŒ–å·¥ä½œï¼Œè¿›è¡Œäº†<code>hash</code>çš„åˆ›å»ºä»¥åŠå¯¹å†…å®¹è¿›è¡Œç”Ÿæˆ(<code>createModuleAssets</code>)ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/Compilation.jsthis.createHash();</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">modifyHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createModuleAssets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/Compilation.js</span>
<span class="token function">createModuleAssets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modules<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>buildInfo<span class="token punctuation">.</span>assets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> assetName <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>buildInfo<span class="token punctuation">.</span>assets<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> fileName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span>assetName<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>assets<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span> <span class="token operator">=</span> module<span class="token punctuation">.</span>buildInfo<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>assetName<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">moduleAsset</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>seal</code>é˜¶æ®µç»å†äº†å¾ˆå¤šçš„ä¼˜åŒ–ï¼Œæ¯”å¦‚<code>tree shaking</code>å°±æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œã€‚æœ€ç»ˆç”Ÿæˆçš„ä»£ç ä¼šå­˜æ”¾åœ¨<code>Compilation</code>çš„<code>assets</code>å±æ€§ä¸Š</p></blockquote> <h3 id="emit"><a href="http://interview.poetries.top/principle-docs/webpack/03-%E4%BB%8E%E6%BA%90%E7%A0%81%E7%AA%A5%E6%8E%A2Webpack4.x%E5%8E%9F%E7%90%86.html#emit" class="header-anchor">#</a> emit</h3> <blockquote><p>å°†è¾“å‡ºçš„å†…å®¹è¾“å‡ºåˆ°ç£ç›˜ï¼Œåˆ›å»ºç›®å½•ç”Ÿæˆæ–‡ä»¶ï¼Œæ–‡ä»¶ç”Ÿæˆé˜¶æ®µç»“æŸã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node_modules/webpack/lib/compiler.js</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">callAsync</span><span class="token punctuation">(</span>compilation<span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    outputPath <span class="token operator">=</span> compilation<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>outputPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>outputFileSystem<span class="token punctuation">.</span><span class="token function">mkdirp</span><span class="token punctuation">(</span>outputPath<span class="token punctuation">,</span> emitFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="æ€»ç»“"><a href="http://interview.poetries.top/principle-docs/webpack/03-%E4%BB%8E%E6%BA%90%E7%A0%81%E7%AA%A5%E6%8E%A2Webpack4.x%E5%8E%9F%E7%90%86.html#%E6%80%BB%E7%BB%93" class="header-anchor">#</a> æ€»ç»“</h3> <blockquote><p><code>Webpack</code>åœ¨å¯åŠ¨é˜¶æ®µå¯¹é…ç½®å‚æ•°å’Œå‘½ä»¤è¡Œå‚æ•°ä»¥åŠé»˜è®¤å‚æ•°è¿›è¡Œäº†åˆå¹¶ï¼Œå¹¶è¿›è¡Œäº†æ’ä»¶çš„åˆå§‹åŒ–å·¥ä½œã€‚å®Œæˆåˆå§‹åŒ–çš„å·¥ä½œåè°ƒç”¨<code>Compiler</code>çš„<code>run</code>å¼€å¯<code>Webpack</code>ç¼–è¯‘æ„å»ºè¿‡ç¨‹ï¼Œæ„å»ºä¸»è¦æµç¨‹åŒ…æ‹¬<code>compile</code>ã€<code>make</code>ã€<code>build</code>ã€<code>seal</code>ã€<code>emit</code>ç­‰é˜¶æ®µã€‚</p></blockquote></div> </body></html>