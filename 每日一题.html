<!DOCTYPE html>
<!-- saved from url=(0127)http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC47%E9%A2%98-js%E6%98%93%E9%94%99%E9%A2%98 -->
<html lang="en-US" class=" "><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    
    <title>ç¬¬47é¢˜ JSæ˜“é”™é¢˜ | é¢è¯•æŒ‡å—</title>
    
    <link rel="icon" href="./æ¯æ—¥ä¸€é¢˜_files/logo.png">
    <link rel="manifest" href="http://interview.poetries.top/manifest.json">
    <link rel="apple-touch-icon" href="http://interview.poetries.top/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="http://interview.poetries.top/icons/safari-pinned-tab.svg" color="#3eaf7c">
    
    
    
    
    
    
    
    <link rel="preload" href="./æ¯æ—¥ä¸€é¢˜_files/0.styles.a3a6df6c.css" as="style"><link rel="preload" href="./æ¯æ—¥ä¸€é¢˜_files/app.545cb75b.js.ä¸‹è½½" as="script"><link rel="preload" href="./æ¯æ—¥ä¸€é¢˜_files/5.bc663a4c.js.ä¸‹è½½" as="script"><link rel="preload" href="./æ¯æ—¥ä¸€é¢˜_files/4.1aaf03c6.js.ä¸‹è½½" as="script"><link rel="preload" href="./æ¯æ—¥ä¸€é¢˜_files/44.5ebdd233.js.ä¸‹è½½" as="script"><link rel="preload" href="./æ¯æ—¥ä¸€é¢˜_files/11.3e5297f1.js.ä¸‹è½½" as="script"><link rel="prefetch" href="./æ¯æ—¥ä¸€é¢˜_files/1.d83c2af0.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/10.fdecf69b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/100.df83f687.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/101.3986f029.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/102.1468be32.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/103.bfef2896.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/104.1731bbb1.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/105.710b118c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/106.b955d37d.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/107.6f79a916.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/108.34ee5a8e.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/109.f6c05e4d.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/110.a375ddec.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/111.bcc5c187.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/112.afcfef56.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/113.2e7c6e37.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/114.9cfdb334.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/115.063815ec.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/116.4e29ee01.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/117.b106fd0d.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/118.e4e784f7.js"><link rel="prefetch" href="./æ¯æ—¥ä¸€é¢˜_files/119.94fe014a.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/12.ac0bc851.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/13.57028e74.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/14.043c3e8a.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/15.a6d0032e.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/16.6094fda8.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/17.f17aa05b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/18.9732bfb3.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/19.2c38a6bb.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/20.92742304.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/21.28c8a661.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/22.3222a772.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/23.8192ecea.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/24.b5156b88.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/25.034d5e81.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/26.c78d8f63.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/27.cd94c89c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/28.b2c8e24c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/29.e9a30c2c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/3.f5ea6e07.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/30.2bd67425.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/31.6333035e.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/32.1a34dfa0.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/33.b5863ac0.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/34.cababd6c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/35.0b09d4a2.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/36.8f89ed73.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/37.38d590c3.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/38.4799c402.js"><link rel="prefetch" href="./æ¯æ—¥ä¸€é¢˜_files/39.f28d21e8.js.ä¸‹è½½"><link rel="prefetch" href="http://interview.poetries.top/assets/js/40.21e1dcb8.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/41.16e0641a.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/42.9ce6fd83.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/43.8936e729.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/45.ce59a54c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/46.b6f1380b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/47.5fe8aac4.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/48.a31741eb.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/49.16132e72.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/50.ca74d5c9.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/51.f21f79ee.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/52.6ff2b7c5.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/53.003482ca.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/54.136b1210.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/55.5d00c7ca.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/56.cfa533e2.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/57.9275f210.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/58.dcf3e81b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/59.5cbf4407.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/6.f2ac32df.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/60.ecfb5f55.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/61.8356d65b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/62.8ca03065.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/63.a0c06a04.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/64.406f4c0f.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/65.9d0c9d57.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/66.ca2ccee4.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/67.b01df864.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/68.e99acf6a.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/69.f7dbb3b1.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/7.26b183c1.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/70.b3199540.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/71.d7c346c6.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/72.6afb9cd3.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/73.80370c6b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/74.eec2a38b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/75.fdbda41f.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/76.c8a9acd3.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/77.02560728.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/78.7a518fe7.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/79.01333f71.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/8.b6777e86.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/80.a7dfb481.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/81.29a3aa15.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/82.9039f284.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/83.e29f794c.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/84.9aea4d6e.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/85.6fa07b30.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/86.b0a530f1.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/87.a2c892ff.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/88.2c0ab353.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/89.0a6986cd.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/9.7231fa75.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/90.80c04201.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/91.19846beb.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/92.09ef3493.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/93.8bad40d8.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/94.f0810e7b.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/95.3a648c4f.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/96.827e7cb2.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/97.cc180b8f.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/98.d2138442.js"><link rel="prefetch" href="http://interview.poetries.top/assets/js/99.7e99e846.js">
    <link rel="stylesheet" href="./æ¯æ—¥ä¸€é¢˜_files/0.styles.a3a6df6c.css">
  <style type="text/css">.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}</style><meta name="description" content="å‰ç«¯é¢è¯•æŒ‡å—ï¼Œå‰ç«¯é¢è¯•é¢˜æ•´ç†ï¼ŒæŒ‰æ¨¡å—åˆ†ç±»æ•´ç†æ€»ç»“ï¼Œæ‰“é€ æœ€å…¨é¢çš„å‰ç«¯é¢è¯•é¢˜"><meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png"><meta name="msapplication-TileColor" content="#000000"></head>
  <body class="">
    <div id="app"><div class="theme-container"><header class="navbar" style="background: rgb(255, 255, 255);"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="http://interview.poetries.top/" class="home-link router-link-active"><img src="./åŸç†_files/logo.png" alt="é¢è¯•æŒ‡å—" class="logo"> <span class="site-name can-hide">é¢è¯•æŒ‡å—</span></a> <div class="links" style="background: rgb(255, 255, 255); max-width: 1771px;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="" class="" placeholder=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div><a href="./index.html" class="nav-link">åŸºç¡€
    </a></div></div><div class="nav-item"><div><a href="./è¿›é˜¶.html" class="nav-link">âœ¨è¿›é˜¶
    </a></div></div><div class="nav-item"><div><a href="./ç²¾é€‰.html" class="nav-link">ğŸ‘ç²¾é€‰
    </a></div></div><div class="nav-item"><div><a href="./é«˜é¢‘.html" class="nav-link">ğŸ”¥é«˜é¢‘
    </a></div></div><div class="nav-item"><div><a href="./æŒ‡å—.html" class="nav-link">æŒ‡å—
    </a></div></div><div class="nav-item"><div><a href="./æ€§èƒ½.html" class="nav-link">æ€§èƒ½
    </a></div></div><div class="nav-item"><div><a href="./ç»¼åˆ.html" class="nav-link">ç»¼åˆ
    </a></div></div><div class="nav-item"><div><a href="./vue.html" class="nav-link">åŸç†
    </a></div></div><div class="nav-item"><div><a href="./æ‰‹å†™.html" class="nav-link">æ‰‹å†™
    </a></div></div><div class="nav-item"><div><a href="./è‡ªæ£€.html" class="nav-link">è‡ªæ£€
    </a></div></div><div class="nav-item"><div><a href="./é¢ç».html" class="nav-link">â­é¢ç»
    </a></div></div><div class="nav-item"><div><a href="./æ¯æ—¥ä¸€é¢˜.html" class="nav-link">ğŸ’¥æ¯æ—¥ä¸€é¢˜
    </a></div></div><div class="nav-item"><div><a href="./è®¾è®¡æ¨¡å¼.html" class="nav-link">è®¾è®¡æ¨¡å¼
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/algorithm-interview/note/01-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E2%80%94%E2%80%94%E4%BB%8E0%E5%88%B01%E6%8E%8C%E6%8F%A1%E7%AE%97%E6%B3%95%E9%9D%A2%E8%AF%95%E9%9C%80%E8%A6%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%80%EF%BC%89.html" class="nav-link">
  </a></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ‹“å±•é˜…è¯»" class="dropdown-title"><span class="title">æ‹“å±•é˜…è¯»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display: none;"><li class="dropdown-item"><h4>ä¸“é¢˜</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-base-docs/compute-docs/Linux.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-mobile-docs/h5-docs/1-%E5%A4%A7%E5%8E%82%20H5%20%E5%BC%80%E5%8F%91%E6%A6%82%E8%BF%B0.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-css-inspiration-docs/css-docs/note/01-%E6%B5%8F%E8%A7%88%E5%99%A8.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/learn-vue-base/base/1-Vue%20CLI%203%20%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%9F%BA%E7%A1%80.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-react-docs/react-web-action/01-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%9A%84%E5%9B%9B%E4%B8%AA%E6%97%B6%E4%BB%A3.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-micro-docs/docs/01-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E8%AF%9E%E7%94%9F.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-engineering-docs/docs/npm-script.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-ts-axios-docs/ts-axios/chapter1/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-algorithm-docs/algorithm/prepare/01-%E5%A6%82%E4%BD%95%E7%B3%BB%E7%BB%9F%E9%AB%98%E6%95%88%E5%9C%B0%E5%AD%A6%E4%B9%A0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/browser-working-principle/guide/part1/lesson01.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      æµè§ˆå™¨åŸç†
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/http-protocol/notes/base/01-HTTP%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      HTTPåŸºç¡€
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/webpack.html" class="nav-link">webpack
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/npm-script.html" class="nav-link">npmå·¥ä½œæµ
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/canvas.html" class="nav-link">Canvas
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/Taro.html" class="nav-link">TaroåŸç†
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      Nodeå­¦ä¹ æŒ‡å—
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/vue-analysis/prepare/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      Vueæºç åˆ†æ
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li><li class="dropdown-item"><h4>å…¶ä»–</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-blog-docs/blog-docs/javascript/-Ajax%E6%80%BB%E7%BB%93%E7%AF%87.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      æ—¥å¸¸ç§¯ç´¯
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://blog.poetries.top/archives/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      åšæ–‡
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="background: rgb(255, 255, 255);"><nav class="nav-links"><div class="nav-item"><div><a href="http://interview.poetries.top/docs/base.html" class="nav-link">åŸºç¡€
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/simply.html" class="nav-link">âœ¨è¿›é˜¶
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/excellent-docs/1-HTML%E6%A8%A1%E5%9D%97.html" class="nav-link">ğŸ‘ç²¾é€‰
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/excellent.html" class="nav-link">ğŸ”¥é«˜é¢‘
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/guide.html" class="nav-link">æŒ‡å—
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/performance.html" class="nav-link">æ€§èƒ½
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/detail-expain.html" class="nav-link">ç»¼åˆ
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/principle-docs/comprehensive/01-%E8%99%9A%E6%8B%9FDOM%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.html" class="nav-link">åŸç†
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/handwritten.html" class="nav-link">æ‰‹å†™
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/qa/1-%E5%89%8D%E7%AB%AF100%E9%A2%98%E8%87%AA%E6%A3%80.html" class="nav-link">è‡ªæ£€
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/interview-exp/%E5%89%8D%E7%AB%AF%E9%9D%A2%E7%BB%8F%E6%B1%87%E6%80%BB.html" class="nav-link">â­é¢ç»
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html" class="nav-link">ğŸ’¥æ¯æ—¥ä¸€é¢˜
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/docs/design-pattern.html" class="nav-link">è®¾è®¡æ¨¡å¼
  </a></div></div><div class="nav-item"><div><a href="http://interview.poetries.top/algorithm-interview/note/01-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E2%80%94%E2%80%94%E4%BB%8E0%E5%88%B01%E6%8E%8C%E6%8F%A1%E7%AE%97%E6%B3%95%E9%9D%A2%E8%AF%95%E9%9C%80%E8%A6%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E4%B8%80%EF%BC%89.html" class="nav-link">
  </a></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ‹“å±•é˜…è¯»" class="dropdown-title"><span class="title">æ‹“å±•é˜…è¯»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display: none;"><li class="dropdown-item"><h4>ä¸“é¢˜</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-base-docs/compute-docs/Linux.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-mobile-docs/h5-docs/1-%E5%A4%A7%E5%8E%82%20H5%20%E5%BC%80%E5%8F%91%E6%A6%82%E8%BF%B0.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-css-inspiration-docs/css-docs/note/01-%E6%B5%8F%E8%A7%88%E5%99%A8.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/learn-vue-base/base/1-Vue%20CLI%203%20%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%9F%BA%E7%A1%80.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-react-docs/react-web-action/01-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%9A%84%E5%9B%9B%E4%B8%AA%E6%97%B6%E4%BB%A3.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-micro-docs/docs/01-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E8%AF%9E%E7%94%9F.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-engineering-docs/docs/npm-script.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-ts-axios-docs/ts-axios/chapter1/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-algorithm-docs/algorithm/prepare/01-%E5%A6%82%E4%BD%95%E7%B3%BB%E7%BB%9F%E9%AB%98%E6%95%88%E5%9C%B0%E5%AD%A6%E4%B9%A0%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><!----></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/browser-working-principle/guide/part1/lesson01.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      æµè§ˆå™¨åŸç†
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="https://blog.poetries.top/http-protocol/notes/base/01-HTTP%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      HTTPåŸºç¡€
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/webpack.html" class="nav-link">webpack
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/npm-script.html" class="nav-link">npmå·¥ä½œæµ
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/canvas.html" class="nav-link">Canvas
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/docs/Taro.html" class="nav-link">TaroåŸç†
  </a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-nodejs-docs/nodejs-docs/base/01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      Nodeå­¦ä¹ æŒ‡å—
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-vue-docs/vue-analysis/prepare/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      Vueæºç åˆ†æ
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li><li class="dropdown-item"><h4>å…¶ä»–</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><div><a href="http://interview.poetries.top/fe-blog-docs/blog-docs/javascript/-Ajax%E6%80%BB%E7%BB%93%E7%AF%87.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      æ—¥å¸¸ç§¯ç´¯
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li><li class="dropdown-subitem"><div><a href="http://blog.poetries.top/archives/" target="_blank" rel="noopener noreferrer" class="nav-link external"><div>
      åšæ–‡
      <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div></a></div></li></ul></li></ul></div></div> <!----></nav> <div style="padding-left:1.5rem;"><div class="qr"><img src="./æ¯æ—¥ä¸€é¢˜_files/qr.ee193d28.jpg" alt="poetries" width="120" height="120" loading="lazy"> <p class="we-intro">
    å…³æ³¨å…¬ä¼—å·ï¼Œè·å–æ›´å¤šèµ„è®¯
  </p></div></div> <ul class="sidebar-links"><li><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html" class="active sidebar-link">æ¯æ—¥ä¸€é¢˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC47%E9%A2%98-js%E6%98%93%E9%94%99%E9%A2%98" class="active sidebar-link">ç¬¬47é¢˜ JSæ˜“é”™é¢˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#vs-%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7" class="sidebar-link">. VS =  æ“ä½œç¬¦ä¼˜å…ˆçº§</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E4%BD%9C%E7%94%A8%E5%9F%9F" class="sidebar-link">ä½œç”¨åŸŸ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%B1%BB%E6%95%B0%E7%BB%84%E7%9A%84length" class="sidebar-link">ç±»æ•°ç»„çš„length</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E9%9D%9E%E5%8C%BF%E5%90%8D%E8%87%AA%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0-%E5%87%BD%E6%95%B0%E5%90%8D%E5%8F%AA%E8%AF%BB" class="sidebar-link">éåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°ï¼Œå‡½æ•°ååªè¯»</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87" class="sidebar-link">å˜é‡æå‡</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%95%B0%E7%BB%84%E7%9A%84%E5%8E%9F%E5%9E%8B%E6%98%AF%E4%BB%80%E4%B9%88" class="sidebar-link">æ•°ç»„çš„åŸå‹æ˜¯ä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%95%B0%E7%BB%84%E6%AF%94%E8%BE%83%E5%A4%A7%E5%B0%8F" class="sidebar-link">æ•°ç»„æ¯”è¾ƒå¤§å°</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%8E%9F%E5%9E%8B" class="sidebar-link">åŸå‹</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%87%BD%E6%95%B0%E5%90%8D%E7%A7%B0" class="sidebar-link">å‡½æ•°åç§°</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#function-length" class="sidebar-link">Function.length</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#b-a-a-a" class="sidebar-link">"b" + "a" + +"a" + "a"</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E9%97%AD%E5%8C%85" class="sidebar-link">é—­åŒ…</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2" class="sidebar-link">éšå¼è½¬æ¢</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E4%B8%80%E9%81%93%E5%AE%B9%E6%98%93%E8%A2%AB%E4%BA%BA%E8%BD%BB%E8%A7%86%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98" class="sidebar-link">ä¸€é“å®¹æ˜“è¢«äººè½»è§†çš„é¢è¯•é¢˜</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#let-var" class="sidebar-link">let var</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%9C%BC%E5%8A%9B%E9%A2%98" class="sidebar-link">çœ¼åŠ›é¢˜</a></li></ul></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC46%E9%A2%98-%E5%85%B3%E4%BA%8E0-1-0-2-0-3%E6%B5%AE%E7%82%B9%E6%95%B0%E8%AE%A1%E7%AE%97%E5%88%86%E6%9E%90%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95" class="sidebar-link">ç¬¬46é¢˜ å…³äº0.1+0.2!=0.3æµ®ç‚¹æ•°è®¡ç®—åˆ†æä¸è§£å†³æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC45%E9%A2%98-%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Btree-shaking%E5%8F%8A%E5%85%B6%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" class="sidebar-link">ç¬¬45é¢˜ ä»‹ç»ä¸€ä¸‹Tree ShakingåŠå…¶å·¥ä½œåŸç†</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC44%E9%A2%98-%E6%89%A7%E8%A1%8Cnew-vue%E5%B9%B2%E4%BA%86%E4%BB%80%E4%B9%88" class="sidebar-link">ç¬¬44é¢˜ æ‰§è¡Œnew Vueå¹²äº†ä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC43%E9%A2%98-%E8%AF%B4%E4%B8%80%E4%B8%8Bvue2-x%E4%B8%AD%E5%A6%82%E4%BD%95%E7%9B%91%E6%B5%8B%E6%95%B0%E7%BB%84%E5%8F%98%E5%8C%96" class="sidebar-link">ç¬¬43é¢˜ è¯´ä¸€ä¸‹vue2.xä¸­å¦‚ä½•ç›‘æµ‹æ•°ç»„å˜åŒ–</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC42%E9%A2%98-%E4%BB%8B%E7%BB%8D-https-%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B" class="sidebar-link">ç¬¬42é¢˜ ä»‹ç» HTTPS æ¡æ‰‹è¿‡ç¨‹</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC41%E9%A2%98-%E8%A7%A3%E9%87%8A%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88" class="sidebar-link">ç¬¬41é¢˜ è§£é‡Šä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC40%E9%A2%98-%E5%AE%9E%E7%8E%B0-5-add-3-minus-2-%E5%8A%9F%E8%83%BD" class="sidebar-link">ç¬¬40é¢˜ å®ç° (5).add(3).minus(2) åŠŸèƒ½</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC39%E9%A2%98-react-setstate-%E7%AC%94%E8%AF%95%E9%A2%98-%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88" class="sidebar-link">ç¬¬39é¢˜ React setState ç¬”è¯•é¢˜ï¼Œä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC38%E9%A2%98-%E5%A4%B4%E6%9D%A1-%E5%BC%82%E6%AD%A5%E7%AC%94%E8%AF%95%E9%A2%98" class="sidebar-link">ç¬¬38é¢˜ ï¼ˆå¤´æ¡ï¼‰å¼‚æ­¥ç¬”è¯•é¢˜</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC37%E9%A2%98-%E5%AE%9E%E7%8E%B0es6%E7%9A%84class" class="sidebar-link">ç¬¬37é¢˜ å®ç°ES6çš„class</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC36%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%9F%AF%E9%87%8C%E5%8C%96%E5%87%BD%E6%95%B0" class="sidebar-link">ç¬¬36é¢˜ å®ç°ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC35%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84mvvm" class="sidebar-link">ç¬¬35é¢˜ å®ç°ä¸€ä¸ªç®€æ˜“çš„MVVM</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC34%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%8Bhash%E8%B7%AF%E7%94%B1" class="sidebar-link">ç¬¬34é¢˜ å®ç°ä¸€ä¸‹hashè·¯ç”±</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC33%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E8%80%85%E6%A8%A1%E5%BC%8F" class="sidebar-link">ç¬¬33é¢˜ å®ç°ä¸€ä¸ªå‘å¸ƒè®¢é˜…è€…æ¨¡å¼</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E8%80%85%E6%A8%A1%E5%BC%8F%E5%92%8C%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB" class="sidebar-link">å‘å¸ƒè®¢é˜…è€…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ</a></li></ul></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC32%E9%A2%98-%E5%85%B3%E4%BA%8Easync-await%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F" class="sidebar-link">ç¬¬32é¢˜ å…³äºasync/awaitä»£ç æ‰§è¡Œé¡ºåº</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC31%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AApadstart-%E6%88%96padend-%E7%9A%84polyfill" class="sidebar-link">ç¬¬31é¢˜ å®ç°ä¸€ä¸ªpadStart()æˆ–padEnd()çš„polyfill</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC30%E9%A2%98-%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E6%8F%90%E5%8F%96%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%89%80%E6%9C%89value%E5%A4%A7%E4%BA%8E2%E7%9A%84%E9%94%AE%E5%80%BC%E5%AF%B9%E5%B9%B6%E8%BF%94%E5%9B%9E%E6%9C%80%E6%96%B0%E7%9A%84%E5%AF%B9%E8%B1%A1" class="sidebar-link">ç¬¬30é¢˜ è®¾è®¡ä¸€ä¸ªæ–¹æ³•æå–å¯¹è±¡ä¸­æ‰€æœ‰valueå¤§äº2çš„é”®å€¼å¯¹å¹¶è¿”å›æœ€æ–°çš„å¯¹è±¡</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC29%E9%A2%98-%E7%94%A8%E4%B8%80%E4%B8%AA%E6%AD%A3%E5%88%99%E6%8F%90%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E6%89%80%E6%9C%89-%E9%87%8C%E5%86%85%E5%AE%B9" class="sidebar-link">ç¬¬29é¢˜ ç”¨ä¸€ä¸ªæ­£åˆ™æå–å­—ç¬¦ä¸²ä¸­æ‰€æœ‰""é‡Œå†…å®¹</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC28%E9%A2%98-%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%A6%96%E4%BD%8D%E7%A9%BA%E6%A0%BC" class="sidebar-link">ç¬¬28é¢˜ å»é™¤å­—ç¬¦ä¸²é¦–ä½ç©ºæ ¼</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC27%E9%A2%98-%E7%94%A8%E6%AD%A3%E5%88%99%E5%86%99%E4%B8%80%E4%B8%AA%E6%A0%B9%E6%8D%AEname%E8%8E%B7%E5%8F%96cookie%E4%B8%AD%E7%9A%84%E5%80%BC%E7%9A%84%E6%96%B9%E6%B3%95" class="sidebar-link">ç¬¬27é¢˜ ç”¨æ­£åˆ™å†™ä¸€ä¸ªæ ¹æ®nameè·å–cookieä¸­çš„å€¼çš„æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC26%E9%A2%98-%E5%AE%9E%E7%8E%B0-arr-1-arr-arr-length-1" class="sidebar-link">ç¬¬26é¢˜ å®ç° arr[-1] = arr[arr.length - 1]</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC25%E9%A2%98-jsonp%E7%9A%84%E5%8E%9F%E7%90%86%E5%B9%B6%E7%94%A8%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0" class="sidebar-link">ç¬¬25é¢˜ JSONPçš„åŸç†å¹¶ç”¨ä»£ç å®ç°</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC24%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%8B%96%E6%8B%BD" class="sidebar-link">ç¬¬24é¢˜ å®ç°ä¸€ä¸ªæ‹–æ‹½</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC23%E9%A2%98-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%A0%E5%81%9A%E8%BF%87%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96" class="sidebar-link">ç¬¬23é¢˜ é¡¹ç›®ä¸­ä½ åšè¿‡å“ªäº›ä¼˜åŒ–</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%8A%9F%E8%83%BD%E7%82%B9%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8A" class="sidebar-link">åŠŸèƒ½ç‚¹çš„å®ç°ä¸Š</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%84%E5%BB%BA%E4%B8%8A" class="sidebar-link">é¡¹ç›®çš„æ„å»ºä¸Š</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%BD%91%E7%BB%9C%E7%BC%93%E5%AD%98%E4%B8%8A" class="sidebar-link">ç½‘ç»œç¼“å­˜ä¸Š</a></li></ul></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC22%E9%A2%98-%E6%89%8B%E5%86%99promise%E6%9C%80%E7%AE%8020%E8%A1%8C%E7%89%88%E6%9C%AC-%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8" class="sidebar-link">ç¬¬22é¢˜ æ‰‹å†™Promiseæœ€ç®€20è¡Œç‰ˆæœ¬ï¼Œå®ç°å¼‚æ­¥é“¾å¼è°ƒç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81" class="sidebar-link">å®ç°ä»£ç </a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%A0%B8%E5%BF%83%E6%A1%88%E4%BE%8B" class="sidebar-link">æ ¸å¿ƒæ¡ˆä¾‹</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0" class="sidebar-link">æ„é€ å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#then" class="sidebar-link">then</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%85%B6%E4%BB%96%E7%89%88%E6%9C%AC%E5%AE%9E%E7%8E%B0" class="sidebar-link">å…¶ä»–ç‰ˆæœ¬å®ç°</a></li></ul></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC21%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%BF%B7%E4%BD%A0%E7%89%88%E7%9A%84vue" class="sidebar-link">ç¬¬21é¢˜ å®ç°ä¸€ä¸ªè¿·ä½ ç‰ˆçš„vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%85%A5%E5%8F%A3" class="sidebar-link">å…¥å£</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0dep" class="sidebar-link">å®ç°Dep</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0watcher" class="sidebar-link">å®ç°watcher</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0compiler" class="sidebar-link">å®ç°compiler</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0observer" class="sidebar-link">å®ç°Observer</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E4%BD%BF%E7%94%A8" class="sidebar-link">ä½¿ç”¨</a></li></ul></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC20%E9%A2%98-%E5%9F%BA%E4%BA%8Epromise-all%E5%AE%9E%E7%8E%B0ajax%E7%9A%84%E4%B8%B2%E8%A1%8C%E5%92%8C%E5%B9%B6%E8%A1%8C" class="sidebar-link">ç¬¬20é¢˜ åŸºäºPromise.allå®ç°Ajaxçš„ä¸²è¡Œå’Œå¹¶è¡Œ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC19%E9%A2%98-jq-ajax%E3%80%81axios%E3%80%81fetch%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%88%AB" class="sidebar-link">ç¬¬19é¢˜ JQ Ajaxã€Axiosã€Fetchçš„æ ¸å¿ƒåŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC18%E9%A2%98-%E5%9F%BA%E4%BA%8Ehttp%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" class="sidebar-link">ç¬¬18é¢˜ åŸºäºHTTPç½‘ç»œå±‚çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%B8%80%E6%AD%A5-url%E8%A7%A3%E6%9E%90" class="sidebar-link">ç¬¬ä¸€æ­¥ï¼šURLè§£æ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E7%BC%93%E5%AD%98%E6%A3%80%E6%9F%A5" class="sidebar-link">ç¬¬äºŒæ­¥ï¼šç¼“å­˜æ£€æŸ¥</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%B8%89%E6%AD%A5-dns%E8%A7%A3%E6%9E%90" class="sidebar-link">ç¬¬ä¸‰æ­¥ï¼šDNSè§£æ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E5%9B%9B%E6%AD%A5-tcp%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B" class="sidebar-link">ç¬¬å››æ­¥ï¼šTCPä¸‰æ¬¡æ¡æ‰‹</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%BA%94%E6%AD%A5-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93" class="sidebar-link">ç¬¬äº”æ­¥ï¼šæ•°æ®ä¼ è¾“</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E5%85%AD%E6%AD%A5-tcp%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B" class="sidebar-link">ç¬¬å…­æ­¥ï¼šTCPå››æ¬¡æŒ¥æ‰‹</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%B8%83%E6%AD%A5-%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93" class="sidebar-link">ç¬¬ä¸ƒæ­¥ï¼šé¡µé¢æ¸²æŸ“</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%B1%87%E6%80%BB" class="sidebar-link">æ€§èƒ½ä¼˜åŒ–æ±‡æ€»</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#http1-0-vs-http1-1-vs-http2-0" class="sidebar-link">HTTP1.0 VS HTTP1.1 VS HTTP2.0</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#http1-0%E5%92%8Chttp1-1%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8C%BA%E5%88%AB" class="sidebar-link">HTTP1.0å’ŒHTTP1.1çš„ä¸€äº›åŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#http2-0%E5%92%8Chttp1-x%E7%9B%B8%E6%AF%94%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7" class="sidebar-link">HTTP2.0å’ŒHTTP1.Xç›¸æ¯”çš„æ–°ç‰¹æ€§</a></li></ul></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC17%E9%A2%98-%E5%AE%9E%E7%8E%B0vue-reactive%E5%8E%9F%E7%90%86" class="sidebar-link">ç¬¬17é¢˜ å®ç°vue reactiveåŸç†</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC16%E9%A2%98-%E5%BC%82%E6%AD%A5%E4%B8%B2%E8%A1%8C-%E5%BC%82%E6%AD%A5%E5%B9%B6%E8%A1%8C" class="sidebar-link">ç¬¬16é¢˜ å¼‚æ­¥ä¸²è¡Œ | å¼‚æ­¥å¹¶è¡Œ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC15%E9%A2%98-%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88" class="sidebar-link">ç¬¬15é¢˜ ä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC14%E9%A2%98-%E5%A6%82%E4%BD%95%E8%AE%A9if-a-1-a-2-%E6%9D%A1%E4%BB%B6%E6%88%90%E7%AB%8B" class="sidebar-link">ç¬¬14é¢˜ å¦‚ä½•è®©if(a == 1 &amp;&amp; a == 2)æ¡ä»¶æˆç«‹</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC13%E9%A2%98-%E5%BC%82%E6%AD%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%E9%97%AE%E9%A2%98" class="sidebar-link">ç¬¬13é¢˜ å¼‚æ­¥æ‰§è¡Œé¡ºåºé—®é¢˜</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC12%E9%A2%98-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E9%97%AE%E9%A2%98-async-await" class="sidebar-link">ç¬¬12é¢˜ å¾®ä»»åŠ¡æ‰§è¡Œé—®é¢˜ async await</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC11%E9%A2%98-this%E6%8C%87%E5%90%91%E9%97%AE%E9%A2%98" class="sidebar-link">ç¬¬11é¢˜ thisæŒ‡å‘é—®é¢˜</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC10%E9%A2%98-promise%E6%89%A7%E8%A1%8C%E9%97%AE%E9%A2%98" class="sidebar-link">ç¬¬10é¢˜ promiseæ‰§è¡Œé—®é¢˜</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC9%E9%A2%98-promise%E8%A7%A3%E5%86%B3%E5%B9%B6%E5%8F%91%E8%AF%B7%E6%B1%82" class="sidebar-link">ç¬¬9é¢˜ promiseè§£å†³å¹¶å‘è¯·æ±‚</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC8%E9%A2%98-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98" class="sidebar-link">ç¬¬8é¢˜ è·¨åŸŸé—®é¢˜</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC7%E9%A2%98-%E4%B8%8B%E9%9D%A2%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88" class="sidebar-link">ç¬¬7é¢˜ ä¸‹é¢è¾“å‡ºä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC6%E9%A2%98-%E9%AA%8C%E8%AF%81%E5%9B%9E%E6%96%87%E4%B8%B2" class="sidebar-link">ç¬¬6é¢˜ éªŒè¯å›æ–‡ä¸²</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC5%E9%A2%98-%E5%86%99%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E6%9D%A5%E5%88%A4%E6%96%AD%E5%AE%83%E6%98%AF%E5%90%A6%E6%98%AF-3-%E7%9A%84%E5%B9%82%E6%AC%A1%E6%96%B9" class="sidebar-link">ç¬¬5é¢˜ å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ 3 çš„å¹‚æ¬¡æ–¹</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC4%E9%A2%98-%E6%97%8B%E8%BD%AC%E6%95%B0%E7%BB%84" class="sidebar-link">ç¬¬4é¢˜ æ—‹è½¬æ•°ç»„</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC3%E9%A2%98-%E4%BF%AE%E6%94%B9%E5%B5%8C%E5%A5%97%E5%B1%82%E7%BA%A7%E5%BE%88%E6%B7%B1%E5%AF%B9%E8%B1%A1%E7%9A%84-key" class="sidebar-link">ç¬¬3é¢˜ ä¿®æ”¹åµŒå¥—å±‚çº§å¾ˆæ·±å¯¹è±¡çš„ key</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC2%E9%A2%98-%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97" class="sidebar-link">ç¬¬2é¢˜ åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</a></li><li class="sidebar-sub-header"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC1%E9%A2%98-%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C" class="sidebar-link">ç¬¬1é¢˜ ä¸¤æ•°ä¹‹å’Œ</a></li></ul></li></ul> </aside> <main class="page"> <div id="container" class="theme-default-content pay-content"><div class="content__default"><h2 id="ç¬¬47é¢˜-jsæ˜“é”™é¢˜"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC47%E9%A2%98-js%E6%98%93%E9%94%99%E9%A2%98" class="header-anchor">#</a> ç¬¬47é¢˜ JSæ˜“é”™é¢˜</h2> <h3 id="vs-æ“ä½œç¬¦ä¼˜å…ˆçº§"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#vs-%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7" class="header-anchor">#</a> <code>.</code> VS <code>=</code> æ“ä½œç¬¦ä¼˜å…ˆçº§</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>n <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
a<span class="token punctuation">.</span>x <span class="token operator">=</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>n<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
</code></pre></div><p>è¾“å‡ºæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p> <details><summary><b>ç­”æ¡ˆ</b></summary> <p></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// undefined </span>
<span class="token comment">// { n : 2}</span>
</code></pre></div><p></p></details> <h3 id="ä½œç”¨åŸŸ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E4%BD%9C%E7%94%A8%E5%9F%9F" class="header-anchor">#</a> ä½œç”¨åŸŸ</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>  
b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token constant">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token constant">A</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><details><summary><b>ç­”æ¡ˆ</b></summary> <p></p><p><strong>ç­”æ¡ˆ 1 4</strong></p> <p></p></details> <h3 id="ç±»æ•°ç»„çš„length"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%B1%BB%E6%95%B0%E7%BB%84%E7%9A%84length" class="header-anchor">#</a> ç±»æ•°ç»„çš„length</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"2"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string">"3"</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token string">"length"</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">"splice"</span> <span class="token operator">:</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>splice<span class="token punctuation">,</span>
    <span class="token string">"push"</span> <span class="token operator">:</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre></div><p>è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</p> <details><summary><b>ç­”æ¡ˆ</b></summary> <p></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Object</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>empty Ã— <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> splice<span class="token operator">:</span> Æ’<span class="token punctuation">,</span> push<span class="token operator">:</span> Æ’<span class="token punctuation">]</span>
</code></pre></div><p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210409114359.png" alt="" class="medium-zoom-image"></p> <ul><li>è§£é‡Šå°±æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨<code>push</code>,<code>obj</code>å¯¹è±¡çš„pushæ–¹æ³•è®¾ç½®<code>obj[2] = 1,obj.length++</code></li> <li>è§£é‡Šå°±æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨<code>push</code>,<code>obj</code>å¯¹è±¡çš„pushæ–¹æ³•è®¾ç½®<code>obj[3] = 2,obj.length++</code></li> <li>ä½¿ç”¨<code>console.log()</code>æ–¹æ³•è¾“å‡ºçš„æ—¶å€™ï¼Œå› ä¸ºobjä¸Šæœ‰<code>length</code>å±æ€§å’Œ<code>splice</code>æ–¹æ³•ï¼Œæ•…å°†å…¶ä½œä¸ºæ•°ç»„è¾“å‡ºæ‰“å°</li> <li>æ‰“å°æ—¶å› ä¸ºæ•°ç»„æœªè®¾ç½®ä¸‹æ ‡ä¸º0å’Œ1çš„å€¼ï¼Œæ•…æ‰“å°çš„ç»“æœå°±æ˜¯<code>empty</code>ï¼Œä¸»åŠ¨è·å–<code>obj[0] = undefined</code></li></ul> <p></p></details> <h3 id="éåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°-å‡½æ•°ååªè¯»"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E9%9D%9E%E5%8C%BF%E5%90%8D%E8%87%AA%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0-%E5%87%BD%E6%95%B0%E5%90%8D%E5%8F%AA%E8%AF%BB" class="header-anchor">#</a> éåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°ï¼Œå‡½æ•°ååªè¯»</h3> <div class="language-js extra-class"><pre class="language-js"><code>		<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 'use strict'</span>
            b <span class="token operator">=</span> <span class="token number">20</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p> <details><summary><b>ç­”æ¡ˆ</b></summary> <p></p><div class="language- extra-class"><pre class="language-text"><code>Function b
</code></pre></div><ul><li>å¦‚æ ‡é¢˜ä¸€æ ·ï¼ŒéåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°ï¼Œå‡½æ•°åä¸å¯ä»¥ä¿®æ”¹ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¼š<code>TypeError</code>ï¼Œ</li> <li>éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸æŠ¥é”™ï¼Œä¿®æ”¹ä¹Ÿæ²¡æœ‰ç”¨ã€‚</li> <li>æŸ¥æ‰¾å˜é‡bæ—¶,ç«‹å³æ‰§è¡Œå‡½æ•°ä¼šæœ‰å†…éƒ¨ä½œç”¨åŸŸï¼Œä¼šå…ˆå»æŸ¥æ‰¾æ˜¯å¦æœ‰bå˜é‡çš„å£°æ˜ï¼Œæœ‰çš„è¯ï¼Œç›´æ¥å¤åˆ¶</li> <li>ç¡®å®å‘ç°å…·åå‡½æ•°<code>Function b(){}</code> æ‰€ä»¥å°±æ‹¿æ¥åšbçš„å€¼</li> <li>IIFEçš„å‡½æ•°å†…éƒ¨æ— æ³•è¿›è¡Œå¤åˆ¶(ç±»ä¼¼äºconst)</li></ul> <p></p></details> <p><strong>éåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°2</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 'use strict'</span>
      <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>b<span class="token punctuation">)</span> 
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>è¾“å‡ºæ˜¯å¤šå°‘å‘¢ï¼Ÿ</p> <details><summary><b>ç­”æ¡ˆ</b></summary> <p></p><div class="language- extra-class"><pre class="language-text"><code>10
20
// è®¿é—®bå˜é‡çš„æ—¶å€™,å‘ç°var b = 20;åœ¨å½“å‰ä½œç”¨åŸŸä¸­æ‰¾åˆ°äº†bå˜é‡ï¼Œäºæ˜¯æŠŠbçš„å€¼ä½œä¸º20
</code></pre></div><p></p></details> <p><strong>éåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°3</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
        b <span class="token operator">=</span> <span class="token number">5</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>b<span class="token punctuation">)</span>
        <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">20</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>è¾“å‡ºçš„ç»“æœæ˜¯å¤šå°‘å‘¢ï¼Ÿ</p> <h3 id="å˜é‡æå‡"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87" class="header-anchor">#</a> å˜é‡æå‡</h3> <div class="language- extra-class"><pre class="language-text"><code>var name = 'World!';
(function () {
    if (typeof name === 'undefined') {
        var name = 'Jack';
        console.log('Goodbye ' + name);
    } else {
        console.log('Hello ' + name);
    }
})();
</code></pre></div><p>åœ¨ JavaScriptä¸­ï¼Œ Fun å’Œ var ä¼šè¢«æå‡</p> <p>ç›¸å½“äº</p> <div class="language- extra-class"><pre class="language-text"><code>var name = 'World!';
(function () {
    var name;
    if (typeof name === 'undefined') {
        name = 'Jack';
        console.log('Goodbye ' + name);
    } else {
        console.log('Hello ' + name);
    }
})();
</code></pre></div><p>å·©å›ºä¸€ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'World!'</span><span class="token punctuation">;</span>   
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Jack'</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Goodbye '</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello '</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><details><summary><b>ç­”æ¡ˆ</b></summary> <p></p><blockquote><p>ç­”æ¡ˆï¼šHello World å› ä¸ºnameå·²ç»å˜æˆå‡½æ•°å†…å±€éƒ¨å˜é‡</p></blockquote> <p></p></details> <h3 id="æ•°ç»„çš„åŸå‹æ˜¯ä»€ä¹ˆ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%95%B0%E7%BB%84%E7%9A%84%E5%8E%9F%E5%9E%8B%E6%98%AF%E4%BB%80%E4%B9%88" class="header-anchor">#</a> æ•°ç»„çš„åŸå‹æ˜¯ä»€ä¹ˆ</h3> <div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype <span class="token punctuation">)</span>
</code></pre></div><p>è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</p> <details><summary><b>ç­”æ¡ˆ</b></summary> <p><ul><li>ç­”æ¡ˆï¼š<code>true</code></li> <li>è§£æï¼š<code>Array.prototype</code>æ˜¯ä¸€ä¸ªæ•°ç»„</li> <li>æ•°ç»„çš„åŸå‹æ˜¯æ•°ç»„ï¼Œå¯¹è±¡çš„åŸå‹æ˜¯å¯¹è±¡ï¼Œå‡½æ•°çš„åŸå‹æ˜¯å‡½æ•°</li></ul></p></details> <h3 id="æ•°ç»„æ¯”è¾ƒå¤§å°"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%95%B0%E7%BB%84%E6%AF%94%E8%BE%83%E5%A4%A7%E5%B0%8F" class="header-anchor">#</a> æ•°ç»„æ¯”è¾ƒå¤§å°</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
a <span class="token operator">==</span>  b
a <span class="token operator">===</span> b
a <span class="token operator">&gt;</span>   c
a <span class="token operator">&lt;</span>   c
</code></pre></div><p>è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</p> <details><summary><b>ç­”æ¡ˆ</b></summary> <p><ul><li>ç­”æ¡ˆï¼š<code>false, false, false, true</code></li> <li>è§£æï¼šç›¸ç­‰ï¼ˆ==ï¼‰å’Œå…¨ç­‰ï¼ˆ===ï¼‰è¿˜æ˜¯æ¯”è¾ƒå¼•ç”¨åœ°å€ã€‚å¼•ç”¨ç±»å‹é—´æ¯”è¾ƒå¤§å°æ˜¯æŒ‰ç…§å­—å…¸åºæ¯”è¾ƒï¼Œå°±æ˜¯å…ˆæ¯”ç¬¬ä¸€é¡¹è°å¤§ï¼Œç›¸åŒå†å»æ¯”ç¬¬äºŒé¡¹ã€‚</li></ul></p></details> <h3 id="åŸå‹"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%8E%9F%E5%9E%8B" class="header-anchor">#</a> åŸå‹</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token punctuation">[</span>a<span class="token punctuation">.</span>prototype <span class="token operator">===</span> b<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">===</span> b<span class="token punctuation">]</span> 
</code></pre></div><p>æ‰§è¡Œç»“æœæ˜¯å¤šå°‘å‘¢</p> <ul><li>ç­”æ¡ˆï¼š<code>false, true</code></li> <li>è§£æï¼š<code>Object</code> çš„å®ä¾‹æ˜¯ aï¼Œaä¸Šå¹¶æ²¡æœ‰prototypeå±æ€§açš„<code>__poroto__</code>æŒ‡å‘çš„æ˜¯<code>Object.prototype</code>ï¼Œä¹Ÿå°±æ˜¯<code>Object.getPrototypeOf(a)</code>ã€‚açš„åŸå‹å¯¹è±¡æ˜¯b</li></ul> <p><strong>åŸå‹II</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> f<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> b <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token operator">===</span> b         
</code></pre></div><p>è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</p> <ul><li>ç­”æ¡ˆï¼šfalse</li> <li>è§£æï¼š
<ul><li>aæ˜¯æ„é€ å‡½æ•°fçš„åŸå‹ ï¼š <code>{constructor: Æ’}</code></li> <li>bæ˜¯å®ä¾‹fçš„åŸå‹å¯¹è±¡ ï¼š <code>Æ’ () { [native code] }</code></li></ul></li></ul> <h3 id="å‡½æ•°åç§°"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%87%BD%E6%95%B0%E5%90%8D%E7%A7%B0" class="header-anchor">#</a> å‡½æ•°åç§°</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> oldName <span class="token operator">=</span> foo<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
foo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"bar"</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>oldName<span class="token punctuation">,</span> foo<span class="token punctuation">.</span>name<span class="token punctuation">]</span>     
</code></pre></div><p>ä»£ç æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p> <ul><li>ç­”æ¡ˆï¼š<code>["foo", "foo"]</code></li> <li>è§£æï¼šå‡½æ•°çš„åå­—ä¸å¯å˜.</li></ul> <h3 id="function-length"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#function-length" class="header-anchor">#</a> Function.length</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> Function<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length
a <span class="token operator">===</span> b
</code></pre></div><p>è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ï¼Ÿ</p> <ul><li>ç­”æ¡ˆï¼š<code>false</code></li> <li>è§£æï¼š
<ul><li>é¦–å…ˆnewåœ¨å‡½æ•°å¸¦ï¼ˆï¼‰æ—¶è¿ç®—ä¼˜å…ˆçº§å’Œ.ä¸€æ ·æ‰€ä»¥ä»å·¦å‘å³æ‰§è¡Œ</li> <li><code>new Function()</code> çš„å‡½æ•°é•¿åº¦ä¸º0</li></ul></li> <li>å·©å›ºï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>length<span class="token punctuation">)</span> 
<span class="token comment">//0 fnå’Œnew Function()ä¸€æ ·</span>
</code></pre></div><h3 id="b-a-a-a"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#b-a-a-a" class="header-anchor">#</a> "b" + "a" + +"a" + "a"</h3> <p>ä½ è®¤ä¸ºè¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p> <blockquote><p>ä¸Šé¢çš„è¡¨è¾¾å¼ç›¸å½“äº'b'+'a'+ (+'a')+'a'ï¼Œå› ä¸ºï¼ˆ+'a'ï¼‰æ˜¯NaNï¼Œæ‰€ä»¥ï¼š</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>'b'+'a'+ (+'a')+'a' = 'b'+'a'+ "NaN"+'a'='baNaNa'
</code></pre></div><h3 id="é—­åŒ…"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E9%97%AD%E5%8C%85" class="header-anchor">#</a> é—­åŒ…</h3> <p>è¿™æ˜¯ä¸€ä¸ªç»å…¸JavaScripté¢è¯•é¢˜</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
res<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>æœŸæœ›è¾“å‡ºçš„æ˜¯0,1,2,å®é™…ä¸Šå´ä¸ä¼šã€‚åŸå› å°±æ˜¯æ¶‰åŠ<strong>ä½œç”¨åŸŸ</strong>ï¼Œæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p> <ul><li>[x] ä½¿ç”¨letä»£æ›¿varï¼Œå½¢æˆå—çº§ä½œç”¨åŸŸ</li> <li>[x] ä½¿ç”¨bindå‡½æ•°ã€‚</li></ul> <div class="language- extra-class"><pre class="language-text"><code>res.push(console.log.bind(null, i))
</code></pre></div><p>è§£æ³•è¿˜æœ‰å…¶ä»–çš„ï¼Œæ¯”å¦‚ä½¿ç”¨IIFEï¼Œå½¢æˆç§æœ‰ä½œç”¨åŸŸç­‰ç­‰åšæ³•ã€‚</p> <p><strong>åˆä¸€ç»å…¸é—­åŒ…é—®é¢˜</strong></p> <div class="language- extra-class"><pre class="language-text"><code>function fun(n,o) {
  console.log(o)
  return {
    fun:function(m){
      return fun(m,n);
    }
  };
}
var a = fun(0);  a.fun(1);  a.fun(2);  a.fun(3);//undefined,?,?,?
var b = fun(0).fun(1).fun(2).fun(3);//undefined,?,?,?
var c = fun(0).fun(1);  c.fun(2);  c.fun(3);//undefined,?,?,?
</code></pre></div><h3 id="éšå¼è½¬æ¢"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E9%9A%90%E5%BC%8F%E8%BD%AC%E6%8D%A2" class="header-anchor">#</a> éšå¼è½¬æ¢</h3> <div class="language- extra-class"><pre class="language-text"><code>var a = [0];
if (a) {
  console.log(a == true);
} else {
  console.log("wut");
}
</code></pre></div><p>ä½ ä»¬è§‰å¾—ç­”æ¡ˆæ˜¯å¤šå°‘å‘¢ï¼Ÿ</p> <div class="language- extra-class"><pre class="language-text"><code>// ç­”æ¡ˆï¼šfalse
</code></pre></div><p><strong>å†æ¥ä¸€é“ï¼Ÿ</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡ºç»“æœæ˜¯å¤šå°‘</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
fn<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¾“å‡ºç»“æœæ˜¯å¤šå°‘ï¼Ÿ</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

fn<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

fn<span class="token punctuation">.</span><span class="token function-variable function">valueOf</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡ºç»“æœæ˜¯å¤šå°‘ï¼Ÿ</span>
</code></pre></div><h3 id="ä¸€é“å®¹æ˜“è¢«äººè½»è§†çš„é¢è¯•é¢˜"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E4%B8%80%E9%81%93%E5%AE%B9%E6%98%93%E8%A2%AB%E4%BA%BA%E8%BD%BB%E8%A7%86%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98" class="header-anchor">#</a> ä¸€é“å®¹æ˜“è¢«äººè½»è§†çš„é¢è¯•é¢˜</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token comment">//è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æœï¼š</span>
Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="let-var"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#let-var" class="header-anchor">#</a> let var</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
a<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// =&gt; ???</span>
<span class="token keyword">typeof</span> b<span class="token punctuation">;</span> <span class="token comment">// =&gt; ???</span>

</code></pre></div><blockquote><p>ä¸Šé¢çš„let a = b = 0; ç­‰ä»·äº window.b  = 0, let a = b;</p></blockquote> <h3 id="çœ¼åŠ›é¢˜"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%9C%BC%E5%8A%9B%E9%A2%98" class="header-anchor">#</a> çœ¼åŠ›é¢˜</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> length <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">{</span>
  numbers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

numbers<span class="token punctuation">;</span> <span class="token comment">// =&gt; ???</span>
</code></pre></div><p>å”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯<code>forè¯­å¥</code>åé¢å¸¦äº†<code>;</code>æ²™é›•é¢˜</p> <blockquote><p>åŠ äº†<code>;</code>ï¼Œä¼šè®¤ä¸ºforæ‰§è¡Œå®Œï¼Œæ‰€ä»¥æŒ‡å®šçš„éƒ½æ˜¯ç©ºè¯­å¥ï¼Œæœ€ånumbersä¸º[5]</p></blockquote> <h2 id="ç¬¬46é¢˜-å…³äº0-1-0-2-0-3æµ®ç‚¹æ•°è®¡ç®—åˆ†æä¸è§£å†³æ–¹æ³•"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC46%E9%A2%98-%E5%85%B3%E4%BA%8E0-1-0-2-0-3%E6%B5%AE%E7%82%B9%E6%95%B0%E8%AE%A1%E7%AE%97%E5%88%86%E6%9E%90%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95" class="header-anchor">#</a> ç¬¬46é¢˜ å…³äº0.1+0.2!=0.3æµ®ç‚¹æ•°è®¡ç®—åˆ†æä¸è§£å†³æ–¹æ³•</h2> <p><strong>å‡ºç°çš„åŸå› </strong></p> <blockquote><p>å°æ•°ç‚¹åœ¨è®¡ç®—æœºä¸­æ˜¯ä»¥äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œè€Œæœ‰äº›å°æ•°ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯æ— ç©·ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°ä¸Šé¢è¿™ç§ç²¾ç¡®åº¦çš„é—®é¢˜ã€‚ ä¸€äº›æµ®ç‚¹æ•°è¡¨ç¤ºæˆäºŒè¿›åˆ¶</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>åè¿›åˆ¶           äºŒè¿›åˆ¶
0.1              0.0001 1001 1001 1001 ...
0.2              0.0011 0011 0011 0011 ...
0.3              0.0100 1100 1100 1100 ...
0.4              0.0110 0110 0110 0110 ...
0.5              0.1
0.6              0.1001 1001 1001 1001 ...
</code></pre></div><p>è¿è¡Œä¸€ä¸‹ä¸‹é¢ä»£ç </p> <div class="language- extra-class"><pre class="language-text"><code>è¾“å…¥                 è¾“å‡º
0.1+0.05==0.15       FALSE
1-0.1-0.1-0.1==0.7   FALSE
0.3/0.1 == 3         FALSE
1.0-0.6 == 0.4       True
1.0-0.5 == 0.5       True
1.0-0.4 == 0.6       True
1.0-0.3 == 0.7       True
1.0-0.2 == 0.8       True
</code></pre></div><blockquote><p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› ï¼Œå…¶å®æ˜¯å› ä¸ºæ•°å€¼çš„è¡¨ç¤ºåœ¨è®¡ç®—æœºå†…éƒ¨æ˜¯ç”¨äºŒè¿›åˆ¶çš„ã€‚ä¾‹å¦‚ï¼Œåè¿›åˆ¶çš„0.625ï¼Œæ¢æˆäºŒè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯<code>0.101(1*2-1+0*2-2+1*2-3)</code>ã€‚<code>0.625</code>è¿™ä¸ªæ•°å€’è¿˜å¥½ï¼Œåˆšå¥½å¯ä»¥å‡†ç¡®è¡¨ç¤ºå‡ºæ¥ã€‚ä½†å¦‚æœæ˜¯0.1çš„è¯å‘¢ï¼Œæ¢æˆäºŒè¿›åˆ¶å°±æ˜¯<code>0.00011</code>(0011æ— é™å¾ªç¯)ï¼Œä¹Ÿå°±æ˜¯ï¼š<code>0.000110011001100110011001100110011...</code>ï¼Œä½æ•°æ˜¯æ— é™çš„ï¼Œåªèƒ½å–è¿‘ä¼¼ã€‚å¯¹äºè¿™äº›ä¸èƒ½å‡†ç¡®è¡¨ç¤ºçš„æ•°å°±æœ‰å¯èƒ½ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚ä¸ºä»€ä¹ˆæ˜¯å¯èƒ½å‘¢ï¼Ÿå› ä¸ºæœ‰äº›æ•°çš„è®¡ç®—ç»“æœï¼Œä¾‹å¦‚<code>0.1+0.3</code>ï¼Œå®ƒè™½ç„¶ä¹Ÿæ˜¯ä¸èƒ½ç²¾ç¡®åœ°è¡¨ç¤ºï¼Œä½†æ˜¯å®ƒç»“æœè¶³å¤Ÿæ¥è¿‘<code>0.4</code>ï¼Œé‚£å–äº†è¿‘ä¼¼åå°±æˆäº†<code>0.4</code>äº†ã€‚</p></blockquote> <p><strong>è§£å†³æ–¹æ³•</strong></p> <blockquote><p>ä½¿ç”¨ç®€å•ç‚¹å››èˆäº”å…¥æ–¹æ³•ï¼Œå–äº†ä¸€ä¸ª10ä½å°æ•°</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">numTofixed</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> num <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 01 + 0.2 = 0.30000000000000004 æˆªå–å°æ•°ç‚¹å10ä½ã€‚åˆ©ç”¨parseFloatå»æ‰å°æ•°ç‚¹åé¢çš„0</span>
        num <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">numTofixed</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ç¬¬45é¢˜-ä»‹ç»ä¸€ä¸‹tree-shakingåŠå…¶å·¥ä½œåŸç†"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC45%E9%A2%98-%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Btree-shaking%E5%8F%8A%E5%85%B6%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" class="header-anchor">#</a> ç¬¬45é¢˜ ä»‹ç»ä¸€ä¸‹Tree ShakingåŠå…¶å·¥ä½œåŸç†</h2> <blockquote><p><code>Tree shaking</code> æ˜¯ä¸€ç§é€šè¿‡æ¸…é™¤å¤šä½™ä»£ç æ–¹å¼æ¥ä¼˜åŒ–é¡¹ç›®æ‰“åŒ…ä½“ç§¯çš„æŠ€æœ¯</p></blockquote> <p><strong>tree shakingçš„åŸç†æ˜¯ä»€ä¹ˆ</strong></p> <ul><li><code>ES6 Module</code> å¼•å…¥è¿›è¡Œé™æ€åˆ†æï¼Œæ•…è€Œç¼–è¯‘çš„æ—¶å€™æ­£ç¡®åˆ¤æ–­åˆ°åº•åŠ è½½äº†é‚£äº›æ¨¡å—</li> <li>é™æ€åˆ†æç¨‹åºæµï¼Œåˆ¤æ–­é‚£äº›æ¨¡å—å’Œå˜é‡æœªè¢«ä½¿ç”¨æˆ–è€…å¼•ç”¨ï¼Œè¿›è€Œåˆ é™¤å¯¹åº”ä»£ç </li></ul> <p><strong>common.js å’Œ es6 ä¸­æ¨¡å—å¼•å…¥çš„åŒºåˆ«</strong></p> <blockquote><p>CommonJS æ˜¯ä¸€ç§æ¨¡å—è§„èŒƒï¼Œæœ€åˆè¢«åº”ç”¨äº Nodejsï¼Œæˆä¸º Nodejs çš„æ¨¡å—è§„èŒƒã€‚è¿è¡Œåœ¨æµè§ˆå™¨ç«¯çš„ JavaScript ç”±äºä¹Ÿç¼ºå°‘ç±»ä¼¼çš„è§„èŒƒï¼Œåœ¨ ES6 å‡ºæ¥ä¹‹å‰ï¼Œå‰ç«¯ä¹Ÿå®ç°äº†ä¸€å¥—ç›¸åŒçš„æ¨¡å—è§„èŒƒ (ä¾‹å¦‚: <code>AMD</code>)ï¼Œç”¨æ¥å¯¹å‰ç«¯æ¨¡å—è¿›è¡Œç®¡ç†ã€‚è‡ª ES6 èµ·ï¼Œå¼•å…¥äº†ä¸€å¥—æ–°çš„ <code>ES6 Module</code> è§„èŒƒï¼Œåœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ä¸Šå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œè€Œä¸”å®ç°å¾—ç›¸å½“ç®€å•ï¼Œæœ‰æœ›æˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚ä½†ç›®å‰æµè§ˆå™¨å¯¹ <code>ES6 Module</code> å…¼å®¹è¿˜ä¸å¤ªå¥½ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨ <code>Webpack</code> ä¸­ä½¿ç”¨çš„ <code>export</code> å’Œ <code>import</code>ï¼Œä¼šç»è¿‡ <code>Babel</code> è½¬æ¢ä¸º CommonJS è§„èŒƒã€‚åœ¨ä½¿ç”¨ä¸Šçš„å·®åˆ«ä¸»è¦æœ‰</p></blockquote> <ul><li><code>CommonJS</code> æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚</li> <li><code>CommonJS</code> æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚</li> <li><code>CommonJs</code> æ˜¯å•ä¸ªå€¼å¯¼å‡ºï¼Œ<code>ES6 Module</code>å¯ä»¥å¯¼å‡ºå¤šä¸ª</li> <li><code>CommonJs</code> æ˜¯åŠ¨æ€è¯­æ³•å¯ä»¥å†™åœ¨åˆ¤æ–­é‡Œï¼Œ<code>ES6 Module</code> é™æ€è¯­æ³•åªèƒ½å†™åœ¨é¡¶å±‚</li> <li><code>CommonJs</code> çš„ <code>this</code> æ˜¯å½“å‰æ¨¡å—ï¼Œ<code>ES6 Module</code>çš„ <code>this</code> æ˜¯ <code>undefined</code></li></ul> <h2 id="ç¬¬44é¢˜-æ‰§è¡Œnew-vueå¹²äº†ä»€ä¹ˆ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC44%E9%A2%98-%E6%89%A7%E8%A1%8Cnew-vue%E5%B9%B2%E4%BA%86%E4%BB%80%E4%B9%88" class="header-anchor">#</a> ç¬¬44é¢˜ æ‰§è¡Œnew Vueå¹²äº†ä»€ä¹ˆ</h2> <ul><li>å½“æˆ‘ä»¬å†™ä¸‹è¿™æ®µç®€å•<code>new Vue()</code>ä»£ç ï¼Œ<code>vue</code>æ¡†æ¶åšäº†ä»€ä¹ˆå‘¢?</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   el<span class="token operator">:</span><span class="token string">"#app"</span><span class="token punctuation">,</span>
     data<span class="token operator">:</span><span class="token punctuation">{</span>
        msg<span class="token operator">:</span><span class="token string">'this is msg'</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><ul><li>è°ƒç”¨<code>src/core/instance/index.js</code>çš„<code>Vue</code>æ„é€ æ–¹æ³•</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Vue</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span>
    <span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Vue</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'Vue is a constructor and should be called with the `new` keyword'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•ï¼ŒinitMixinçš„æ—¶å€™ï¼Œåœ¨vueåŸå‹ä¸ŠæŒ‚è½½äº† _initæ–¹æ³•</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ‰§è¡Œåˆå§‹åŒ–çš„å·¥ä½œ</span>
<span class="token function">initMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span>
<span class="token function">stateMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span>
<span class="token function">eventsMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span>
<span class="token function">lifecycleMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span>
<span class="token function">renderMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Vue
</code></pre></div><ul><li>æ¥ä¸‹æ¥è°ƒç”¨åŸå‹ä¸Šé¢<code>_init</code>æ–¹æ³•ï¼Œæ˜¯æˆ‘ä»¬è¦é‡ç‚¹åˆ†æçš„ï¼Œå…¶å…¥å‚<code>options</code>å°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„å¯¹è±¡æ—¶ä¼ å…¥çš„å‚æ•°å¯¹è±¡</li> <li>æ‰§è¡Œå†…éƒ¨åˆå§‹åŒ–æ–¹æ³•ï¼Œé¦–å…ˆæ˜¯<code>options</code>çš„åˆå¹¶ï¼Œä¹‹åæ˜¯ä¸€å †initæ–¹æ³•</li> <li>å¯¹<code>options</code>è¿›è¡Œåˆå¹¶ï¼Œvueä¼šå°†ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•éƒ½ç»Ÿä¸€æ”¾åˆ°<code>vm.$options</code>ä¸­ï¼Œä¸ºåç»­çš„è°ƒç”¨åšå‡†å¤‡å·¥ä½œã€‚<code>vm.$option</code>çš„å±æ€§æ¥è‡ªä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯<code>Vue</code>çš„æ„é€ å‡½æ•°(<code>vm.constructor</code>)é¢„å…ˆå®šä¹‰çš„ï¼Œä¸€ä¸ªæ˜¯<code>new Vue</code>æ—¶ä¼ å…¥çš„å…¥å‚å¯¹è±¡ã€‚åˆå¹¶å®Œæˆåçš„<code>options</code>å±æ€§åŒ…æ‹¬ï¼š</li></ul> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210403162230.png" alt="" class="medium-zoom-image"></p> <ul><li>åˆå§‹åŒ–å„ç±»å±æ€§å’Œäº‹ä»¶</li></ul> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210403162331.png" alt="" class="medium-zoom-image"></p> <ul><li>æŒ‚è½½ã€‚å¦‚æœè¯´å‰é¢å‡ éƒ¨åˆ†éƒ½æ˜¯å‡†å¤‡é˜¶æ®µï¼Œé‚£ä¹ˆè¿™éƒ¨åˆ†æ˜¯æ•´ä¸ª<code>new Vue</code>çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå°†<code>template</code>ç¼–è¯‘æˆ<code>render</code>è¡¨è¾¾å¼ï¼Œç„¶åè½¬åŒ–ä¸ºå¤§åé¼é¼çš„<code>Vnode</code>ï¼Œæœ€ç»ˆæ¸²æŸ“ä¸ºçœŸå®çš„<code>dom</code>èŠ‚ç‚¹</li></ul> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210403162420.png" alt="" class="medium-zoom-image"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// _init()çš„å®ç°åœ¨src/core/instance/init.jsä¸­</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç¬¬ä¸€éƒ¨åˆ† åˆå§‹åŒ–å±æ€§</span>
    <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">// a uid</span>
    vm<span class="token punctuation">.</span>_uid <span class="token operator">=</span> uid$<span class="token number">3</span><span class="token operator">++</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> startTag<span class="token punctuation">,</span> endTag<span class="token punctuation">;</span>
    <span class="token comment">/* istanbul ignore if */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>performance <span class="token operator">&amp;&amp;</span> mark<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      startTag <span class="token operator">=</span> <span class="token string">"vue-perf-start:"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      endTag <span class="token operator">=</span> <span class="token string">"vue-perf-end:"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">mark</span><span class="token punctuation">(</span>startTag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// a flag to avoid this being observed</span>
    vm<span class="token punctuation">.</span>_isVue <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// ç¬¬äºŒéƒ¨åˆ† åˆå¹¶ç›¸å…³option merge options</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>_isComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// optimize internal component instantiation</span>
      <span class="token comment">// since dynamic options merging is pretty slow, and none of the</span>
      <span class="token comment">// internal component options needs special treatment.</span>
      <span class="token function">initInternalComponent</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      vm<span class="token punctuation">.</span>$options <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>
        <span class="token function">resolveConstructorOptions</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">,</span>
        options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        vm
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ç¬¬ä¸‰éƒ¨åˆ†ï¼Œåˆå§‹åŒ–å„ç±»å±æ€§å’Œäº‹ä»¶</span>
    <span class="token comment">/* istanbul ignore else */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">initProxy</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      vm<span class="token punctuation">.</span>_renderProxy <span class="token operator">=</span> vm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// expose real self</span>
    vm<span class="token punctuation">.</span>_self <span class="token operator">=</span> vm<span class="token punctuation">;</span>
    <span class="token function">initLifecycle</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initEvents</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initRender</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">'beforeCreate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initInjections</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// resolve injections before data/props</span>
    <span class="token function">initState</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initProvide</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// resolve provide after data/props</span>
    <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">'created'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* istanbul ignore if */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>performance <span class="token operator">&amp;&amp;</span> mark<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      vm<span class="token punctuation">.</span>_name <span class="token operator">=</span> <span class="token function">formatComponentName</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">mark</span><span class="token punctuation">(</span>endTag<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">measure</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">"vue "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" init"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> startTag<span class="token punctuation">,</span> endTag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç¬¬å››éƒ¨åˆ† æŒ‚è½½èŠ‚ç‚¹</span>
      vm<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>æˆ‘ä»¬åœ¨å†…éƒ¨èƒ½æ‰§è¡Œ<code>this.msg</code>çš„åŸå› æ˜¯<code>vm._data</code>ä»£ç†è¿”å›</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">initData</span> <span class="token punctuation">(</span><span class="token parameter">vm<span class="token operator">:</span> Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> data <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>data
  data <span class="token operator">=</span> vm<span class="token punctuation">.</span>_data <span class="token operator">=</span> <span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">'function'</span>
    <span class="token operator">?</span> <span class="token function">getData</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
    <span class="token operator">:</span> data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">warn</span><span class="token punctuation">(</span>
      <span class="token string">'data functions should return an object:\n'</span> <span class="token operator">+</span>
      <span class="token string">'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function'</span><span class="token punctuation">,</span>
      vm
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// proxy data on instance</span>
  <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>props
  <span class="token keyword">const</span> methods <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>methods
  <span class="token keyword">let</span> i <span class="token operator">=</span> keys<span class="token punctuation">.</span>length
  <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>methods <span class="token operator">&amp;&amp;</span> <span class="token function">hasOwn</span><span class="token punctuation">(</span>methods<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Method "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" has already been defined as a data property.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          vm
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>props <span class="token operator">&amp;&amp;</span> <span class="token function">hasOwn</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The data property "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" is already declared as a prop. </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Use prop default value instead.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        vm
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isReserved</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä½¿æˆ‘ä»¬èƒ½æ‰§è¡Œthis.msg </span>
      <span class="token function">proxy</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">_data</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// observe data</span>
  <span class="token function">observe</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token comment">/* asRootData */</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">proxy</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token operator">:</span> Object<span class="token punctuation">,</span> sourceKey<span class="token operator">:</span> string<span class="token punctuation">,</span> key<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  sharedPropertyDefinition<span class="token punctuation">.</span><span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">proxyGetter</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰§è¡Œthis.msg è¢«ä»£ç†åˆ°this._dataä¸Šé¢</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>sourceKey<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  sharedPropertyDefinition<span class="token punctuation">.</span><span class="token function-variable function">set</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">proxySetter</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>sourceKey<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val
  <span class="token punctuation">}</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> sharedPropertyDefinition<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>Vue</code> åˆå§‹åŒ–ä¸»è¦å°±å¹²äº†å‡ ä»¶äº‹æƒ…ï¼Œåˆå¹¶é…ç½®ï¼Œåˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸï¼Œåˆå§‹åŒ–äº‹ä»¶ä¸­å¿ƒï¼Œåˆå§‹åŒ–æ¸²æŸ“ï¼Œåˆå§‹åŒ– <code>data</code>ã€<code>props</code>ã€<code>computed</code>ã€<code>watcher</code> ç­‰</p></blockquote> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210403192632.png" alt="" class="medium-zoom-image"></p> <h2 id="ç¬¬43é¢˜-è¯´ä¸€ä¸‹vue2-xä¸­å¦‚ä½•ç›‘æµ‹æ•°ç»„å˜åŒ–"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC43%E9%A2%98-%E8%AF%B4%E4%B8%80%E4%B8%8Bvue2-x%E4%B8%AD%E5%A6%82%E4%BD%95%E7%9B%91%E6%B5%8B%E6%95%B0%E7%BB%84%E5%8F%98%E5%8C%96" class="header-anchor">#</a> ç¬¬43é¢˜ è¯´ä¸€ä¸‹vue2.xä¸­å¦‚ä½•ç›‘æµ‹æ•°ç»„å˜åŒ–</h2> <blockquote><p>ä½¿ç”¨äº†å‡½æ•°åŠ«æŒçš„æ–¹å¼ï¼Œé‡å†™äº†æ•°ç»„çš„æ–¹æ³•ï¼Œ<code>Vue</code>å°†<code>data</code>ä¸­çš„æ•°ç»„è¿›è¡Œäº†åŸå‹é“¾é‡å†™ï¼ŒæŒ‡å‘äº†è‡ªå·±å®šä¹‰çš„æ•°ç»„åŸå‹æ–¹æ³•ã€‚è¿™æ ·å½“è°ƒç”¨æ•°ç»„apiæ—¶ï¼Œå¯ä»¥é€šçŸ¥ä¾èµ–æ›´æ–°ã€‚å¦‚æœæ•°ç»„ä¸­åŒ…å«ç€å¼•ç”¨ç±»å‹ï¼Œä¼šå¯¹æ•°ç»„ä¸­çš„å¼•ç”¨ç±»å‹å†æ¬¡é€’å½’éå†è¿›è¡Œç›‘æ§ã€‚è¿™æ ·å°±å®ç°äº†ç›‘æµ‹æ•°ç»„å˜åŒ–ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æºç å®ç°</span>
<span class="token comment">/*
 * not type checking this file because flow doesn't play well with
 * dynamically accessing methods on Array prototype
 */</span>

<span class="token comment">/**
 * Define a property.
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">def</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token operator">:</span> Object<span class="token punctuation">,</span> key<span class="token operator">:</span> string<span class="token punctuation">,</span> val<span class="token operator">:</span> any<span class="token punctuation">,</span> enumerable<span class="token operator">?</span><span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> val<span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>enumerable<span class="token punctuation">,</span>
    writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    configurable<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arrayProto <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype 
<span class="token keyword">const</span> arrayMethods <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>arrayProto<span class="token punctuation">)</span>

<span class="token comment">/**
 * Intercept mutating methods and emit events
 */</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span>
  <span class="token string">'push'</span><span class="token punctuation">,</span>
  <span class="token string">'pop'</span><span class="token punctuation">,</span>
  <span class="token string">'shift'</span><span class="token punctuation">,</span>
  <span class="token string">'unshift'</span><span class="token punctuation">,</span>
  <span class="token string">'splice'</span><span class="token punctuation">,</span>
  <span class="token string">'sort'</span><span class="token punctuation">,</span>
  <span class="token string">'reverse'</span>
<span class="token punctuation">]</span>
<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">method</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// cache original method</span>
  <span class="token keyword">const</span> original <span class="token operator">=</span> arrayProto<span class="token punctuation">[</span>method<span class="token punctuation">]</span>
  <span class="token function">def</span><span class="token punctuation">(</span>arrayMethods<span class="token punctuation">,</span> method<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">mutator</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">original</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token keyword">const</span> ob <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>__ob__
    <span class="token keyword">let</span> inserted
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>method<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'push'</span><span class="token operator">:</span>
      <span class="token keyword">case</span> <span class="token string">'unshift'</span><span class="token operator">:</span>
        inserted <span class="token operator">=</span> args
        <span class="token keyword">break</span>
      <span class="token keyword">case</span> <span class="token string">'splice'</span><span class="token operator">:</span>
        inserted <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>inserted<span class="token punctuation">)</span> ob<span class="token punctuation">.</span><span class="token function">observeArray</span><span class="token punctuation">(</span>inserted<span class="token punctuation">)</span>
    <span class="token comment">// notify change</span>
    ob<span class="token punctuation">.</span>dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ç¬¬42é¢˜-ä»‹ç»-https-æ¡æ‰‹è¿‡ç¨‹"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC42%E9%A2%98-%E4%BB%8B%E7%BB%8D-https-%E6%8F%A1%E6%89%8B%E8%BF%87%E7%A8%8B" class="header-anchor">#</a> ç¬¬42é¢˜ ä»‹ç» HTTPS æ¡æ‰‹è¿‡ç¨‹</h2> <ul><li>å®¢æˆ·ç«¯ä½¿ç”¨<code>https</code>çš„<code>url</code>è®¿é—®<code>web</code>æœåŠ¡å™¨,è¦æ±‚ä¸æœåŠ¡å™¨å»ºç«‹<code>ssl</code>è¿æ¥</li> <li><code>web</code>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚å, ä¼šå°†ç½‘ç«™çš„è¯ä¹¦(åŒ…å«å…¬é’¥)ä¼ é€ä¸€ä»½ç»™å®¢æˆ·ç«¯</li> <li>å®¢æˆ·ç«¯æ”¶åˆ°ç½‘ç«™è¯ä¹¦åä¼šæ£€æŸ¥è¯ä¹¦çš„é¢å‘æœºæ„ä»¥åŠè¿‡æœŸæ—¶é—´, å¦‚æœæ²¡æœ‰é—®é¢˜å°±éšæœºäº§ç”Ÿä¸€ä¸ªç§˜é’¥</li> <li>å®¢æˆ·ç«¯åˆ©ç”¨å…¬é’¥å°†ä¼šè¯ç§˜é’¥åŠ å¯†, å¹¶ä¼ é€ç»™æœåŠ¡ç«¯, æœåŠ¡ç«¯åˆ©ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å‡ºä¼šè¯ç§˜é’¥</li> <li>ä¹‹åæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä½¿ç”¨ç§˜é’¥åŠ å¯†ä¼ è¾“</li></ul> <p><strong>HTTPS æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯å¦‚ä½•éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§</strong></p> <ul><li>é¦–å…ˆæµè§ˆå™¨è¯»å–è¯ä¹¦ä¸­çš„è¯ä¹¦æ‰€æœ‰è€…ã€æœ‰æ•ˆæœŸç­‰ä¿¡æ¯è¿›è¡Œä¸€ä¸€æ ¡éªŒã€‚</li> <li>æµè§ˆå™¨å¼€å§‹æŸ¥æ‰¾æ“ä½œç³»ç»Ÿä¸­å·²å†…ç½®çš„å—ä¿¡ä»»çš„è¯ä¹¦å‘å¸ƒæœºæ„ CAï¼Œä¸æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦ä¸­çš„é¢å‘è€… CA æ¯”å¯¹ï¼Œç”¨äºæ ¡éªŒè¯ä¹¦æ˜¯å¦ä¸ºåˆæ³•æœºæ„é¢å‘ã€‚</li> <li>å¦‚æœæ‰¾ä¸åˆ°ï¼Œæµè§ˆå™¨å°±ä¼šæŠ¥é”™ï¼Œè¯´æ˜æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦æ˜¯ä¸å¯ä¿¡ä»»çš„ã€‚å¦‚æœæ‰¾åˆ°ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šä»æ“ä½œç³»ç»Ÿä¸­å–å‡ºé¢å‘è€… CA çš„å…¬é’¥ï¼Œç„¶åå¯¹æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦é‡Œé¢çš„ç­¾åè¿›è¡Œè§£å¯†ã€‚</li> <li>æµè§ˆå™¨ä½¿ç”¨ç›¸åŒçš„ Hash ç®—æ³•æ ¹æ®è¯ä¹¦å†…å®¹è®¡ç®—å‡ºä¿¡æ¯æ‘˜è¦ï¼Œå°†è¿™ä¸ªè®¡ç®—çš„å€¼ä¸è¯ä¹¦è§£å¯†çš„å€¼åšå¯¹æ¯”ã€‚</li> <li>å¯¹æ¯”ç»“æœä¸€è‡´ï¼Œåˆ™è¯æ˜æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦åˆæ³•ï¼Œæ²¡æœ‰è¢«å†’å……ã€‚æ­¤æ—¶æµè§ˆå™¨å°±å¯ä»¥è¯»å–è¯ä¹¦ä¸­çš„å…¬é’¥ï¼Œç”¨äºåç»­åŠ å¯†äº†ã€‚</li></ul> <p><strong>HTTPS åŸç†ä¸€è§ˆå›¾</strong></p> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210401090238.png" alt="" class="medium-zoom-image"></p> <h2 id="ç¬¬41é¢˜-è§£é‡Šä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC41%E9%A2%98-%E8%A7%A3%E9%87%8A%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88" class="header-anchor">#</a> ç¬¬41é¢˜ è§£é‡Šä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆ</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'2'</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string">'3'</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token string">'length'</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">'splice'</span><span class="token operator">:</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>splice<span class="token punctuation">,</span>
    <span class="token string">'push'</span><span class="token operator">:</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre></div><p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210330142116.png" alt="" class="medium-zoom-image"></p> <ul><li><code>push</code> æ–¹æ³•æœ‰æ„å…·æœ‰é€šç”¨æ€§ã€‚è¯¥æ–¹æ³•å’Œ <code>call()</code> æˆ– <code>apply()</code> ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¯åº”ç”¨åœ¨ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä¸Šã€‚<code>push</code> æ–¹æ³•æ ¹æ® <code>length</code>å±æ€§æ¥å†³å®šä»å“ªé‡Œå¼€å§‹æ’å…¥ç»™å®šçš„å€¼ã€‚å¦‚æœ <code>length</code> ä¸èƒ½è¢«è½¬æˆä¸€ä¸ªæ•°å€¼ï¼Œåˆ™æ’å…¥çš„å…ƒç´ ç´¢å¼•ä¸º <code>0</code>ï¼ŒåŒ…æ‹¬ <code>length</code> ä¸å­˜åœ¨æ—¶ã€‚å½“ <code>length</code> ä¸å­˜åœ¨æ—¶ï¼Œå°†ä¼šåˆ›å»ºå®ƒ</li> <li>è°ƒç”¨pushæ–¹æ³•çš„æ—¶å€™ä¼šåœ¨è°ƒç”¨å¯¹è±¡çš„<code>key=length</code>çš„åœ°æ–¹åšä¸€ä¸ªèµ‹å€¼ï¼Œä¸ç®¡å‰é¢keyæœ‰æ²¡æœ‰å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è°ƒç”¨<code>push</code>çš„æ—¶å€™ å¯¹è±¡å®é™…è¢«ç†è§£ä¸ºäº†<code>[0:undefined,1:undefined,2:3,3:4]</code></li> <li>è¿™ä¸ªå¯¹è±¡å¦‚æœæœ‰<code>push</code>å’Œ<code>splice</code>ä¼šè¾“å‡ºä¼šè½¬æ¢ä¸ºæ•°ç»„</li></ul> <h2 id="ç¬¬40é¢˜-å®ç°-5-add-3-minus-2-åŠŸèƒ½"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC40%E9%A2%98-%E5%AE%9E%E7%8E%B0-5-add-3-minus-2-%E5%8A%9F%E8%83%BD" class="header-anchor">#</a> ç¬¬40é¢˜ å®ç° (5).add(3).minus(2) åŠŸèƒ½</h2> <blockquote><p>ä¾‹ï¼š 5 + 3 - 2ï¼Œç»“æœä¸º 6</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> val <span class="token operator">!==</span> <span class="token string">'number'</span> <span class="token operator">||</span> Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥æ•°å­—'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token operator">+</span> val
  <span class="token punctuation">}</span>
  
  <span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> val <span class="token operator">!==</span> <span class="token string">'number'</span> <span class="token operator">||</span> Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥æ•°å­—'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token operator">-</span> val
  <span class="token punctuation">}</span>
  
  <span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>add <span class="token operator">=</span> add
  <span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>minus <span class="token operator">=</span> minus
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ç¬¬39é¢˜-react-setstate-ç¬”è¯•é¢˜-ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC39%E9%A2%98-react-setstate-%E7%AC%94%E8%AF%95%E9%A2%98-%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88" class="header-anchor">#</a> ç¬¬39é¢˜ React setState ç¬”è¯•é¢˜ï¼Œä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</h2> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      val<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>val<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç¬¬ 1 æ¬¡ log</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>val<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ç¬¬ 2 æ¬¡ log</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>val<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç¬¬ 3 æ¬¡ log</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>val<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç¬¬ 4 æ¬¡ log</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 0</span>
<span class="token comment">// 0</span>
<span class="token comment">// 2</span>
<span class="token comment">// 3</span>
</code></pre></div><h2 id="ç¬¬38é¢˜-å¤´æ¡-å¼‚æ­¥ç¬”è¯•é¢˜"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC38%E9%A2%98-%E5%A4%B4%E6%9D%A1-%E5%BC%82%E6%AD%A5%E7%AC%94%E8%AF%95%E9%A2%98" class="header-anchor">#</a> ç¬¬38é¢˜ ï¼ˆå¤´æ¡ï¼‰å¼‚æ­¥ç¬”è¯•é¢˜</h2> <blockquote><p>è¯·å†™å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœ</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// script start </span>
<span class="token comment">// async1 start</span>
<span class="token comment">// async2 </span>
<span class="token comment">// promise1</span>
<span class="token comment">// script end</span>
<span class="token comment">// async1 end</span>
<span class="token comment">// promise2</span>
<span class="token comment">// setTimeout</span>
</code></pre></div><h2 id="ç¬¬37é¢˜-å®ç°es6çš„class"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC37%E9%A2%98-%E5%AE%9E%E7%8E%B0es6%E7%9A%84class" class="header-anchor">#</a> ç¬¬37é¢˜ å®ç°ES6çš„class</h2> <blockquote><p>js çš„å®Œç¾ç»§æ‰¿æ˜¯å¯„ç”Ÿç»„åˆç»§æ‰¿</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Parent</span>
<span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// Child</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>  <span class="token comment">// åŸå‹æ‹·è´</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child <span class="token comment">// é‡ç½®å­ç±»constructorï¼Œå¦åˆ™å­ç±»å®ä¾‹constructorå°†æŒ‡å‘Parent</span>

<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æµ‹è¯•</span>
<span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'poetry'</span><span class="token punctuation">)</span>
child<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
child<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ç¬¬36é¢˜-å®ç°ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC36%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%9F%AF%E9%87%8C%E5%8C%96%E5%87%BD%E6%95%B0" class="header-anchor">#</a> ç¬¬36é¢˜ å®ç°ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°</h2> <blockquote><p>é¢„å…ˆå¤„ç†çš„æ€æƒ³ï¼Œåˆ©ç”¨é—­åŒ…çš„æœºåˆ¶</p> <ul><li>æŸ¯é‡ŒåŒ–çš„å®šä¹‰ï¼šæ¥æ”¶ä¸€éƒ¨åˆ†å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°æ¥æ”¶å‰©ä½™å‚æ•°ï¼Œæ¥æ”¶è¶³å¤Ÿå‚æ•°åï¼Œæ‰§è¡ŒåŸå‡½æ•°ã€‚</li> <li>å‡½æ•°æŸ¯é‡ŒåŒ–çš„ä¸»è¦ä½œç”¨å’Œç‰¹ç‚¹å°±æ˜¯<code>å‚æ•°å¤ç”¨</code>ã€<code>æå‰è¿”å›</code>å’Œ<code>å»¶è¿Ÿæ‰§è¡Œ</code>ã€‚</li></ul></blockquote> <ul><li>æŸ¯é‡ŒåŒ–æŠŠå¤šæ¬¡ä¼ å…¥çš„å‚æ•°åˆå¹¶ï¼ŒæŸ¯é‡ŒåŒ–æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°</li> <li>æ¯æ¬¡éƒ½è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</li> <li>æ¯æ¬¡å…¥å‚éƒ½æ˜¯ä¸€ä¸ª</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åˆ†æ‰¹ä¼ å…¥å‚æ•°</span>
<span class="token comment">// redux æºç çš„composeä¹Ÿæ˜¯ç”¨äº†ç±»ä¼¼æŸ¯é‡ŒåŒ–çš„æ“ä½œ</span>
<span class="token keyword">const</span> <span class="token function-variable function">curry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">// arrå°±æ˜¯æˆ‘ä»¬è¦æ”¶é›†æ¯æ¬¡è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> fn<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// å‡½æ•°çš„é•¿åº¦ï¼Œå°±æ˜¯å‚æ•°çš„ä¸ªæ•°</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newArgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span> <span class="token comment">// æ”¶é›†æ¯æ¬¡ä¼ å…¥çš„å‚æ•°</span>

    <span class="token comment">// å¦‚æœä¼ å…¥çš„å‚æ•°ä¸ªæ•°ç­‰äºæˆ‘ä»¬æŒ‡å®šçš„å‡½æ•°å‚æ•°ä¸ªæ•°ï¼Œå°±æ‰§è¡ŒæŒ‡å®šçš„çœŸæ­£å‡½æ•°</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>newArgs<span class="token punctuation">.</span>length <span class="token operator">===</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>newArgs<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// é€’å½’æ”¶é›†å‚æ•°</span>
      <span class="token keyword">return</span> <span class="token function">curry</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> newArgs<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>ç®€æ´å†™æ³•</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">curry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length <span class="token operator">===</span> fn<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>arg<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">curry</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token operator">...</span>arr<span class="token punctuation">,</span>
    <span class="token operator">...</span>args<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æŸ¯é‡ŒåŒ–æ±‚èŒ</span>
<span class="token comment">// æŒ‡å®šçš„å‡½æ•°</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c <span class="token operator">+</span> d <span class="token operator">+</span> e
<span class="token punctuation">}</span>

<span class="token comment">// ä¼ å…¥æŒ‡å®šçš„å‡½æ•°ï¼Œæ‰§è¡Œä¸€æ¬¡</span>
<span class="token keyword">let</span> newSum <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>

<span class="token comment">// æŸ¯é‡ŒåŒ– æ¯æ¬¡å…¥å‚éƒ½æ˜¯ä¸€ä¸ªå‚æ•°</span>
<span class="token function">newSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">// åå‡½æ•°</span>
<span class="token function">newSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æŸ¯é‡ŒåŒ–ç®€å•åº”ç”¨</span>
<span class="token comment">// åˆ¤æ–­ç±»å‹ï¼Œå‚æ•°å¤šå°‘ä¸ªï¼Œå°±æ‰§è¡Œå¤šå°‘æ¬¡æ”¶é›†</span>
<span class="token keyword">function</span> <span class="token function">isType</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[object </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newType <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>isType<span class="token punctuation">)</span>

<span class="token comment">// ç›¸å½“äºæŠŠå‡½æ•°å‚æ•°ä¸€ä¸ªä¸ªä¼ äº†ï¼ŒæŠŠç¬¬ä¸€æ¬¡å…ˆç¼“å­˜èµ·æ¥</span>
<span class="token keyword">let</span> isString <span class="token operator">=</span> <span class="token function">newType</span><span class="token punctuation">(</span><span class="token string">'String'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> isNumber <span class="token operator">=</span> <span class="token function">newType</span><span class="token punctuation">(</span><span class="token string">'Number'</span><span class="token punctuation">)</span>

<span class="token function">isString</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
<span class="token function">isNumber</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ç¬¬35é¢˜-å®ç°ä¸€ä¸ªç®€æ˜“çš„mvvm"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC35%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E7%9A%84mvvm" class="header-anchor">#</a> ç¬¬35é¢˜ å®ç°ä¸€ä¸ªç®€æ˜“çš„MVVM</h2> <blockquote><p>å®ç°ä¸€ä¸ªç®€æ˜“çš„<code>MVVM</code>æˆ‘ä¼šåˆ†ä¸ºè¿™ä¹ˆå‡ æ­¥æ¥ï¼š</p></blockquote> <ol><li>é¦–å…ˆæˆ‘ä¼šå®šä¹‰ä¸€ä¸ªç±»<code>Vue</code>ï¼Œè¿™ä¸ªç±»æ¥æ”¶çš„æ˜¯ä¸€ä¸ª<code>options</code>ï¼Œé‚£ä¹ˆå…¶ä¸­å¯èƒ½æœ‰éœ€è¦æŒ‚è½½çš„æ ¹å…ƒç´ çš„<code>id</code>ï¼Œä¹Ÿå°±æ˜¯<code>el</code>å±æ€§ï¼›ç„¶ååº”è¯¥è¿˜æœ‰ä¸€ä¸ª<code>data</code>å±æ€§ï¼Œè¡¨ç¤ºéœ€è¦åŒå‘ç»‘å®šçš„æ•°æ®</li> <li>å…¶æ¬¡æˆ‘ä¼šå®šä¹‰ä¸€ä¸ª<code>Dep</code>ç±»ï¼Œè¿™ä¸ªç±»äº§ç”Ÿçš„å®ä¾‹å¯¹è±¡ä¸­ä¼šå®šä¹‰ä¸€ä¸ª<code>subs</code>æ•°ç»„ç”¨æ¥å­˜æ”¾æ‰€ä¾èµ–è¿™ä¸ªå±æ€§çš„ä¾èµ–ï¼Œå·²ç»æ·»åŠ ä¾èµ–çš„æ–¹æ³•<code>addSub</code>ï¼Œåˆ é™¤æ–¹æ³•<code>removeSub</code>ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>notify</code>æ–¹æ³•ç”¨æ¥éå†æ›´æ–°å®ƒ<code>subs</code>ä¸­çš„æ‰€æœ‰ä¾èµ–ï¼ŒåŒæ—¶Depç±»æœ‰ä¸€ä¸ªé™æ€å±æ€§<code>target</code>å®ƒç”¨æ¥è¡¨ç¤ºå½“å‰çš„è§‚å¯Ÿè€…ï¼Œå½“åç»­è¿›è¡Œä¾èµ–æ”¶é›†çš„æ—¶å€™å¯ä»¥å°†å®ƒæ·»åŠ åˆ°<code>dep.subs</code>ä¸­ã€‚</li> <li>ç„¶åè®¾è®¡ä¸€ä¸ª<code>observe</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶çš„æ˜¯ä¼ è¿›æ¥çš„<code>data</code>ï¼Œä¹Ÿå°±æ˜¯<code>options.data</code>ï¼Œé‡Œé¢ä¼šéå†<code>data</code>ä¸­çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œå¹¶ä½¿ç”¨<code>Object.defineProperty()</code>æ¥é‡å†™å®ƒçš„<code>get</code>å’Œ<code>set</code>ï¼Œé‚£ä¹ˆè¿™é‡Œé¢å‘¢å¯ä»¥ä½¿ç”¨<code>new Dep()</code>å®ä¾‹åŒ–ä¸€ä¸ª<code>dep</code>å¯¹è±¡ï¼Œåœ¨<code>get</code>çš„æ—¶å€™è°ƒç”¨å…¶<code>addSub</code>æ–¹æ³•æ·»åŠ å½“å‰çš„è§‚å¯Ÿè€…<code>Dep.target</code>å®Œæˆä¾èµ–æ”¶é›†ï¼Œå¹¶ä¸”åœ¨<code>set</code>çš„æ—¶å€™è°ƒç”¨<code>dep.notify</code>æ–¹æ³•æ¥é€šçŸ¥æ¯ä¸€ä¸ªä¾èµ–å®ƒçš„è§‚å¯Ÿè€…è¿›è¡Œæ›´æ–°</li> <li>å®Œæˆè¿™äº›ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª<code>compile</code>æ–¹æ³•æ¥å°†HTMLæ¨¡ç‰ˆå’Œæ•°æ®ç»“åˆèµ·æ¥ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­é¦–å…ˆä¼ å…¥çš„æ˜¯ä¸€ä¸ª<code>node</code>èŠ‚ç‚¹ï¼Œç„¶åéå†å®ƒçš„æ‰€æœ‰å­çº§ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰<code>firstElmentChild</code>ï¼Œæœ‰çš„è¯åˆ™è¿›è¡Œé€’å½’è°ƒç”¨compileæ–¹æ³•ï¼Œæ²¡æœ‰<code>firstElementChild</code>çš„è¯ä¸”è¯¥<code>child.innderHTML</code>ç”¨æ­£åˆ™åŒ¹é…æ»¡è¶³æœ‰<code>/\{\{(.*)\}\}/</code>é¡¹çš„è¯åˆ™è¡¨ç¤ºæœ‰éœ€è¦åŒå‘ç»‘å®šçš„æ•°æ®ï¼Œé‚£ä¹ˆå°±å°†ç”¨æ­£åˆ™<code>new Reg('\\{\\{\\s*' + key + '\\s*\\}\\}', 'gm')</code>æ›¿æ¢æ‰<code></code>æ˜¯å…¶ä¸º<code>msg</code>å˜é‡ã€‚</li> <li>å®Œæˆå˜é‡æ›¿æ¢çš„åŒæ—¶ï¼Œè¿˜éœ€è¦å°†<code>Dep.target</code>æŒ‡å‘å½“å‰çš„è¿™ä¸ª<code>child</code>ï¼Œä¸”è°ƒç”¨ä¸€ä¸‹<code>this.opt.data[key]</code>ï¼Œä¹Ÿå°±æ˜¯ä¸ºäº†è§¦å‘è¿™ä¸ªæ•°æ®çš„<code>get</code>æ¥å¯¹å½“å‰çš„<code>child</code>è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œè¿™æ ·ä¸‹æ¬¡æ•°æ®å˜åŒ–çš„æ—¶å€™å°±èƒ½é€šçŸ¥<code>child</code>è¿›è¡Œè§†å›¾æ›´æ–°äº†ï¼Œä¸è¿‡åœ¨æœ€åè¦è®°å¾—å°†<code>Dep.target</code>æŒ‡ä¸º<code>null</code>å“¦(å…¶å®åœ¨<code>Vue</code>ä¸­æ˜¯æœ‰ä¸€ä¸ª<code>targetStack</code>æ ˆç”¨æ¥å­˜æ”¾<code>target</code>çš„æŒ‡å‘çš„)</li> <li>é‚£ä¹ˆæœ€åæˆ‘ä»¬åªéœ€è¦ç›‘å¬<code>document</code>çš„<code>DOMContentLoaded</code>ç„¶ååœ¨å›è°ƒå‡½æ•°ä¸­å®ä¾‹åŒ–è¿™ä¸ª<code>Vue</code>å¯¹è±¡å°±å¯ä»¥äº†</li></ol> <p><strong>coding</strong>:</p> <p>éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p> <ul><li><code>childNodes</code>ä¼šè·å–åˆ°æ‰€æœ‰çš„å­èŠ‚ç‚¹ä»¥åŠæ–‡æœ¬èŠ‚ç‚¹(åŒ…æ‹¬å…ƒç´ æ ‡ç­¾ä¸­çš„ç©ºç™½èŠ‚ç‚¹)</li> <li><code>firstElementChild</code>è¡¨ç¤ºè·å–å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­—å…ƒç´ èŠ‚ç‚¹ï¼Œä»¥æ­¤æ¥åŒºåˆ†æ˜¯ä¸æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯çš„è¯åˆ™è°ƒç”¨<code>compile</code>è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œå¦åˆ™ç”¨æ­£åˆ™åŒ¹é…</li> <li>è¿™é‡Œé¢çš„æ­£åˆ™çœŸçš„ä¸éš¾ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹</li></ul> <p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>MVVM<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>å§“å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>å¹´é¾„<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> opt <span class="token operator">=</span> <span class="token punctuation">{</span> el<span class="token operator">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"ç­‰å¾…ä¿®æ”¹..."</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        opt<span class="token punctuation">.</span>data<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"jing"</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>opt <span class="token operator">=</span> opt<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">observer</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">observer</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> obv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        data<span class="token punctuation">[</span><span class="token string">"_"</span> <span class="token operator">+</span> key<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>

        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Dep<span class="token punctuation">.</span>target <span class="token operator">&amp;&amp;</span> obv<span class="token punctuation">.</span><span class="token function">addSubNode</span><span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> data<span class="token punctuation">[</span><span class="token string">"_"</span> <span class="token operator">+</span> key<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            obv<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">[</span><span class="token string">"_"</span> <span class="token operator">+</span> key<span class="token punctuation">]</span> <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>child<span class="token punctuation">.</span>firstElementChild <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{\{(.*)\}\}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> key <span class="token operator">=</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          child<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> child<span class="token punctuation">.</span>innerHTML<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"\\{\\{\\s*"</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">"\\s*\\}\\}"</span><span class="token punctuation">,</span> <span class="token string">"gm"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>opt<span class="token punctuation">.</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
          Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> child<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>opt<span class="token punctuation">.</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
          Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>subNode <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">addSubNode</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>subNode<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>subNode<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        node<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ç¬¬34é¢˜-å®ç°ä¸€ä¸‹hashè·¯ç”±"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC34%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%8Bhash%E8%B7%AF%E7%94%B1" class="header-anchor">#</a> ç¬¬34é¢˜ å®ç°ä¸€ä¸‹hashè·¯ç”±</h2> <p>åŸºç¡€çš„htmlä»£ç ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">html, body</span> <span class="token punctuation">{</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">ul</span> <span class="token punctuation">{</span>
      <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.box</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#red<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>çº¢è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#green<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ç»¿è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#purple<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ç´«è‰²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç®€å•å®ç°ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> hash <span class="token operator">=</span> location<span class="token punctuation">.</span>hash
  window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> color <span class="token operator">=</span> hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> color
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å°è£…æˆä¸€ä¸ªclass:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> hash <span class="token operator">=</span> location<span class="token punctuation">.</span>hash
  <span class="token keyword">class</span> <span class="token class-name">HashRouter</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">hashStr<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>hashStr <span class="token operator">=</span> hashStr
      <span class="token keyword">this</span><span class="token punctuation">.</span>cb <span class="token operator">=</span> cb
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">watchHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>watch <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">watchHash</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>watch<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">watchHash</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> hash <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>hashStr <span class="token operator">=</span> hash
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cb</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">new</span> <span class="token class-name">HashRouter</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> color
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ç¬¬33é¢˜-å®ç°ä¸€ä¸ªå‘å¸ƒè®¢é˜…è€…æ¨¡å¼"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC33%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E8%80%85%E6%A8%A1%E5%BC%8F" class="header-anchor">#</a> ç¬¬33é¢˜ å®ç°ä¸€ä¸ªå‘å¸ƒè®¢é˜…è€…æ¨¡å¼</h2> <p><strong>ç®€ä»‹ï¼š</strong></p> <p>å‘å¸ƒè®¢é˜…è€…æ¨¡å¼ï¼Œä¸€ç§å¯¹è±¡é—´ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œä½†ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°çŠ¶æ€æ”¹å˜çš„é€šçŸ¥ã€‚</p> <p><strong>ä¸»è¦çš„ä½œç”¨(ä¼˜ç‚¹)ï¼š</strong></p> <ol><li>å¹¿æ³›åº”ç”¨äºå¼‚æ­¥ç¼–ç¨‹ä¸­(æ›¿ä»£äº†ä¼ é€’å›è°ƒå‡½æ•°)</li> <li>å¯¹è±¡ä¹‹é—´æ¾æ•£è€¦åˆçš„ç¼–å†™ä»£ç </li></ol> <p><strong>ç¼ºç‚¹ï¼š</strong></p> <ul><li>åˆ›å»ºè®¢é˜…è€…æœ¬èº«è¦æ¶ˆè€—ä¸€å®šçš„æ—¶é—´å’Œå†…å­˜</li> <li>å¤šä¸ªå‘å¸ƒè€…å’Œè®¢é˜…è€…åµŒå¥—ä¸€èµ·çš„æ—¶å€™ï¼Œç¨‹åºéš¾ä»¥è·Ÿè¸ªç»´æŠ¤</li></ul> <p><strong>å®ç°çš„æ€è·¯ï¼š</strong></p> <ul><li>åˆ›å»ºä¸€ä¸ªå¯¹è±¡(ç¼“å­˜åˆ—è¡¨)</li> <li>onæ–¹æ³•ç”¨æ¥æŠŠå›è°ƒå‡½æ•°fnéƒ½åŠ åˆ°ç¼“å­˜åˆ—è¡¨ä¸­</li> <li>emitæ–¹æ³•å–åˆ°argumentsé‡Œç¬¬ä¸€ä¸ªå½“åškeyï¼Œæ ¹æ®keyå€¼å»æ‰§è¡Œå¯¹åº”ç¼“å­˜åˆ—è¡¨ä¸­çš„å‡½æ•°</li> <li>removeæ–¹æ³•å¯ä»¥æ ¹æ®keyå€¼å–æ¶ˆè®¢é˜…</li></ul> <p><strong>codingï¼š</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token punctuation">{</span>
  list<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">on</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">emit</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">,</span>
      fns <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fns <span class="token operator">||</span> fns<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    fns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">remove</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> fns <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fns <span class="token operator">||</span> fns<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fns <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>fns<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      fns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cb <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          fns<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">cat</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å–µå–µå–µï½'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">dog</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ±ªæ±ªæ±ªï½'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">hasArgs</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'pet'</span><span class="token punctuation">,</span> hasArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'pet'</span><span class="token punctuation">,</span> cat<span class="token punctuation">)</span><span class="token punctuation">;</span>
event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'pet'</span><span class="token punctuation">,</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>

event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'pet'</span><span class="token punctuation">,</span> dog<span class="token punctuation">)</span>

event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'pet'</span><span class="token punctuation">,</span> <span class="token string">'æˆ‘æ˜¯ä¼ é€’çš„å‚æ•°'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç»“æœï¼š</span>
<span class="token comment">// 'æˆ‘æ˜¯ä¼ é€’çš„å‚æ•°'</span>
<span class="token comment">// 'å–µå–µå–µï½'</span>
</code></pre></div><p><strong>å·¥ä½œä¸­çš„åº”ç”¨ï¼š</strong></p> <ul><li>æ’å¹¿å‘Š</li> <li>æ‰“ç‚¹</li></ul> <h3 id="å‘å¸ƒè®¢é˜…è€…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E8%80%85%E6%A8%A1%E5%BC%8F%E5%92%8C%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB" class="header-anchor">#</a> å‘å¸ƒè®¢é˜…è€…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ</h3> <ul><li>å‘å¸ƒ/è®¢é˜…æ¨¡å¼æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§å˜å½¢ï¼Œä¸¤è€…åŒºåˆ«åœ¨äºï¼Œ<strong>å‘å¸ƒ/è®¢é˜…æ¨¡å¼åœ¨è§‚å¯Ÿè€…æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œåœ¨ç›®æ ‡å’Œè§‚å¯Ÿè€…ä¹‹é—´å¢åŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒã€‚</strong></li> <li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>æ˜¯ç”±å…·ä½“ç›®æ ‡è°ƒåº¦ï¼Œæ¯”å¦‚å½“äº‹ä»¶è§¦å‘ï¼ŒSubject å°±ä¼šå»è°ƒç”¨è§‚å¯Ÿè€…çš„æ–¹æ³•ï¼Œæ‰€ä»¥è§‚å¯Ÿè€…æ¨¡å¼çš„è®¢é˜…è€…ä¸å‘å¸ƒè€…ä¹‹é—´æ˜¯å­˜åœ¨ä¾èµ–çš„ã€‚</li> <li><strong>å‘å¸ƒ/è®¢é˜…æ¨¡å¼</strong>ç”±ç»Ÿä¸€è°ƒåº¦ä¸­å¿ƒè°ƒç”¨ï¼Œå› æ­¤å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸éœ€è¦çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ã€‚</li></ul> <h2 id="ç¬¬32é¢˜-å…³äºasync-awaitä»£ç æ‰§è¡Œé¡ºåº"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC32%E9%A2%98-%E5%85%B3%E4%BA%8Easync-await%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F" class="header-anchor">#</a> ç¬¬32é¢˜ å…³äºasync/awaitä»£ç æ‰§è¡Œé¡ºåº</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">wait</span> <span class="token punctuation">(</span><span class="token parameter">delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">r</span><span class="token punctuation">(</span><span class="token string">'execute'</span><span class="token punctuation">,</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'execute'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// async function series () { // 1</span>
<span class="token comment">//   await wait(500);</span>
<span class="token comment">//   await wait(500);</span>
<span class="token comment">//   console.log('done')</span>
<span class="token comment">// }</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">series</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 2</span>
  <span class="token keyword">const</span> wait1 <span class="token operator">=</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> wait2 <span class="token operator">=</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> wait1<span class="token punctuation">;</span>
  <span class="token keyword">await</span> wait2<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>ç¬¬ä¸€ä¸ª<code>series()</code>:</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1. 500mså</span>
<span class="token string">'execute'</span>
<span class="token comment">// 2. 500mså</span>
<span class="token string">'execute'</span> å’Œ <span class="token string">'done'</span> ä¸€èµ·æ‰“å°
</code></pre></div><ul><li>ç¬¬äºŒä¸ª<code>series</code>:</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 500msååŒæ—¶æ‰“å°å‡º</span>
<span class="token string">'execute'</span>
<span class="token string">'execute'</span>
<span class="token string">'done'</span>
</code></pre></div><h2 id="ç¬¬31é¢˜-å®ç°ä¸€ä¸ªpadstart-æˆ–padend-çš„polyfill"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC31%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AApadstart-%E6%88%96padend-%E7%9A%84polyfill" class="header-anchor">#</a> ç¬¬31é¢˜ å®ç°ä¸€ä¸ªpadStart()æˆ–padEnd()çš„polyfill</h2> <p><code>String.prototype.padStart</code> å’Œ <code>String.prototype.padEnd</code>æ˜¯<code>ES8</code>ä¸­æ–°å¢çš„æ–¹æ³•ï¼Œå…è®¸å°†ç©ºå­—ç¬¦ä¸²æˆ–å…¶ä»–å­—ç¬¦ä¸²æ·»åŠ åˆ°åŸå§‹å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸‹ä½¿ç”¨è¯­æ³•ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>String<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span>targetLength<span class="token punctuation">,</span><span class="token punctuation">[</span>padString<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ç”¨æ³•ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'abax'</span>
<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'xabab'</span>

<span class="token comment">// 1. è‹¥æ˜¯è¾“å…¥çš„ç›®æ ‡é•¿åº¦å°äºå­—ç¬¦ä¸²åŸæœ¬çš„é•¿åº¦åˆ™è¿”å›å­—ç¬¦ä¸²æœ¬èº«</span>
<span class="token string">'xxx'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'s'</span><span class="token punctuation">)</span> <span class="token comment">// 'xxx'</span>

<span class="token comment">// 2. ç¬¬äºŒä¸ªå‚æ•°çš„é»˜è®¤å€¼ä¸º " "ï¼Œé•¿åº¦æ˜¯ä¸º1çš„</span>
<span class="token comment">// 3. è€Œæ­¤å‚æ•°å¯èƒ½æ˜¯ä¸ªä¸ç¡®å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œè‹¥æ˜¯è¦å¡«å……çš„å†…å®¹è¾¾åˆ°äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™å°†ä¸è¦çš„éƒ¨åˆ†æˆªå–</span>
<span class="token string">'xxx'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'sss'</span><span class="token punctuation">)</span> <span class="token comment">// ssxxx</span>

<span class="token comment">// 4. å¯ç”¨æ¥å¤„ç†æ—¥æœŸã€é‡‘é¢æ ¼å¼åŒ–é—®é¢˜</span>
<span class="token string">'12'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span> <span class="token comment">// "YYYY-MM-12"</span>
<span class="token string">'09-12'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span> <span class="token comment">// "YYYY-09-12"</span>
</code></pre></div><p>polyfillå®ç°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myPadStart</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>targetLen<span class="token punctuation">,</span> padString <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>targetLen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥éœ€è¦å¡«å……åˆ°çš„é•¿åº¦'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> originStr <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–åˆ°è°ƒç”¨çš„å­—ç¬¦ä¸², å› ä¸ºthisåŸæœ¬æ˜¯String{}ï¼Œæ‰€ä»¥éœ€è¦ç”¨Stringè½¬ä¸ºå­—ç¬¦ä¸²</span>
  <span class="token keyword">let</span> originLen <span class="token operator">=</span> originStr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// è°ƒç”¨çš„å­—ç¬¦ä¸²åŸæœ¬çš„é•¿åº¦</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>originLen <span class="token operator">&gt;=</span> targetLen<span class="token punctuation">)</span> <span class="token keyword">return</span> originStr<span class="token punctuation">;</span> <span class="token comment">// è‹¥æ˜¯ åŸæœ¬ &gt; ç›®æ ‡ åˆ™è¿”å›åŸæœ¬å­—ç¬¦ä¸²</span>
  <span class="token keyword">let</span> diffNum <span class="token operator">=</span> targetLen <span class="token operator">-</span> originLen<span class="token punctuation">;</span> <span class="token comment">// 10 - 6 // å·®å€¼</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> diffNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// è¦æ·»åŠ å‡ ä¸ªæˆå‘˜</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> padString<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// è¾“å…¥çš„padStringçš„é•¿åº¦å¯èƒ½ä¸ä¸º1</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>originStr<span class="token punctuation">.</span>length <span class="token operator">===</span> targetLen<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// åˆ¤æ–­æ¯ä¸€æ¬¡æ·»åŠ ä¹‹åæ˜¯å¦åˆ°äº†ç›®æ ‡é•¿åº¦</span>
      originStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>padString<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>originStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>originStr<span class="token punctuation">.</span>length <span class="token operator">===</span> targetLen<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> originStr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">.</span><span class="token function">myPadStart</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè€Œ<code>padEnd</code>çš„å®ç°å’Œå®ƒä¸€æ ·ï¼Œåªéœ€è¦æŠŠç¬¬äºŒå±‚<code>for</code>å¾ªç¯é‡Œçš„<code>${padString[j]}${orignStr}</code>æ¢ä¸‹ä½ç½®å°±å¯ä»¥äº†ã€‚</p> <h2 id="ç¬¬30é¢˜-è®¾è®¡ä¸€ä¸ªæ–¹æ³•æå–å¯¹è±¡ä¸­æ‰€æœ‰valueå¤§äº2çš„é”®å€¼å¯¹å¹¶è¿”å›æœ€æ–°çš„å¯¹è±¡"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC30%E9%A2%98-%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E6%8F%90%E5%8F%96%E5%AF%B9%E8%B1%A1%E4%B8%AD%E6%89%80%E6%9C%89value%E5%A4%A7%E4%BA%8E2%E7%9A%84%E9%94%AE%E5%80%BC%E5%AF%B9%E5%B9%B6%E8%BF%94%E5%9B%9E%E6%9C%80%E6%96%B0%E7%9A%84%E5%AF%B9%E8%B1%A1" class="header-anchor">#</a> ç¬¬30é¢˜ è®¾è®¡ä¸€ä¸ªæ–¹æ³•æå–å¯¹è±¡ä¸­æ‰€æœ‰valueå¤§äº2çš„é”®å€¼å¯¹å¹¶è¿”å›æœ€æ–°çš„å¯¹è±¡</h2> <p>å®ç°ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// { b: 3, c: 4 }</span>
</code></pre></div><p>æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œæä¾›ä¸€ç§æ¯”è¾ƒç®€æ´çš„å†™æ³•ï¼Œç”¨åˆ°äº†<code>ES10</code>çš„<code>Object.fromEntries()</code>ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>
    Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// { b: 3, c: 4 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ES8ä¸­ Object.entries()çš„ä½œç”¨ï¼š</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> entries <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [['a', 1], ['b', 2]]</span>
<span class="token comment">// ES10ä¸­ Object.fromEntries()çš„ä½œç”¨ï¼š</span>
Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: 1, b: 2 }</span>
</code></pre></div><h2 id="ç¬¬29é¢˜-ç”¨ä¸€ä¸ªæ­£åˆ™æå–å­—ç¬¦ä¸²ä¸­æ‰€æœ‰-é‡Œå†…å®¹"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC29%E9%A2%98-%E7%94%A8%E4%B8%80%E4%B8%AA%E6%AD%A3%E5%88%99%E6%8F%90%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E6%89%80%E6%9C%89-%E9%87%8C%E5%86%85%E5%AE%B9" class="header-anchor">#</a> ç¬¬29é¢˜ ç”¨ä¸€ä¸ªæ­£åˆ™æå–å­—ç¬¦ä¸²ä¸­æ‰€æœ‰<code>""</code>é‡Œå†…å®¹</h2> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">// å¦‚æœåªæ˜¯ç®€å•çš„æ²¡æœ‰å¾ªç¯éå†çš„è¯ï¼Œå°±åªèƒ½æ‹¿åˆ°ä¸€ä¸ªï¼š</span>
 <span class="token keyword">function</span> <span class="token function">collectGroup</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> regExp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">"([^"]*)"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> match <span class="token operator">=</span> regExp<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [""foo"", "foo"]</span>
  <span class="token keyword">return</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// "foo"</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">"foo" and "bar" and "baz"</span><span class="token template-punctuation string">`</span></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">collectGroup</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "foo"</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šä½¿ç”¨whileå¾ªç¯éå†</span>
 <span class="token keyword">function</span> <span class="token function">collectGroup</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> regExp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">"([^"]*)"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> matches <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> match <span class="token operator">=</span> regExp<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>match <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    matches<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matches
<span class="token punctuation">}</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">"foo" and "bar" and "baz"</span><span class="token template-punctuation string">`</span></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">collectGroup</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç¬¬äºŒç§æ–¹æ¡ˆï¼šä½¿ç”¨ES10çš„matchAll()</span>
<span class="token keyword">function</span> <span class="token function">collectGroup</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> regExp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">"([^"]*)"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> matches <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> match <span class="token keyword">of</span> str<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>regExp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    matches<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matches
<span class="token punctuation">}</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">"foo" and "bar" and "baz"</span><span class="token template-punctuation string">`</span></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">collectGroup</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ç¬¬28é¢˜-å»é™¤å­—ç¬¦ä¸²é¦–ä½ç©ºæ ¼"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC28%E9%A2%98-%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%A6%96%E4%BD%8D%E7%A9%BA%E6%A0%BC" class="header-anchor">#</a> ç¬¬28é¢˜ å»é™¤å­—ç¬¦ä¸²é¦–ä½ç©ºæ ¼</h2> <p>ç¬¬ä¸€ç§ï¼šæ­£åˆ™åŒ¹é…é¦–ä½ç©ºæ ¼å¹¶å»é™¤ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">trim</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^\s+)|(\s+$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">'  11  '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// '11'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">'  1 1  '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// '1 1'</span>
</code></pre></div><p>ç¬¬äºŒç§ï¼šä½¿ç”¨<code>ES10</code>ä¸­çš„<code>trimStart</code>å’Œ<code>trimEnd</code>ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">trim</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">'  11  '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// '11'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">'  1 1  '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// '1 1'</span>
</code></pre></div><p>ç¬¬ä¸‰ç§ï¼šä½¿ç”¨<code>Vue</code>ä¸­çš„ä¿®é¥°ç¬¦<code>.trim</code>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msg<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><strong>è€ƒå¯ŸçŸ¥è¯†ç‚¹</strong>ï¼š</p> <ul><li>æ­£åˆ™çš„ç›¸å…³çŸ¥è¯†</li> <li>æ˜¯å¦çŸ¥é“<code>ES10</code>æ–°å‡ºçš„ä¸¤ä¸ªå»é™¤ç©ºç™½å­—ç¬¦çš„æ–¹æ³•</li> <li>æ˜¯å¦çŸ¥é“å®é™…è¿ç”¨ä¸­æœ‰ä»€ä¹ˆç®€ä¾¿çš„æ–¹æ³•(<code>react</code>ç”¨çš„ä¸æ˜¯å¾ˆå¤šï¼Œæœç´¢äº†ä¸€ä¸‹å¥½åƒä¹Ÿæ²¡æœ‰çœ‹åˆ°ç±»ä¼¼<code>Vue</code>çš„ä¿®é¥°ç¬¦ï¼Œç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯å°è£…ä¸€ä¸ªé«˜é˜¶ç»„ä»¶)</li></ul> <p><strong>æ³¨æ„ç‚¹</strong>ï¼š</p> <ul><li>æ­£åˆ™<code>^</code>å¦‚æœä¸æ˜¯æ”¾åœ¨<code>[]</code>é‡Œçš„è¯å°±æ˜¯è¡¨ç¤ºä»å¤´å¼€å§‹åŒ¹é…ï¼›</li> <li><code>\s</code>ç”¨äºåŒ¹é…ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼Œè€Œ<code>\S</code>ç”¨äºåŒ¹é…ä¸€ä¸ªéç©ºå­—ç¬¦</li> <li><code>+</code>è¡¨ç¤ºåŒ¹é…å‰é¢çš„æ¨¡å¼ <em>x</em> 1 æˆ–å¤šæ¬¡ã€‚ç­‰ä»·äº <code>{1,}</code>ã€‚</li> <li><code>$</code>åŒ¹é…ç»“å°¾</li></ul> <h2 id="ç¬¬27é¢˜-ç”¨æ­£åˆ™å†™ä¸€ä¸ªæ ¹æ®nameè·å–cookieä¸­çš„å€¼çš„æ–¹æ³•"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC27%E9%A2%98-%E7%94%A8%E6%AD%A3%E5%88%99%E5%86%99%E4%B8%80%E4%B8%AA%E6%A0%B9%E6%8D%AEname%E8%8E%B7%E5%8F%96cookie%E4%B8%AD%E7%9A%84%E5%80%BC%E7%9A%84%E6%96%B9%E6%B3%95" class="header-anchor">#</a> ç¬¬27é¢˜ ç”¨æ­£åˆ™å†™ä¸€ä¸ªæ ¹æ®nameè·å–cookieä¸­çš„å€¼çš„æ–¹æ³•</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> match <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'(^| )'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'=([^;]*)'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">unescape</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>è·å–é¡µé¢ä¸Šçš„<code>cookie</code>å¯ä»¥ä½¿ç”¨ <code>document.cookie</code></li></ol> <p>è¿™é‡Œè·å–åˆ°çš„æ˜¯ç±»ä¼¼äºè¿™æ ·çš„å­—ç¬¦ä¸²ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>'username=poetry; user-id=12345; user-roles=home, me, setting'
</code></pre></div><p><strong>å¯ä»¥çœ‹åˆ°è¿™ä¹ˆå‡ ä¸ªä¿¡æ¯ï¼š</strong></p> <ul><li>æ¯ä¸€ä¸ªcookieéƒ½æ˜¯ç”± <code>name=value</code> è¿™æ ·çš„å½¢å¼å­˜å‚¨çš„</li> <li>æ¯ä¸€é¡¹çš„å¼€å¤´å¯èƒ½æ˜¯ä¸€ä¸ªç©ºä¸²<code>''</code>(æ¯”å¦‚<code>username</code>çš„å¼€å¤´å…¶å®å°±æ˜¯), ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²<code>' '</code>ï¼ˆæ¯”å¦‚<code>user-id</code>çš„å¼€å¤´å°±æ˜¯ï¼‰</li> <li>æ¯ä¸€é¡¹ç”¨<code>";"</code>æ¥åŒºåˆ†</li> <li>å¦‚æœæŸé¡¹ä¸­æœ‰å¤šä¸ªå€¼çš„æ—¶å€™ï¼Œæ˜¯ç”¨<code>","</code>æ¥è¿æ¥çš„(æ¯”å¦‚<code>user-roles</code>çš„å€¼)</li> <li>æ¯ä¸€é¡¹çš„ç»“å°¾å¯èƒ½æ˜¯æœ‰<code>";"</code>çš„(æ¯”å¦‚<code>username</code>çš„ç»“å°¾)ï¼Œä¹Ÿå¯èƒ½æ˜¯æ²¡æœ‰çš„(æ¯”å¦‚<code>user-roles</code>çš„ç»“å°¾)</li></ul> <ol start="2"><li>æ‰€ä»¥æˆ‘ä»¬å°†è¿™é‡Œçš„æ­£åˆ™æ‹†åˆ†ä¸€ä¸‹ï¼š</li></ol> <ul><li><code>'(^| )'</code>è¡¨ç¤ºçš„å°±æ˜¯è·å–æ¯ä¸€é¡¹çš„å¼€å¤´ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“å¦‚æœ<code>^</code>ä¸æ˜¯æ”¾åœ¨<code>[]</code>é‡Œçš„è¯å°±æ˜¯è¡¨ç¤ºå¼€å¤´åŒ¹é…ã€‚æ‰€ä»¥è¿™é‡Œ<code>(^| )</code>çš„æ„æ€å…¶å®å°±è¢«æ‹†åˆ†ä¸º<code>(^)</code>è¡¨ç¤ºçš„åŒ¹é…<code>username</code>è¿™ç§æƒ…å†µï¼Œå®ƒå‰é¢ä»€ä¹ˆéƒ½æ²¡æœ‰æ˜¯ä¸€ä¸ªç©ºä¸²(ä½ å¯ä»¥æŠŠ<code>(^)</code>ç†è§£ä¸º<code>^</code>å®ƒåé¢è¿˜æœ‰ä¸€ä¸ªéšè—çš„<code>''</code>)ï¼›è€Œ<code>|</code>è¡¨ç¤ºçš„å°±æ˜¯æˆ–è€…æ˜¯ä¸€ä¸ª<code>" "</code>(ä¸ºäº†åŒ¹é…<code>user-id</code>å¼€å¤´çš„è¿™ç§æƒ…å†µ)</li> <li><code>+name+</code>è¿™æ²¡ä»€ä¹ˆå¥½è¯´çš„</li> <li><code>=([^;]*)</code>è¿™é‡ŒåŒ¹é…çš„å°±æ˜¯<code>=</code>åé¢çš„å€¼äº†ï¼Œæ¯”å¦‚<code>poetry</code>ï¼›åˆšåˆšè¯´äº†<code>^</code>è¦æ˜¯æ”¾åœ¨<code>[]</code>é‡Œçš„è¯å°±è¡¨ç¤º<code>"é™¤äº†^åé¢çš„å†…å®¹éƒ½èƒ½åŒ¹é…"</code>ï¼Œä¹Ÿå°±æ˜¯éçš„æ„æ€ã€‚æ‰€ä»¥è¿™é‡Œ<code>([^;]*)</code>è¡¨ç¤ºçš„æ˜¯é™¤äº†<code>";"</code>è¿™ä¸ªå­—ç¬¦ä¸²åˆ«çš„éƒ½åŒ¹é…(<code>*</code>åº”è¯¥éƒ½çŸ¥é“ä»€ä¹ˆæ„æ€å§ï¼ŒåŒ¹é…0æ¬¡æˆ–å¤šæ¬¡)</li> <li>æœ‰çš„å¤§ä½¬ç­‰å·åé¢æ˜¯è¿™æ ·å†™çš„<code>'=([^;]*)(;|$)'</code>ï¼Œè€Œæœ€åä¸ºä»€ä¹ˆå¯ä»¥æŠŠ<code>'(;|$)'</code>ç»™çœç•¥å‘¢ï¼Ÿå› ä¸ºå…¶å®æœ€åä¸€ä¸ª<code>cookie</code>é¡¹æ˜¯æ²¡æœ‰<code>';'</code>çš„ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åˆå¹¶åˆ°<code>=([^;]*)</code>è¿™ä¸€æ­¥ã€‚</li></ul> <ol start="3"><li>æœ€åè·å–åˆ°çš„<code>match</code>å…¶å®æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º4çš„æ•°ç»„ã€‚æ¯”å¦‚ï¼š</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span>
  <span class="token string">"username=poetry;"</span><span class="token punctuation">,</span>
  <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token string">"poetry"</span><span class="token punctuation">,</span>
  <span class="token string">";"</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>ç¬¬0é¡¹ï¼šå…¨é‡</li> <li>ç¬¬1é¡¹ï¼šå¼€å¤´</li> <li>ç¬¬2é¡¹ï¼šä¸­é—´çš„å€¼</li> <li>ç¬¬3é¡¹ï¼šç»“å°¾</li></ul> <p>æ‰€ä»¥æˆ‘ä»¬æ˜¯è¦æ‹¿ç¬¬2é¡¹<code>match[2]</code>çš„å€¼ã€‚</p> <ol start="4"><li>ä¸ºäº†é˜²æ­¢è·å–åˆ°çš„å€¼æ˜¯<code>%xxx</code>è¿™æ ·çš„å­—ç¬¦åºåˆ—ï¼Œéœ€è¦ç”¨<code>unescape()</code>æ–¹æ³•è§£ç ã€‚</li></ol> <h2 id="ç¬¬26é¢˜-å®ç°-arr-1-arr-arr-length-1"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC26%E9%A2%98-%E5%AE%9E%E7%8E%B0-arr-1-arr-arr-length-1" class="header-anchor">#</a> ç¬¬26é¢˜ å®ç° arr[-1] = arr[arr.length - 1]</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createArr</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>elements</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">get</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ ä¸ä¼ éƒ½å¯ä»¥</span>
      <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        index <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>length <span class="token operator">+</span> index<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> index<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  target<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>elements<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token function">createArr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
</code></pre></div><h2 id="ç¬¬25é¢˜-jsonpçš„åŸç†å¹¶ç”¨ä»£ç å®ç°"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC25%E9%A2%98-jsonp%E7%9A%84%E5%8E%9F%E7%90%86%E5%B9%B6%E7%94%A8%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0" class="header-anchor">#</a> ç¬¬25é¢˜ JSONPçš„åŸç†å¹¶ç”¨ä»£ç å®ç°</h2> <blockquote><p>åŸºæœ¬åŸç†ï¼šä¸»è¦å°±æ˜¯åˆ©ç”¨ <code>script</code> æ ‡ç­¾çš„<code>src</code>å±æ€§æ²¡æœ‰è·¨åŸŸçš„é™åˆ¶ï¼Œé€šè¿‡æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€ï¼Œç”±æœåŠ¡ç«¯è¿”å›ä¸€ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„ <code>Javascript</code> å‡½æ•°çš„è°ƒç”¨ï¼Œå¹¶ä¸”å°†æœåŠ¡å™¨æ•°æ®ä»¥è¯¥å‡½æ•°å‚æ•°çš„å½¢å¼ä¼ é€’è¿‡æ¥ï¼Œæ­¤æ–¹æ³•éœ€è¦å‰åç«¯é…åˆå®Œæˆã€‚</p></blockquote> <p>æ‰§è¡Œè¿‡ç¨‹ï¼š</p> <ul><li>å‰ç«¯å®šä¹‰ä¸€ä¸ªè§£æå‡½æ•°(å¦‚: <code>jsonpCallback = function (res) {}</code>)</li> <li>é€šè¿‡<code>params</code>çš„å½¢å¼åŒ…è£…<code>script</code>æ ‡ç­¾çš„è¯·æ±‚å‚æ•°ï¼Œå¹¶ä¸”å£°æ˜æ‰§è¡Œå‡½æ•°(å¦‚<code>cb=jsonpCallback</code>)</li> <li>åç«¯è·å–åˆ°å‰ç«¯å£°æ˜çš„æ‰§è¡Œå‡½æ•°(<code>jsonpCallback</code>)ï¼Œå¹¶ä»¥å¸¦ä¸Šå‚æ•°ä¸”è°ƒç”¨æ‰§è¡Œå‡½æ•°çš„æ–¹å¼ä¼ é€’ç»™å‰ç«¯</li> <li>å‰ç«¯åœ¨<code>script</code>æ ‡ç­¾è¿”å›èµ„æºçš„æ—¶å€™å°±ä¼šå»æ‰§è¡Œ<code>jsonpCallback</code>å¹¶é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼æ‹¿åˆ°æ•°æ®äº†ã€‚</li></ul> <p>ç¼ºç‚¹ï¼š</p> <ul><li>åªèƒ½è¿›è¡Œ<code>GET</code>è¯·æ±‚</li></ul> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>å…¼å®¹æ€§å¥½ï¼Œåœ¨ä¸€äº›å¤è€çš„æµè§ˆå™¨ä¸­éƒ½å¯ä»¥è¿è¡Œ</li></ul> <p>ä»£ç å®ç°ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token constant">JSONP</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token punctuation">,</span>
        params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        callbackKey <span class="token operator">=</span> <span class="token string">'cb'</span><span class="token punctuation">,</span>
        callback
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å®šä¹‰æœ¬åœ°çš„å”¯ä¸€callbackIdï¼Œè‹¥æ˜¯æ²¡æœ‰çš„è¯åˆ™åˆå§‹åŒ–ä¸º1</span>
        <span class="token constant">JSONP</span><span class="token punctuation">.</span>callbackId <span class="token operator">=</span> <span class="token constant">JSONP</span><span class="token punctuation">.</span>callbackId <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> callbackId <span class="token operator">=</span> <span class="token constant">JSONP</span><span class="token punctuation">.</span>callbackId<span class="token punctuation">;</span>
        <span class="token comment">// æŠŠè¦æ‰§è¡Œçš„å›è°ƒåŠ å…¥åˆ°JSONå¯¹è±¡ä¸­ï¼Œé¿å…æ±¡æŸ“window</span>
        <span class="token constant">JSONP</span><span class="token punctuation">.</span>callbacks <span class="token operator">=</span> <span class="token constant">JSONP</span><span class="token punctuation">.</span>callbacks <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token constant">JSONP</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>callbackId<span class="token punctuation">]</span> <span class="token operator">=</span> callback<span class="token punctuation">;</span>
        <span class="token comment">// æŠŠè¿™ä¸ªåç§°åŠ å…¥åˆ°å‚æ•°ä¸­: 'cb=JSONP.callbacks[1]'</span>
        params<span class="token punctuation">[</span>callbackKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">JSONP.callbacks[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callbackId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token comment">// å¾—åˆ°'id=1&amp;cb=JSONP.callbacks[1]'</span>
        <span class="token keyword">const</span> paramString <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span>
        <span class="token comment">// åˆ›å»º script æ ‡ç­¾</span>
        <span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>paramString<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// idè‡ªå¢ï¼Œä¿è¯å”¯ä¸€</span>
        <span class="token constant">JSONP</span><span class="token punctuation">.</span>callbackId<span class="token operator">++</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    <span class="token constant">JSONP</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'http://localhost:8080/api/jsonps'</span><span class="token punctuation">,</span>
        params<span class="token operator">:</span> <span class="token punctuation">{</span>
            a<span class="token operator">:</span> <span class="token string">'2&amp;b=3'</span><span class="token punctuation">,</span>
            b<span class="token operator">:</span> <span class="token string">'4'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        callbackKey<span class="token operator">:</span> <span class="token string">'cb'</span><span class="token punctuation">,</span>
        <span class="token function">callback</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token constant">JSONP</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">'http://localhost:8080/api/jsonp'</span><span class="token punctuation">,</span>
        params<span class="token operator">:</span> <span class="token punctuation">{</span>
            id<span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        callbackKey<span class="token operator">:</span> <span class="token string">'cb'</span><span class="token punctuation">,</span>
        <span class="token function">callback</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ç¬¬24é¢˜-å®ç°ä¸€ä¸ªæ‹–æ‹½"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC24%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%8B%96%E6%8B%BD" class="header-anchor">#</a> ç¬¬24é¢˜ å®ç°ä¸€ä¸ªæ‹–æ‹½</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">html, body</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">#box</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> oEvent <span class="token operator">=</span> ev <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span> <span class="token comment">// å…¼å®¹ç«ç‹,ç«ç‹ä¸‹æ²¡æœ‰window.event</span>
    <span class="token keyword">var</span> distanceX <span class="token operator">=</span> oEvent<span class="token punctuation">.</span>clientX <span class="token operator">-</span> box<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span> <span class="token comment">// é¼ æ ‡åˆ°å¯è§†åŒºå·¦è¾¹çš„è·ç¦» - boxåˆ°é¡µé¢å·¦è¾¹çš„è·ç¦»</span>
    <span class="token keyword">var</span> distanceY <span class="token operator">=</span> oEvent<span class="token punctuation">.</span>clientY <span class="token operator">-</span> box<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> oEvent <span class="token operator">=</span> ev <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
      <span class="token keyword">var</span> left <span class="token operator">=</span> oEvent<span class="token punctuation">.</span>clientX <span class="token operator">-</span> distanceX<span class="token punctuation">;</span>
      <span class="token keyword">var</span> top <span class="token operator">=</span> oEvent<span class="token punctuation">.</span>clientY <span class="token operator">-</span> distanceY<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&gt;=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> box<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        left <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth <span class="token operator">-</span> box<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">&gt;=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> box<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        top <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">-</span> box<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
      box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    box<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      box<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ç¬¬23é¢˜-é¡¹ç›®ä¸­ä½ åšè¿‡å“ªäº›ä¼˜åŒ–"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC23%E9%A2%98-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%A0%E5%81%9A%E8%BF%87%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96" class="header-anchor">#</a> ç¬¬23é¢˜ é¡¹ç›®ä¸­ä½ åšè¿‡å“ªäº›ä¼˜åŒ–</h2> <h3 id="åŠŸèƒ½ç‚¹çš„å®ç°ä¸Š"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%8A%9F%E8%83%BD%E7%82%B9%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8A" class="header-anchor">#</a> åŠŸèƒ½ç‚¹çš„å®ç°ä¸Š</h3> <ol><li>å¯¹åŠ¨æ€è¡¨å•ä¸‹æ‹‰æ¡†çš„å†…å®¹æŸ¥è¯¢æå‡ºå»ºè®®ã€‚åŸå…ˆè¯·æ±‚ä¸€ä¸ªåŠ¨æ€è¡¨å•çš„é¡µé¢ï¼Œåå°ä¼šä¸€æ¬¡æ€§æŠŠå¾ˆå¤šçš„ä¸‹æ‹‰åˆ—è¡¨éƒ½å¸¦å‡ºæ¥æ•°æ®é‡å¾ˆå¤§ã€‚åæˆ‘æå‡ºæ„è§ï¼Œç¬¬ä¸€æ¬¡è·å–çš„æ—¶å€™åå°å¯ä»¥åªè¿”å›å½“å‰é€‰é¡¹çš„é”®å€¼å¯¹ï¼Œå½“ç”¨æˆ·ç‚¹å‡»ä¸‹æ‹‰æ¡†çš„æ—¶å€™æˆ‘æ‰è·å–æ•°æ®ã€‚</li> <li>åˆ—è¡¨ä¸­å›¾ç‰‡æ‡’åŠ è½½ã€‚å› ä¸ºæˆ‘ä»¬é¡¹ç›®ä¸­ä¸è€ƒè™‘å…¼å®¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥å°±ç”¨äº†<code>img</code>æ ‡ç­¾çš„<code>loading="lazy"</code>å®ç°å›¾ç‰‡æ‡’åŠ è½½ï¼Œä½†æ˜¯å¦‚æœè¦è€ƒè™‘å…¼å®¹æ€§çš„è¯ï¼Œå¯èƒ½éœ€è¦ç”¨ç›‘å¬<code>window.scroll</code>ç„¶åé€šè¿‡è·å–è¦æ‡’åŠ è½½å›¾ç‰‡è·ç¦»å¯æ˜¯çª—å£é¡¶éƒ¨çš„è·ç¦»æ¥åˆ¤æ–­éœ€ä¸éœ€è¦åŠ è½½ã€‚</li></ol> <blockquote><p>ä¸€äº›éœ€è¦æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯å®æ—¶æŸ¥è¯¢çš„è¾“å…¥æ¡†ï¼Œéœ€è¦åšé˜²æŠ–å¤„ç†</p></blockquote> <h3 id="é¡¹ç›®çš„æ„å»ºä¸Š"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%84%E5%BB%BA%E4%B8%8A" class="header-anchor">#</a> é¡¹ç›®çš„æ„å»ºä¸Š</h3> <ul><li>å…ˆä½¿ç”¨<code>webpack-bundle-analyzer</code>åˆ†ææ‰“åŒ…åæ•´ä¸ªé¡¹ç›®ä¸­çš„ä½“ç§¯ç»“æ„ï¼Œæ—¢å¯ä»¥çœ‹åˆ°é¡¹ç›®ä¸­ç”¨åˆ°çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹åŒ…ï¼Œåˆèƒ½çœ‹åˆ°å„ä¸ªæ¨¡å—åœ¨æ•´ä¸ªé¡¹ç›®ä¸­çš„å æ¯”ã€‚</li> <li><code>Vue</code>è·¯ç”±æ‡’åŠ è½½ï¼Œä½¿ç”¨<code>() =&gt; import(xxx.vue)</code>å½¢å¼ï¼Œæ‰“åŒ…ä¼šæ ¹æ®è·¯ç”±è‡ªåŠ¨æ‹†åˆ†æ‰“åŒ…ã€‚</li> <li>ç¬¬ä¸‰æ–¹åº“æŒ‰éœ€åŠ è½½ï¼Œä¾‹å¦‚<code>lodash</code>åº“ã€<code>UI</code>ç»„ä»¶åº“</li> <li>ä½¿ç”¨<code>purgecss-webpack-plugin</code>å’Œ<code>glob</code>æ’ä»¶å»é™¤æ— ç”¨æ ·å¼(<code>glob</code>æ’ä»¶å¯ä»¥å¯ä»¥åŒæ­¥æŸ¥æ‰¾ç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶å¤¹ä¸‹çš„ä»»æ„æ–‡ä»¶)ï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">PurgecssWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// pathsè¡¨ç¤ºæŒ‡å®šè¦å»è§£æçš„æ–‡ä»¶åæ•°ç»„è·¯å¾„</span>
    <span class="token comment">// Purgecssä¼šå»è§£æè¿™äº›æ–‡ä»¶ç„¶åæŠŠæ— ç”¨çš„æ ·å¼ç§»é™¤</span>
    paths<span class="token operator">:</span> glob<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token string">'./src/**/*'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>nodir<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// glob.syncåŒæ­¥æŸ¥æ‰¾srcç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶å¤¹ä¸‹çš„ä»»æ„æ–‡ä»¶</span>
    <span class="token comment">// è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚['çœŸå®è·¯å¾„/src/css/style.css','çœŸå®è·¯å¾„/src/index.js',...]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>æ–‡ä»¶è§£æä¼˜åŒ–ï¼š</p> <ul><li><code>babel-loader</code>ç¼–è¯‘æ…¢ï¼Œå¯ä»¥é€šè¿‡é…ç½®<code>exclude</code>æ¥å»é™¤ä¸€äº›ä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶å¤¹ï¼Œè¿˜å¯ä»¥é€šè¿‡è®¾ç½®<code>cacheDirectory</code>å¼€å¯ç¼“å­˜ï¼Œè½¬è¯‘çš„ç»“æœä¼šè¢«ç¼“å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­</li> <li>æ–‡ä»¶è§£æä¼˜åŒ–ï¼šé€šè¿‡é…ç½®<code>resolve</code>é€‰é¡¹ä¸­çš„<code>alias</code>ã€‚<code>alias</code>åˆ›å»º<code>import</code>æˆ–è€…<code>require</code>çš„åˆ«åï¼ŒåŠ å¿«<code>webpack</code>æŸ¥æ‰¾é€Ÿåº¦ã€‚</li></ul></li> <li><p>ä½¿ç”¨<code>webpack</code>è‡ªå¸¦æ’ä»¶<code>IgnorePlugin</code>å¿½ç•¥<code>moment</code>ç›®å½•ä¸‹çš„<code>locale</code>æ–‡ä»¶å¤¹ä½¿æ‰“åŒ…åä½“ç§¯å‡å°‘<code>278k</code></p> <ul><li>é—®é¢˜åŸå› ï¼šä½¿ç”¨<code>moment</code>æ—¶å‘ç°ä¼šæŠŠæ•´ä¸ª<code>locale</code>è¯­è¨€åŒ…éƒ½æ‰“åŒ…è¿›å»å¯¼è‡´æ‰“åŒ…ä½“ç§¯è¿‡å¤§ï¼Œä½†æ˜¯æˆ‘ä»¬åªéœ€è¦ç”¨åˆ°ä¸­æ–‡åŒ…</li> <li>åœ¨<code>webpack</code>é…ç½®ä¸­ä½¿ç”¨<code>webpack</code>è‡ªå¸¦çš„æ’ä»¶<code>IgnorePlugin</code>å¿½ç•¥<code>moment</code>ç›®å½•ä¸‹çš„<code>locale</code>æ–‡ä»¶å¤¹</li> <li>ä¹‹ååœ¨é¡¹ç›®ä¸­å¼•å…¥ï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token comment">// åˆ©ç”¨IgnorePluginæŠŠåªéœ€è¦çš„è¯­è¨€åŒ…å¯¼å…¥ä½¿ç”¨å°±å¯ä»¥äº†ï¼Œçœå»äº†ä¸€ä¸‹å­æ‰“åŒ…æ•´ä¸ªè¯­è¨€åŒ…</span>
<span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">'moment'</span><span class="token punctuation">;</span>
<span class="token comment">// å•ç‹¬å¯¼å…¥ä¸­æ–‡è¯­è¨€åŒ…</span>
<span class="token keyword">import</span> <span class="token string">'moment/locale/zh-cn'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>ä½¿ç”¨<code>splitChunks</code>è¿›è¡Œæ‹†åŒ…ï¼ŒæŠ½ç¦»å…¬å…±æ¨¡å—ï¼Œä¸€äº›å¸¸ç”¨é…ç½®é¡¹ï¼š</p></li> <li><p><code>chunks</code>:è¡¨ç¤ºé€‰æ‹©å“ªäº› <code>chunks</code> è¿›è¡Œåˆ†å‰²ï¼Œå¯é€‰å€¼æœ‰ï¼š<code>asyncï¼Œinitialå’Œall</code></p> <ul><li><code>minSize</code>: è¡¨ç¤ºæ–°åˆ†ç¦»å‡ºçš„<code>chunk</code>å¿…é¡»å¤§äºç­‰äº<code>minSize</code>ï¼Œé»˜è®¤ä¸º30000ï¼Œçº¦30kb</li> <li><code>minChunks</code>: è¡¨ç¤ºä¸€ä¸ªæ¨¡å—è‡³å°‘åº”è¢«minChunksä¸ªchunkæ‰€åŒ…å«æ‰èƒ½åˆ†å‰²ï¼Œé»˜è®¤ä¸º1</li> <li><code>name</code>: è®¾ç½®<code>chunk</code>çš„æ–‡ä»¶å</li> <li><code>cacheGroups</code>: å¯ä»¥é…ç½®å¤šä¸ªç»„ï¼Œæ¯ä¸ªç»„æ ¹æ®testè®¾ç½®æ¡ä»¶ï¼Œç¬¦åˆtestæ¡ä»¶çš„æ¨¡å—ï¼Œå°±åˆ†é…åˆ°è¯¥ç»„ã€‚æ¨¡å—å¯ä»¥è¢«å¤šä¸ªç»„å¼•ç”¨ï¼Œä½†æœ€ç»ˆä¼šæ ¹æ®priorityæ¥å†³å®šæ‰“åŒ…åˆ°å“ªä¸ªç»„ä¸­ã€‚é»˜è®¤å°†æ‰€æœ‰æ¥è‡ª node_modulesç›®å½•çš„æ¨¡å—æ‰“åŒ…è‡³vendorsç»„ï¼Œå°†ä¸¤ä¸ªä»¥ä¸Šçš„chunkæ‰€å…±äº«çš„æ¨¡å—æ‰“åŒ…è‡³defaultç»„ã€‚</li></ul></li> <li><p><code>DllPlugin</code>åŠ¨æ€é“¾æ¥åº“ï¼Œå°†ç¬¬ä¸‰æ–¹åº“çš„ä»£ç å’Œä¸šåŠ¡ä»£ç æŠ½ç¦»ï¼š</p> <ul><li>æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>webpack.dll.js</code>æ–‡ä»¶ç”¨æ¥æ‰“åŒ…å‡º<code>dll</code>æ–‡ä»¶ã€‚å¹¶åœ¨<code>package.json</code>ä¸­é…ç½®<code>dll</code>æŒ‡ä»¤ç”Ÿæˆ<code>dll</code>æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å°±ä¼šæœ‰<code>manifest.json</code>ä»¥åŠç”Ÿæˆçš„<code>xxx.dll.js</code>æ–‡ä»¶</li> <li>å°†æ‰“åŒ…çš„<code>dll</code>é€šè¿‡<code>add-asset-html-webpack-plugin</code>æ·»åŠ åˆ°<code>html</code>ä¸­ï¼Œå†é€šè¿‡<code>DllReferencePlugin</code>æŠŠ<code>dll</code>å¼•ç”¨åˆ°éœ€è¦ç¼–è¯‘çš„ä¾èµ–ã€‚</li></ul></li> <li><p>åœ¨<code>ngnix</code>ä¸Šå¼€å¯<code>gzip</code>å‹ç¼©ã€‚</p></li></ul> <h3 id="ç½‘ç»œç¼“å­˜ä¸Š"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%BD%91%E7%BB%9C%E7%BC%93%E5%AD%98%E4%B8%8A" class="header-anchor">#</a> ç½‘ç»œç¼“å­˜ä¸Š</h3> <ul><li>å¯¹äºä¸€äº›æ²¡æœ‰æŒ‡çº¹ä¿¡æ¯çš„èµ„æºï¼Œä¾‹å¦‚<code>index.html</code>å¯ä»¥ä½¿ç”¨<code>Cache-Control: no-cache</code>å¼€å¯åå•†ç¼“å­˜</li> <li>å¯¹äºå¸¦æœ‰æŒ‡çº¹ä¿¡æ¯çš„èµ„æºï¼Œä¸€èˆ¬ä¼šä½¿ç”¨<code>splitChunksPlugin</code>è¿›è¡Œä»£ç åˆ†å‰²ï¼Œæ¥ä¿è¯é€ æˆæœ€å°èŒƒå›´çš„ç¼“å­˜å¤±æ•ˆï¼Œå†è®¾ç½®<code>Cache-Control: max-age=3153600</code></li></ul> <h2 id="ç¬¬22é¢˜-æ‰‹å†™promiseæœ€ç®€20è¡Œç‰ˆæœ¬-å®ç°å¼‚æ­¥é“¾å¼è°ƒç”¨"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC22%E9%A2%98-%E6%89%8B%E5%86%99promise%E6%9C%80%E7%AE%8020%E8%A1%8C%E7%89%88%E6%9C%AC-%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8" class="header-anchor">#</a> ç¬¬22é¢˜ æ‰‹å†™Promiseæœ€ç®€20è¡Œç‰ˆæœ¬ï¼Œå®ç°å¼‚æ­¥é“¾å¼è°ƒç”¨</h2> <h3 id="å®ç°ä»£ç "><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81" class="header-anchor">#</a> å®ç°ä»£ç </h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cbs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> value<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cbs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onResolved</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">onResolved</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="æ ¸å¿ƒæ¡ˆä¾‹"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%A0%B8%E5%BF%83%E6%A1%88%E4%BE%8B" class="header-anchor">#</a> æ ¸å¿ƒæ¡ˆä¾‹</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æœ¬æ–‡å°†å›´ç»•è¿™ä¸ªæœ€æ ¸å¿ƒçš„æ¡ˆä¾‹æ¥è®²ï¼Œè¿™æ®µä»£ç çš„è¡¨ç°å¦‚ä¸‹ï¼š</p> <ul><li>500ms åè¾“å‡º 1</li> <li>500ms åè¾“å‡º 2</li></ul> <h3 id="æ„é€ å‡½æ•°"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0" class="header-anchor">#</a> æ„é€ å‡½æ•°</h3> <p>é¦–å…ˆæ¥å®ç° <code>Promise</code> æ„é€ å‡½æ•°</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Promise resolveæ—¶çš„å›è°ƒå‡½æ•°é›†</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cbs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// ä¼ é€’ç»™Promiseå¤„ç†å‡½æ•°çš„resolve</span>
  <span class="token comment">// è¿™é‡Œç›´æ¥å¾€å®ä¾‹ä¸ŠæŒ‚ä¸ªdata</span>
  <span class="token comment">// ç„¶åæŠŠonResolvedCallbackæ•°ç»„é‡Œçš„å‡½æ•°ä¾æ¬¡æ‰§è¡Œä¸€éå°±å¯ä»¥</span>
  <span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ³¨æ„promiseçš„thenå‡½æ•°éœ€è¦å¼‚æ­¥æ‰§è¡Œ</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> value<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cbs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ‰§è¡Œç”¨æˆ·ä¼ å…¥çš„å‡½æ•° </span>
  <span class="token comment">// å¹¶ä¸”æŠŠresolveæ–¹æ³•äº¤ç»™ç”¨æˆ·æ‰§è¡Œ</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¥½ï¼Œå†™åˆ°è¿™é‡Œå…ˆå›è¿‡å¤´æ¥çœ‹æ¡ˆä¾‹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>åˆ†å¼€æ¥çœ‹ï¼Œfn å°±æ˜¯ç”¨æˆ·ä¼ çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å†…éƒ¨è°ƒç”¨äº† <code>resolve</code> å‡½æ•°åï¼Œå°±ä¼šæŠŠ <code>promise</code> å®ä¾‹ä¸Šçš„ cbs å…¨éƒ¨æ‰§è¡Œä¸€éã€‚</p></blockquote> <p>åˆ°æ­¤ä¸ºæ­¢æˆ‘ä»¬è¿˜ä¸çŸ¥é“ cbs è¿™ä¸ªæ•°ç»„é‡Œçš„å‡½æ•°æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œæ¥ç€å¾€ä¸‹çœ‹ã€‚</p> <h3 id="then"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#then" class="header-anchor">#</a> then</h3> <p>è¿™é‡Œæ˜¯æœ€é‡è¦çš„ <code>then</code> å®ç°ï¼Œé“¾å¼è°ƒç”¨å…¨é å®ƒï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onResolved</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿™é‡Œå«åšpromise2</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">onResolved</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// resolveçš„æƒåŠ›è¢«äº¤ç»™äº†user promise</span>
        res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœæ˜¯æ™®é€šå€¼ å°±ç›´æ¥resolve</span>
        <span class="token comment">// ä¾æ¬¡æ‰§è¡Œcbsé‡Œçš„å‡½æ•° å¹¶ä¸”æŠŠå€¼ä¼ é€’ç»™cbs</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å†å›åˆ°æ¡ˆä¾‹é‡Œ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>

promise1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// user promise</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>æ³¨æ„è¿™é‡Œçš„å‘½å</strong>ï¼š</p> <ul><li>æˆ‘ä»¬æŠŠ <code>new Promise</code> è¿”å›çš„å®ä¾‹å«åš<code>promise1</code></li> <li>åœ¨ <code>Promise.prototype.then</code> çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬æ„é€ äº†ä¸€ä¸ªæ–°çš„ promise è¿”å›ï¼Œå«å®ƒ<code>promise2</code></li> <li>åœ¨ç”¨æˆ·è°ƒç”¨ then æ–¹æ³•çš„æ—¶å€™ï¼Œç”¨æˆ·æ‰‹åŠ¨æ„é€ äº†ä¸€ä¸ª <code>promise</code> å¹¶ä¸”è¿”å›ï¼Œç”¨æ¥åšå¼‚æ­¥çš„æ“ä½œï¼Œå«å®ƒ<code>user promise</code></li> <li>é‚£ä¹ˆåœ¨ <code>then</code> çš„å®ç°ä¸­ï¼Œå†…éƒ¨çš„ <code>this</code> å…¶å®å°±æŒ‡å‘<code>promise1</code></li> <li>è€Œ<code>promise2</code>çš„ä¼ å…¥çš„<code>fn</code> å‡½æ•°æ‰§è¡Œäº†ä¸€ä¸ª <code>this.cbs.push()</code>ï¼Œå…¶å®æ˜¯å¾€ <code>promise1</code> çš„<code>cbs</code>æ•°ç»„ä¸­ <code>push</code>äº†ä¸€ä¸ªå‡½æ•°ï¼Œç­‰å¾…åç»­æ‰§è¡Œ</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onResolved</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿™é‡Œå«åšpromise2</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œçš„thiså…¶å®æ˜¯promise1</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>é‚£ä¹ˆé‡ç‚¹çœ‹è¿™ä¸ª <code>push</code> çš„å‡½æ•°ï¼Œæ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°åœ¨ <code>promise1</code>è¢« <code>resolve</code> äº†ä»¥åæ‰ä¼šæ‰§è¡Œã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// promise2</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// onResolvedå°±å¯¹åº”thenä¼ å…¥çš„å‡½æ•°</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">onResolved</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token comment">// ä¾‹å­ä¸­çš„æƒ…å†µ ç”¨æˆ·è‡ªå·±è¿”å›äº†ä¸€ä¸ªuser promise</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// user promiseçš„æƒ…å†µ</span>
      <span class="token comment">// ç”¨æˆ·ä¼šè‡ªå·±å†³å®šä½•æ—¶resolve promise2</span>
      <span class="token comment">// åªæœ‰promise2è¢«resolveä»¥å</span>
      <span class="token comment">// thenä¸‹é¢çš„é“¾å¼è°ƒç”¨å‡½æ•°æ‰ä¼šç»§ç»­æ‰§è¡Œ</span>
      res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>å¦‚æœç”¨æˆ·ä¼ å…¥ç»™ then çš„ <code>onResolved</code> æ–¹æ³•è¿”å›çš„æ˜¯ä¸ª <code>user promise</code>ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>user promise</code>é‡Œç”¨æˆ·ä¼šè‡ªå·±å»åœ¨åˆé€‚çš„æ—¶æœº <code>resolve promise2</code>ï¼Œé‚£ä¹ˆè¿›è€Œè¿™é‡Œçš„ <code>res.then(resolve)</code> ä¸­çš„ <code>resolve</code> å°±ä¼šè¢«æ‰§è¡Œï¼š</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç»“åˆä¸‹é¢è¿™ä¸ªä¾‹å­æ¥çœ‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// resolve1</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// then1</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// user promise</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// resolve2</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// then2</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>then1</code>è¿™ä¸€æ•´å—å…¶å®è¿”å›çš„æ˜¯ <code>promise2</code>ï¼Œé‚£ä¹ˆ <code>then2</code> å…¶å®æœ¬è´¨ä¸Šæ˜¯ <code>promise2.then(console.log)</code>ï¼Œ</li> <li>ä¹Ÿå°±æ˜¯è¯´ <code>then2</code>æ³¨å†Œçš„å›è°ƒå‡½æ•°ï¼Œå…¶å®è¿›å…¥äº†<code>promise2</code>çš„ cbs å›è°ƒæ•°ç»„é‡Œï¼Œåˆå› ä¸ºæˆ‘ä»¬åˆšåˆšçŸ¥é“ï¼Œ<code>resolve2</code> è°ƒç”¨äº†ä¹‹åï¼Œ<code>user promise</code> ä¼šè¢« <code>resolve</code>ï¼Œè¿›è€Œè§¦å‘ <code>promise2</code> è¢« <code>resolve</code>ï¼Œè¿›è€Œ <code>promise2</code> é‡Œçš„ <code>cbs</code> æ•°ç»„è¢«ä¾æ¬¡è§¦å‘</li> <li>è¿™æ ·å°±å®ç°äº†ç”¨æˆ·è‡ªå·±å†™çš„ <code>resolve2</code> æ‰§è¡Œå®Œæ¯•åï¼Œ<code>then2</code> é‡Œçš„é€»è¾‘æ‰ä¼šç»§ç»­æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å¼‚æ­¥é“¾å¼è°ƒç”¨</li></ul> <blockquote><p>ç®€å•å®ç°ä¸€ä¸ªå¯ä»¥å¼‚æ­¥é“¾å¼è°ƒç”¨çš„ <code>promise</code>ï¼Œè€ŒçœŸæ­£çš„ <code>promise</code> æ¯”å®ƒå¤æ‚å¾ˆå¤šå¾ˆå¤šï¼Œæ¶‰åŠåˆ°å„ç§å¼‚å¸¸æƒ…å†µã€è¾¹ç•Œæƒ…å†µçš„å¤„ç†ã€‚</p></blockquote> <p><code>promise A+</code>è§„èŒƒè¿˜æ˜¯å€¼å¾—æ¯ä¸€ä¸ªåˆæ ¼çš„å‰ç«¯å¼€å‘å»é˜…è¯»çš„</p> <h3 id="å…¶ä»–ç‰ˆæœ¬å®ç°"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%85%B6%E4%BB%96%E7%89%88%E6%9C%AC%E5%AE%9E%E7%8E%B0" class="header-anchor">#</a> å…¶ä»–ç‰ˆæœ¬å®ç°</h3> <p>ç®€æ˜“ç‰ˆçš„Promiseï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">PENDING</span> <span class="token operator">=</span> <span class="token string">'pending'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">RESOLVED</span> <span class="token operator">=</span> <span class="token string">'resolved'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">REJECTED</span> <span class="token operator">=</span> <span class="token string">'rejected'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">MyPromise</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  that<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">PENDING</span><span class="token punctuation">;</span>
  that<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  that<span class="token punctuation">.</span>resolvedCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  that<span class="token punctuation">.</span>rejectedCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">resolve</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      that<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">RESOLVED</span><span class="token punctuation">;</span>
      that<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
      that<span class="token punctuation">.</span>resolvedCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">cb</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">reject</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      that<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">REJECTED</span><span class="token punctuation">;</span>
      that<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
      that<span class="token punctuation">.</span>rejectedCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">cb</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">MyPromise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  onFulfilled <span class="token operator">=</span> <span class="token keyword">typeof</span> onFulfilled <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function-variable function">onFulfilled</span> <span class="token operator">:</span> <span class="token parameter">v</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">;</span>
  onRejected <span class="token operator">=</span> <span class="token keyword">typeof</span> onRejected <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> <span class="token function-variable function">onRejected</span> <span class="token operator">:</span> <span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> r <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    that<span class="token punctuation">.</span>resolvedCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>onFulfilled<span class="token punctuation">)</span><span class="token punctuation">;</span>
    that<span class="token punctuation">.</span>rejectedCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">RESOLVED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">onFulfilled</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>that<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">REJECTED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">onRejected</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘ç«‹å³æ‰§è¡Œ'</span><span class="token punctuation">)</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ç¬¬21é¢˜-å®ç°ä¸€ä¸ªè¿·ä½ ç‰ˆçš„vue"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC21%E9%A2%98-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%BF%B7%E4%BD%A0%E7%89%88%E7%9A%84vue" class="header-anchor">#</a> ç¬¬21é¢˜ å®ç°ä¸€ä¸ªè¿·ä½ ç‰ˆçš„vue</h2> <h3 id="å…¥å£"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%85%A5%E5%8F%A3" class="header-anchor">#</a> å…¥å£</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// js/vue.js</span>
<span class="token keyword">class</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. é€šè¿‡å±æ€§ä¿å­˜é€‰é¡¹çš„æ•°æ®</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$options <span class="token operator">=</span> options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$data <span class="token operator">=</span> options<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$el <span class="token operator">=</span> <span class="token keyword">typeof</span> options<span class="token punctuation">.</span>el <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">?</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>el<span class="token punctuation">)</span> <span class="token operator">:</span> options<span class="token punctuation">.</span>el
    <span class="token comment">// 2. æŠŠdataä¸­çš„æˆå‘˜è½¬æ¢æˆgetterå’Œsetterï¼Œæ³¨å…¥åˆ°vueå®ä¾‹ä¸­</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_proxyData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>
    <span class="token comment">// 3. è°ƒç”¨observerå¯¹è±¡ï¼Œç›‘å¬æ•°æ®çš„å˜åŒ–</span>
    <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span>
    <span class="token comment">// 4. è°ƒç”¨compilerå¯¹è±¡ï¼Œè§£ææŒ‡ä»¤å’Œå·®å€¼è¡¨è¾¾å¼</span>
    <span class="token keyword">new</span> <span class="token class-name">Compiler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">_proxyData</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// éå†dataä¸­çš„æ‰€æœ‰å±æ€§</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// æŠŠdataçš„å±æ€§æ³¨å…¥åˆ°vueå®ä¾‹ä¸­</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">===</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span>
          <span class="token punctuation">}</span>
          data<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newValue
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å®ç°dep"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0dep" class="header-anchor">#</a> å®ç°Dep</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å­˜å‚¨æ‰€æœ‰çš„è§‚å¯Ÿè€…</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// æ·»åŠ è§‚å¯Ÿè€…</span>
  <span class="token function">addSub</span> <span class="token punctuation">(</span><span class="token parameter">sub</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sub <span class="token operator">&amp;&amp;</span> sub<span class="token punctuation">.</span>update<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å‘é€é€šçŸ¥</span>
  <span class="token function">notify</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">sub</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      sub<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å®ç°watcher"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0watcher" class="header-anchor">#</a> å®ç°watcher</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>vm <span class="token operator">=</span> vm
    <span class="token comment">// dataä¸­çš„å±æ€§åç§°</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key
    <span class="token comment">// å›è°ƒå‡½æ•°è´Ÿè´£æ›´æ–°è§†å›¾</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cb <span class="token operator">=</span> cb

    <span class="token comment">// æŠŠwatcherå¯¹è±¡è®°å½•åˆ°Depç±»çš„é™æ€å±æ€§target</span>
    Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token comment">// è§¦å‘getæ–¹æ³•ï¼Œåœ¨getæ–¹æ³•ä¸­ä¼šè°ƒç”¨addSub</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>oldValue <span class="token operator">=</span> vm<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ›´æ–°è§†å›¾</span>
  <span class="token function">update</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>oldValue <span class="token operator">===</span> newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cb</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å®ç°compiler"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0compiler" class="header-anchor">#</a> å®ç°compiler</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Compiler</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">vm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>el <span class="token operator">=</span> vm<span class="token punctuation">.</span>$el
    <span class="token keyword">this</span><span class="token punctuation">.</span>vm <span class="token operator">=</span> vm
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ç¼–è¯‘æ¨¡æ¿ï¼Œå¤„ç†æ–‡æœ¬èŠ‚ç‚¹å’Œå…ƒç´ èŠ‚ç‚¹</span>
  <span class="token function">compile</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> childNodes <span class="token operator">=</span> el<span class="token punctuation">.</span>childNodes
    Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isTextNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compileText</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isElementNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¤„ç†å…ƒç´ èŠ‚ç‚¹</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compileElement</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// åˆ¤æ–­nodeèŠ‚ç‚¹ï¼Œæ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å­èŠ‚ç‚¹ï¼Œè¦é€’å½’è°ƒç”¨compile</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ç¼–è¯‘å…ƒç´ èŠ‚ç‚¹ï¼Œå¤„ç†æŒ‡ä»¤</span>
  <span class="token function">compileElement</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(node.attributes)</span>
    <span class="token comment">// éå†æ‰€æœ‰çš„å±æ€§èŠ‚ç‚¹</span>
    Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>attributes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">attr</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æŒ‡ä»¤</span>
      <span class="token keyword">let</span> attrName <span class="token operator">=</span> attr<span class="token punctuation">.</span>name
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isDirective</span><span class="token punctuation">(</span>attrName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// v-text --&gt; text</span>
        attrName <span class="token operator">=</span> attrName<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> key <span class="token operator">=</span> attr<span class="token punctuation">.</span>value
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> key<span class="token punctuation">,</span> attrName<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">update</span> <span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> key<span class="token punctuation">,</span> attrName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> updateFn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>attrName <span class="token operator">+</span> <span class="token string">'Updater'</span><span class="token punctuation">]</span>
    updateFn <span class="token operator">&amp;&amp;</span> <span class="token function">updateFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> node<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å¤„ç† v-text æŒ‡ä»¤</span>
  <span class="token function">textUpdater</span> <span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> value
    <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> newValue
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// v-model</span>
  <span class="token function">modelUpdater</span> <span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    node<span class="token punctuation">.</span>value <span class="token operator">=</span> value
    <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      node<span class="token punctuation">.</span>value <span class="token operator">=</span> newValue
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// åŒå‘ç»‘å®š</span>
    node<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ç¼–è¯‘æ–‡æœ¬èŠ‚ç‚¹ï¼Œå¤„ç†å·®å€¼è¡¨è¾¾å¼</span>
  <span class="token function">compileText</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.dir(node)</span>
    <span class="token comment">// {{  msg }}</span>
    <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{\{(.+?)\}\}</span><span class="token regex-delimiter">/</span></span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> node<span class="token punctuation">.</span>textContent
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> key <span class="token operator">=</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>

      <span class="token comment">// åˆ›å»ºwatcherå¯¹è±¡ï¼Œå½“æ•°æ®æ”¹å˜æ›´æ–°è§†å›¾</span>
      <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> newValue
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// åˆ¤æ–­å…ƒç´ å±æ€§æ˜¯å¦æ˜¯æŒ‡ä»¤</span>
  <span class="token function">isDirective</span> <span class="token punctuation">(</span><span class="token parameter">attrName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> attrName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'v-'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦æ˜¯æ–‡æœ¬èŠ‚ç‚¹</span>
  <span class="token function">isTextNode</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦æ˜¯å…ƒç´ èŠ‚ç‚¹</span>
  <span class="token function">isElementNode</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å®ç°observer"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E5%AE%9E%E7%8E%B0observer" class="header-anchor">#</a> å®ç°Observer</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">walk</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">walk</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. åˆ¤æ–­dataæ˜¯å¦æ˜¯å¯¹è±¡</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data <span class="token operator">||</span> <span class="token keyword">typeof</span> data <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2. éå†dataå¯¹è±¡çš„æ‰€æœ‰å±æ€§</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">defineReactive</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">defineReactive</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token comment">// è´Ÿè´£æ”¶é›†ä¾èµ–ï¼Œå¹¶å‘é€é€šçŸ¥</span>
    <span class="token keyword">let</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// å¦‚æœvalæ˜¯å¯¹è±¡ï¼ŒæŠŠvalå†…éƒ¨çš„å±æ€§è½¬æ¢æˆå“åº”å¼æ•°æ®</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">walk</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ”¶é›†ä¾èµ–</span>
        Dep<span class="token punctuation">.</span>target <span class="token operator">&amp;&amp;</span> dep<span class="token punctuation">.</span><span class="token function">addSub</span><span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
        <span class="token keyword">return</span> val
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        val <span class="token operator">=</span> newValue
        that<span class="token punctuation">.</span><span class="token function">walk</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span>
        <span class="token comment">// å‘é€é€šçŸ¥</span>
        dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä½¿ç”¨"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E4%BD%BF%E7%94%A8" class="header-anchor">#</a> ä½¿ç”¨</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cn<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Mini Vue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>å·®å€¼è¡¨è¾¾å¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>v-text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msg<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>v-model<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msg<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>count<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./js/dep.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./js/watcher.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./js/compiler.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./js/observer.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./js/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
      data<span class="token operator">:</span> <span class="token punctuation">{</span>
        msg<span class="token operator">:</span> <span class="token string">'Hello Vue'</span><span class="token punctuation">,</span>
        count<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        person<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'zs'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
    <span class="token comment">// vm.msg = { test: 'Hello' }</span>
    vm<span class="token punctuation">.</span>test <span class="token operator">=</span> <span class="token string">'abc'</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ç¬¬20é¢˜-åŸºäºpromise-allå®ç°ajaxçš„ä¸²è¡Œå’Œå¹¶è¡Œ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC20%E9%A2%98-%E5%9F%BA%E4%BA%8Epromise-all%E5%AE%9E%E7%8E%B0ajax%E7%9A%84%E4%B8%B2%E8%A1%8C%E5%92%8C%E5%B9%B6%E8%A1%8C" class="header-anchor">#</a> ç¬¬20é¢˜ åŸºäºPromise.allå®ç°Ajaxçš„ä¸²è¡Œå’Œå¹¶è¡Œ</h2> <blockquote><p>åŸºäºPromise.allå®ç°Ajaxçš„ä¸²è¡Œå’Œå¹¶è¡Œ</p></blockquote> <ul><li>ä¸²è¡Œï¼šè¯·æ±‚æ˜¯å¼‚æ­¥çš„ï¼Œéœ€è¦ç­‰å¾…ä¸Šä¸€ä¸ªè¯·æ±‚æˆåŠŸï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªè¯·æ±‚</li> <li>å¹¶è¡Œï¼šåŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ã€Œ<code>HTTP</code>è¯·æ±‚å¯ä»¥åŒæ—¶è¿›è¡Œï¼Œä½†æ˜¯JSçš„æ“ä½œéƒ½æ˜¯ä¸€æ­¥æ­¥çš„æ¥çš„ï¼Œå› ä¸ºJSæ˜¯å•çº¿ç¨‹ã€,ç­‰å¾…æ‰€æœ‰è¯·æ±‚éƒ½æˆåŠŸï¼Œæˆ‘ä»¬å†å»åšä»€ä¹ˆäº‹æƒ…?</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/list'</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">results</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Promise.allå¹¶å‘é™åˆ¶åŠasync-poolçš„åº”ç”¨</strong></p> <blockquote><p>å¹¶å‘é™åˆ¶æŒ‡çš„æ˜¯ï¼Œæ¯ä¸ªæ—¶åˆ»å¹¶å‘æ‰§è¡Œçš„promiseæ•°é‡æ˜¯å›ºå®šçš„ï¼Œæœ€ç»ˆçš„æ‰§è¡Œç»“æœè¿˜æ˜¯ä¿æŒä¸åŸæ¥çš„</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">interval</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// if (interval === 1003) reject('xxx');</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1003</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1005</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1004</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1006</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/* Promise.all(tasks.map(task =&gt; task())).then(results =&gt; {
    console.log(results);
}); */</span>

<span class="token keyword">let</span> results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">asyncPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> tasks<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">task<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">interval</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1003</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1005</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1004</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1006</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>JSå®ç°Ajaxå¹¶å‘è¯·æ±‚æ§åˆ¶çš„ä¸¤å¤§è§£å†³æ–¹æ¡ˆ</strong></p> <blockquote><p><code>tasks</code>ï¼šæ•°ç»„ï¼Œæ•°ç»„åŒ…å«å¾ˆå¤šæ–¹æ³•ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå°±æ˜¯å‘é€ä¸€ä¸ªè¯·æ±‚ã€ŒåŸºäº<code>Promise</code>ç®¡ç†ã€</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createRequest</span><span class="token punctuation">(</span><span class="token parameter">tasks<span class="token punctuation">,</span> pool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pool <span class="token operator">=</span> pool <span class="token operator">||</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        together <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>pool<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    together <span class="token operator">=</span> together<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> tasks<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token keyword">let</span> old_index <span class="token operator">=</span> index<span class="token punctuation">,</span>
                    task <span class="token operator">=</span> tasks<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    results<span class="token punctuation">[</span>old_index<span class="token punctuation">]</span> <span class="token operator">=</span> result<span class="token punctuation">;</span>
                    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>together<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

<span class="token comment">/* createRequest(tasks, 2).then(results =&gt; {
    // éƒ½æˆåŠŸï¼Œæ•´ä½“æ‰æ˜¯æˆåŠŸï¼ŒæŒ‰é¡ºåºå­˜å‚¨ç»“æœ
    console.log('æˆåŠŸ--&gt;', results);
}).catch(reason =&gt; {
    // åªè¦æœ‰ä¹Ÿç»™å¤±è´¥ï¼Œæ•´ä½“å°±æ˜¯å¤±è´¥
    console.log('å¤±è´¥--&gt;', reason);
}); */</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createRequest</span><span class="token punctuation">(</span><span class="token parameter">tasks<span class="token punctuation">,</span> pool<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> pool <span class="token operator">===</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        callback <span class="token operator">=</span> pool<span class="token punctuation">;</span>
        pool <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> pool <span class="token operator">!==</span> <span class="token string">"number"</span><span class="token punctuation">)</span> pool <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//------</span>
    <span class="token keyword">class</span> <span class="token class-name">TaskQueue</span> <span class="token punctuation">{</span>
        running <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">pushTask</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            self<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
            self<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>running <span class="token operator">&lt;</span> pool <span class="token operator">&amp;&amp;</span> self<span class="token punctuation">.</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                self<span class="token punctuation">.</span>running<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token keyword">let</span> task <span class="token operator">=</span> self<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    self<span class="token punctuation">.</span>results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    self<span class="token punctuation">.</span>running<span class="token operator">--</span><span class="token punctuation">;</span>
                    self<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>running <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">callback</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> <span class="token constant">TQ</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TaskQueue</span><span class="token punctuation">;</span>
    tasks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">task</span> <span class="token operator">=&gt;</span> <span class="token constant">TQ</span><span class="token punctuation">.</span><span class="token function">pushTask</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">createRequest</span><span class="token punctuation">(</span>tasks<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token parameter">results</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ç¬¬19é¢˜-jq-ajaxã€axiosã€fetchçš„æ ¸å¿ƒåŒºåˆ«"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC19%E9%A2%98-jq-ajax%E3%80%81axios%E3%80%81fetch%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%88%AB" class="header-anchor">#</a> ç¬¬19é¢˜ JQ Ajaxã€Axiosã€Fetchçš„æ ¸å¿ƒåŒºåˆ«</h2> <p><strong>Ajax</strong></p> <blockquote><p><code>Ajax</code>å‰åç«¯æ•°æ®é€šä¿¡ã€ŒåŒæºã€è·¨åŸŸã€</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token string">'http://127.0.0.1:8888/user/list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> text <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'http://127.0.0.1:8888/user/list'</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç”¨æˆ·ç™»å½•</span>
<span class="token comment">// ç™»å½•æˆåŠŸ -&gt; è·å–ç”¨æˆ·ä¿¡æ¯</span>

<span class="token comment">/* å›è°ƒåœ°ç‹± */</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'http://127.0.0.1:8888/user/login'</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> Qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        account<span class="token operator">:</span> <span class="token string">'18310612838'</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token string">'1234567890'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ç™»å½•æˆåŠŸ</span>
            $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                url<span class="token operator">:</span> <span class="token string">'http://127.0.0.1:8888/user/list'</span><span class="token punctuation">,</span>
                method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
                <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Axios</strong></p> <blockquote><p><code>Axios</code>ä¹Ÿæ˜¯å¯¹<code>ajax</code>çš„å°è£…ï¼ŒåŸºäº<code>Promise</code>ç®¡ç†è¯·æ±‚ï¼Œè§£å†³å›è°ƒåœ°ç‹±é—®é¢˜</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        account<span class="token operator">:</span> <span class="token string">'18310612838'</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token string">'1234567890'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    result <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><p><strong>Fetch</strong></p> <blockquote><p><code>Fetch</code>æ˜¯<code>ES6</code>æ–°å¢çš„é€šä¿¡æ–¹æ³•ï¼Œä¸æ˜¯<code>ajax</code>ï¼Œä½†æ˜¯ä»–æœ¬èº«å®ç°æ•°æ®é€šä¿¡ï¼Œå°±æ˜¯åŸºäº<code>promise</code>ç®¡ç†çš„</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8888/user/login'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
        headers<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/x-www-form-urlencoded'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        body<span class="token operator">:</span> Qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            account<span class="token operator">:</span> <span class="token string">'18310612838'</span><span class="token punctuation">,</span>
            password<span class="token operator">:</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token string">'1234567890'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:8888/user/list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h2 id="ç¬¬18é¢˜-åŸºäºhttpç½‘ç»œå±‚çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC18%E9%A2%98-%E5%9F%BA%E4%BA%8Ehttp%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" class="header-anchor">#</a> ç¬¬18é¢˜ åŸºäºHTTPç½‘ç»œå±‚çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–</h2> <p><strong>äº§å“æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ</strong></p> <ul><li>HTTPç½‘ç»œå±‚ä¼˜åŒ–</li> <li>ä»£ç ç¼–è¯‘å±‚ä¼˜åŒ– <code>webpack</code></li> <li>ä»£ç è¿è¡Œå±‚ä¼˜åŒ– <code>html/css + javascript + vue + react</code></li> <li>å®‰å…¨ä¼˜åŒ– <code>xss + csrf</code></li> <li>æ•°æ®åŸ‹ç‚¹åŠæ€§èƒ½ç›‘æ§
...</li></ul> <blockquote><p><code>CRPï¼ˆCritical [ËˆkrÉªtÉªkl] Rendering [ËˆrendÉ™rÉªÅ‹] Pathï¼‰</code> å…³é”®æ¸²æŸ“è·¯å¾„</p></blockquote> <blockquote><p>ä»è¾“å…¥URLåœ°å€åˆ°çœ‹åˆ°é¡µé¢ï¼Œä¸­é—´éƒ½ç»å†äº†å•¥</p></blockquote> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210326151026.png" alt="" class="medium-zoom-image"></p> <h3 id="ç¬¬ä¸€æ­¥-urlè§£æ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%B8%80%E6%AD%A5-url%E8%A7%A3%E6%9E%90" class="header-anchor">#</a> ç¬¬ä¸€æ­¥ï¼šURLè§£æ</h3> <ul><li>åœ°å€è§£æ</li> <li>ç¼–ç </li></ul> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210327225229.png" alt="" class="medium-zoom-image"></p> <h3 id="ç¬¬äºŒæ­¥-ç¼“å­˜æ£€æŸ¥"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E7%BC%93%E5%AD%98%E6%A3%80%E6%9F%A5" class="header-anchor">#</a> ç¬¬äºŒæ­¥ï¼šç¼“å­˜æ£€æŸ¥</h3> <p><strong>ç¼“å­˜ä½ç½®ï¼š</strong></p> <blockquote><ul><li><code>Memory Cache</code>: å†…å­˜ç¼“å­˜</li> <li><code>Disk Cache</code>ï¼šç¡¬ç›˜ç¼“å­˜</li></ul></blockquote> <ul><li>æ‰“å¼€ç½‘é¡µï¼šæŸ¥æ‰¾ <code>disk cache</code> ä¸­æ˜¯å¦æœ‰åŒ¹é…ï¼Œå¦‚æœ‰åˆ™ä½¿ç”¨ï¼Œå¦‚æ²¡æœ‰åˆ™å‘é€ç½‘ç»œè¯·æ±‚</li> <li>æ™®é€šåˆ·æ–° (<code>F5</code>)ï¼šå› <code>TAB</code>æ²¡å…³é—­ï¼Œå› æ­¤<code>memory cache</code>æ˜¯å¯ç”¨çš„ï¼Œä¼šè¢«ä¼˜å…ˆä½¿ç”¨ï¼Œå…¶æ¬¡æ‰æ˜¯<code>disk cache</code></li> <li>å¼ºåˆ¶åˆ·æ–° (<code>Ctrl + F5</code>)ï¼šæµè§ˆå™¨ä¸ä½¿ç”¨ç¼“å­˜ï¼Œå› æ­¤å‘é€çš„è¯·æ±‚å¤´éƒ¨å‡å¸¦æœ‰ <code>Cache-control: no-cache</code>ï¼ŒæœåŠ¡å™¨ç›´æ¥è¿”å› <code>200</code> å’Œæœ€æ–°å†…å®¹</li></ul> <p><strong>å¼ºç¼“å­˜ Expires / Cache-Control</strong></p> <blockquote><p>æµè§ˆå™¨å¯¹äºå¼ºç¼“å­˜çš„å¤„ç†ï¼šæ ¹æ®ç¬¬ä¸€æ¬¡è¯·æ±‚èµ„æºæ—¶è¿”å›çš„å“åº”å¤´æ¥ç¡®å®šçš„</p></blockquote> <ul><li><code>Expires</code>ï¼šç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œç”¨æ¥æŒ‡å®šèµ„æºåˆ°æœŸçš„æ—¶é—´ï¼ˆ<code>HTTP/1.0</code>ï¼‰</li> <li><code>Cache-Controlï¼šcache-control: max-age=2592000</code> ç¬¬ä¸€æ¬¡æ‹¿åˆ°èµ„æºåçš„<code>2592000</code>ç§’å†…ï¼ˆ30å¤©ï¼‰ï¼Œå†æ¬¡å‘é€è¯·æ±‚ï¼Œè¯»å–ç¼“å­˜ä¸­çš„ä¿¡æ¯ï¼ˆ<code>HTTP/1.1</code>ï¼‰</li> <li>ä¸¤è€…åŒæ—¶å­˜åœ¨çš„è¯ï¼Œ<code>Cache-Control</code>ä¼˜å…ˆçº§é«˜äº<code>Expires</code></li></ul> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210326151334.png" alt="" class="medium-zoom-image"></p> <p><strong>åå•†ç¼“å­˜ Last-Modified / ETag</strong></p> <blockquote><p>åå•†ç¼“å­˜å°±æ˜¯å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡ç¨‹</p></blockquote> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210326151406.png" alt="" class="medium-zoom-image"></p> <p><strong>æ•°æ®ç¼“å­˜</strong></p> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210326151432.png" alt="" class="medium-zoom-image"></p> <h3 id="ç¬¬ä¸‰æ­¥-dnsè§£æ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%B8%89%E6%AD%A5-dns%E8%A7%A3%E6%9E%90" class="header-anchor">#</a> ç¬¬ä¸‰æ­¥ï¼šDNSè§£æ</h3> <ul><li>é€’å½’æŸ¥è¯¢</li> <li>è¿­ä»£æŸ¥è¯¢</li></ul> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210326151502.png" alt="" class="medium-zoom-image"></p> <blockquote><p>æ¯ä¸€æ¬¡<code>DNS</code>è§£ææ—¶é—´é¢„è®¡åœ¨<code>20~120</code>æ¯«ç§’</p></blockquote> <ul><li>å‡å°‘<code>DNS</code>è¯·æ±‚æ¬¡æ•°</li> <li><code>DNS</code>é¢„è·å–ï¼ˆ<code>DNS Prefetch</code>ï¼‰</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x-dns-prefetch-control<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>on<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dns-prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//static.360buyimg.com<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dns-prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//misc.360buyimg.com<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dns-prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//img10.360buyimg.com<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dns-prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//d.3.cn<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dns-prefetch<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>//d.jd.com<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><strong>æœåŠ¡å™¨æ‹†åˆ†çš„ä¼˜åŠ¿</strong></p> <ul><li>èµ„æºçš„åˆç†åˆ©ç”¨</li> <li>æŠ—å‹èƒ½åŠ›åŠ å¼º</li> <li>æé«˜<code>HTTP</code>å¹¶å‘</li></ul> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210326151614.png" alt="" class="medium-zoom-image"></p> <h3 id="ç¬¬å››æ­¥-tcpä¸‰æ¬¡æ¡æ‰‹"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E5%9B%9B%E6%AD%A5-tcp%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B" class="header-anchor">#</a> ç¬¬å››æ­¥ï¼šTCPä¸‰æ¬¡æ¡æ‰‹</h3> <ul><li><code>seq</code>åºå·ï¼Œç”¨æ¥æ ‡è¯†ä»<code>TCP</code>æºç«¯å‘ç›®çš„ç«¯å‘é€çš„å­—èŠ‚æµï¼Œå‘èµ·æ–¹å‘é€æ•°æ®æ—¶å¯¹æ­¤è¿›è¡Œæ ‡è®°</li> <li><code>ack</code>ç¡®è®¤åºå·ï¼Œåªæœ‰<code>ACK</code>æ ‡å¿—ä½ä¸º<code>1</code>æ—¶ï¼Œç¡®è®¤åºå·å­—æ®µæ‰æœ‰æ•ˆï¼Œ<code>ack=seq+1</code></li> <li>æ ‡å¿—ä½
<ul><li><code>ACK</code>ï¼šç¡®è®¤åºå·æœ‰æ•ˆ</li> <li><code>RST</code>ï¼šé‡ç½®è¿æ¥</li> <li><code>SYN</code>ï¼šå‘èµ·ä¸€ä¸ªæ–°è¿æ¥</li> <li><code>FIN</code>ï¼šé‡Šæ”¾ä¸€ä¸ªè¿æ¥</li></ul></li></ul> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210326151731.png" alt="" class="medium-zoom-image"></p> <p><strong>ä¸‰æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆä¸ç”¨ä¸¤æ¬¡ï¼Œæˆ–è€…å››æ¬¡?</strong></p> <blockquote><p>TCPä½œä¸ºä¸€ç§å¯é ä¼ è¾“æ§åˆ¶åè®®ï¼Œå…¶æ ¸å¿ƒæ€æƒ³ï¼šæ—¢è¦ä¿è¯æ•°æ®å¯é ä¼ è¾“ï¼Œåˆè¦æé«˜ä¼ è¾“çš„æ•ˆç‡ï¼</p></blockquote> <h3 id="ç¬¬äº”æ­¥-æ•°æ®ä¼ è¾“"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%BA%94%E6%AD%A5-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93" class="header-anchor">#</a> ç¬¬äº”æ­¥ï¼šæ•°æ®ä¼ è¾“</h3> <ul><li><code>HTTP</code>æŠ¥æ–‡
<ul><li>è¯·æ±‚æŠ¥æ–‡</li> <li>å“åº”æŠ¥æ–‡</li></ul></li> <li>å“åº”çŠ¶æ€ç 
<ul><li><code>200 OK</code></li> <li><code>202 Accepted</code> ï¼šæœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ï¼ˆå¼‚æ­¥ï¼‰</li> <li><code>204 No Content</code>ï¼šæœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†ä¸éœ€è¦è¿”å›ä»»ä½•å®ä½“å†…å®¹</li> <li><code>206 Partial Content</code>ï¼šæœåŠ¡å™¨å·²ç»æˆåŠŸå¤„ç†äº†éƒ¨åˆ† <code>GET</code> è¯·æ±‚ï¼ˆæ–­ç‚¹ç»­ä¼  <code>Range/If-Range/Content-Range/Content-Type:â€multipart/byterangesâ€/Content-Lengthâ€¦.</code>ï¼‰</li> <li><code>301 Moved Permanently</code></li> <li><code>302 Move Temporarily</code></li> <li><code>304 Not Modified</code></li> <li><code>305 Use Proxy</code></li> <li><code>400 Bad Request</code> : è¯·æ±‚å‚æ•°æœ‰è¯¯</li> <li><code>401 Unauthorized</code>ï¼šæƒé™ï¼ˆ<code>Authorization</code>ï¼‰</li> <li><code>404 Not Found</code></li> <li><code>405 Method Not Allowed</code></li> <li><code>408 Request Timeout</code></li> <li><code>500 Internal Server Error</code></li> <li><code>503 Service Unavailable</code></li> <li><code>505 HTTP Version Not Supported</code></li></ul></li></ul> <h3 id="ç¬¬å…­æ­¥-tcpå››æ¬¡æŒ¥æ‰‹"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E5%85%AD%E6%AD%A5-tcp%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B" class="header-anchor">#</a> ç¬¬å…­æ­¥ï¼šTCPå››æ¬¡æŒ¥æ‰‹</h3> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210326151917.png" alt="" class="medium-zoom-image"></p> <p><strong>ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ</strong></p> <ul><li>æœåŠ¡å™¨ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„<code>SYN</code>è¿æ¥è¯·æ±‚æŠ¥æ–‡åï¼Œå¯ä»¥ç›´æ¥å‘é€<code>SYN+ACK</code>æŠ¥æ–‡</li> <li>ä½†å…³é—­è¿æ¥æ—¶ï¼Œå½“æœåŠ¡å™¨ç«¯æ”¶åˆ°FINæŠ¥æ–‡æ—¶ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹å³å…³é—­é“¾æ¥ï¼Œæ‰€ä»¥åªèƒ½å…ˆå›å¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ï¼šâ€ä½ å‘çš„FINæŠ¥æ–‡æˆ‘æ”¶åˆ°äº†â€ï¼Œåªæœ‰ç­‰åˆ°æœåŠ¡å™¨ç«¯æ‰€æœ‰çš„æŠ¥æ–‡éƒ½å‘é€å®Œäº†ï¼Œæˆ‘æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ï¼Œæ•…éœ€è¦å››æ­¥æ¡æ‰‹ã€‚</li></ul> <h3 id="ç¬¬ä¸ƒæ­¥-é¡µé¢æ¸²æŸ“"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC%E4%B8%83%E6%AD%A5-%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93" class="header-anchor">#</a> ç¬¬ä¸ƒæ­¥ï¼šé¡µé¢æ¸²æŸ“</h3> <h3 id="æ€§èƒ½ä¼˜åŒ–æ±‡æ€»"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%B1%87%E6%80%BB" class="header-anchor">#</a> æ€§èƒ½ä¼˜åŒ–æ±‡æ€»</h3> <ul><li>åˆ©ç”¨ç¼“å­˜
<ul><li>å¯¹äºé™æ€èµ„æºæ–‡ä»¶å®ç°å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼ˆæ‰©å±•ï¼šæ–‡ä»¶æœ‰æ›´æ–°ï¼Œå¦‚ä½•ä¿è¯åŠæ—¶åˆ·æ–°ï¼Ÿï¼‰</li> <li>å¯¹äºä¸ç»å¸¸æ›´æ–°çš„æ¥å£æ•°æ®é‡‡ç”¨æœ¬åœ°å­˜å‚¨åšæ•°æ®ç¼“å­˜ï¼ˆæ‰©å±•ï¼šcookie / localStorage / vuex|redux åŒºåˆ«ï¼Ÿï¼‰</li></ul></li> <li>DNSä¼˜åŒ–
<ul><li>åˆ†æœåŠ¡å™¨éƒ¨ç½²ï¼Œå¢åŠ HTTPå¹¶å‘æ€§ï¼ˆå¯¼è‡´DNSè§£æå˜æ…¢ï¼‰</li> <li>DNS Prefetch</li></ul></li> <li>TCPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹
<ul><li>Connection:keep-alive</li></ul></li> <li>æ•°æ®ä¼ è¾“
<ul><li>å‡å°‘æ•°æ®ä¼ è¾“çš„å¤§å°
<ul><li>å†…å®¹æˆ–è€…æ•°æ®å‹ç¼©ï¼ˆwebpackç­‰ï¼‰</li> <li>æœåŠ¡å™¨ç«¯ä¸€å®šè¦å¼€å¯GZIPå‹ç¼©ï¼ˆä¸€èˆ¬èƒ½å‹ç¼©60%å·¦å³ï¼‰</li> <li>å¤§æ‰¹é‡æ•°æ®åˆ†æ‰¹æ¬¡è¯·æ±‚ï¼ˆä¾‹å¦‚ï¼šä¸‹æ‹‰åˆ·æ–°æˆ–è€…åˆ†é¡µï¼Œä¿è¯é¦–æ¬¡åŠ è½½è¯·æ±‚æ•°æ®å°‘ï¼‰</li></ul></li> <li>å‡å°‘HTTPè¯·æ±‚çš„æ¬¡æ•°
<ul><li>èµ„æºæ–‡ä»¶åˆå¹¶å¤„ç†</li> <li>å­—ä½“å›¾æ ‡</li> <li>é›ªç¢§å›¾ CSS-Sprit</li> <li>å›¾ç‰‡çš„BASE64</li></ul></li></ul></li> <li>CDNæœåŠ¡å™¨â€œåœ°åŸŸåˆ†å¸ƒå¼â€</li> <li>é‡‡ç”¨<code>HTTP2.0</code></li></ul> <blockquote><p>ç½‘ç»œä¼˜åŒ–æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ä¸­çš„é‡ç‚¹å†…å®¹ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„æ¶ˆè€—éƒ½å‘ç”Ÿåœ¨ç½‘ç»œå±‚ï¼Œå°¤å…¶æ˜¯ç¬¬ä¸€æ¬¡é¡µé¢åŠ è½½ï¼Œå¦‚ä½•å‡å°‘ç­‰å¾…æ—¶é—´å¾ˆé‡è¦â€œå‡å°‘ç™½å±çš„æ•ˆæœå’Œæ—¶é—´â€</p></blockquote> <ul><li><code>loading</code> äººæ€§åŒ–ä½“éªŒ</li> <li>éª¨æ¶å±ï¼šå®¢æˆ·ç«¯éª¨å± + æœåŠ¡å™¨éª¨æ¶å±</li> <li>å›¾ç‰‡å»¶è¿ŸåŠ è½½</li></ul> <h3 id="http1-0-vs-http1-1-vs-http2-0"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#http1-0-vs-http1-1-vs-http2-0" class="header-anchor">#</a> HTTP1.0 VS HTTP1.1 VS HTTP2.0</h3> <p><img src="./æ¯æ—¥ä¸€é¢˜_files/20210326152325.png" alt="" class="medium-zoom-image"></p> <h3 id="http1-0å’Œhttp1-1çš„ä¸€äº›åŒºåˆ«"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#http1-0%E5%92%8Chttp1-1%E7%9A%84%E4%B8%80%E4%BA%9B%E5%8C%BA%E5%88%AB" class="header-anchor">#</a> HTTP1.0å’ŒHTTP1.1çš„ä¸€äº›åŒºåˆ«</h3> <ul><li><code>ç¼“å­˜å¤„ç†</code>ï¼Œ<code>HTTP1.0</code>ä¸­ä¸»è¦ä½¿ç”¨<code>Last-Modified</code>ï¼Œ<code>Expires</code> æ¥åšä¸ºç¼“å­˜åˆ¤æ–­çš„æ ‡å‡†ï¼Œ<code>HTTP1.1</code>åˆ™å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æ§åˆ¶ç­–ç•¥ï¼š<code>ETagï¼ŒCache-Controlâ€¦</code></li> <li><code>å¸¦å®½ä¼˜åŒ–åŠç½‘ç»œè¿æ¥çš„ä½¿ç”¨</code>ï¼Œ<code>HTTP1.1</code>æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œå³è¿”å›ç æ˜¯<code>206</code>ï¼ˆ<code>Partial Content</code>ï¼‰</li> <li><code>é”™è¯¯é€šçŸ¥çš„ç®¡ç†</code>ï¼Œåœ¨<code>HTTP1.1</code>ä¸­æ–°å¢äº†<code>24</code>ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç ï¼Œå¦‚<code>409ï¼ˆConflictï¼‰</code>è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸èµ„æºçš„å½“å‰çŠ¶æ€å‘ç”Ÿå†²çªï¼›<code>410ï¼ˆGoneï¼‰</code>è¡¨ç¤ºæœåŠ¡å™¨ä¸Šçš„æŸä¸ªèµ„æºè¢«æ°¸ä¹…æ€§çš„åˆ é™¤â€¦</li> <li><code>Hostå¤´å¤„ç†</code>ï¼Œåœ¨<code>HTTP1.0</code>ä¸­è®¤ä¸ºæ¯å°æœåŠ¡å™¨éƒ½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ï¼Œå› æ­¤ï¼Œè¯·æ±‚æ¶ˆæ¯ä¸­çš„URLå¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåï¼ˆ<code>hostname</code>ï¼‰ã€‚ä½†éšç€è™šæ‹Ÿä¸»æœºæŠ€æœ¯çš„å‘å±•ï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼ˆ<code>Multi-homed Web Servers</code>ï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬å…±äº«ä¸€ä¸ªIPåœ°å€ã€‚HTTP1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½åº”æ”¯æŒ<code>Host</code>å¤´åŸŸï¼Œä¸”è¯·æ±‚æ¶ˆæ¯ä¸­å¦‚æœæ²¡æœ‰Hostå¤´åŸŸä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯ï¼ˆ<code>400 Bad Request</code>ï¼‰</li> <li><code>é•¿è¿æ¥</code>ï¼Œ<code>HTTP1.1</code>ä¸­é»˜è®¤å¼€å¯<code>Connectionï¼š keep-alive</code>ï¼Œä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†<code>HTTP1.0</code>æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ›å»ºè¿æ¥çš„ç¼ºç‚¹</li></ul> <h3 id="http2-0å’Œhttp1-xç›¸æ¯”çš„æ–°ç‰¹æ€§"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#http2-0%E5%92%8Chttp1-x%E7%9B%B8%E6%AF%94%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7" class="header-anchor">#</a> HTTP2.0å’ŒHTTP1.Xç›¸æ¯”çš„æ–°ç‰¹æ€§</h3> <ul><li><code>æ–°çš„äºŒè¿›åˆ¶æ ¼å¼ï¼ˆBinary Formatï¼‰</code>ï¼Œ<code>HTTP1.x</code>çš„è§£ææ˜¯åŸºäºæ–‡æœ¬ï¼ŒåŸºäºæ–‡æœ¬åè®®çš„æ ¼å¼è§£æå­˜åœ¨å¤©ç„¶ç¼ºé™·ï¼Œæ–‡æœ¬çš„è¡¨ç°å½¢å¼æœ‰å¤šæ ·æ€§ï¼Œè¦åšåˆ°å¥å£®æ€§è€ƒè™‘çš„åœºæ™¯å¿…ç„¶å¾ˆå¤šï¼ŒäºŒè¿›åˆ¶åˆ™ä¸åŒï¼Œåªè®¤<code>0</code>å’Œ<code>1</code>çš„ç»„åˆï¼ŒåŸºäºè¿™ç§è€ƒè™‘<code>HTTP2.0</code>çš„åè®®è§£æå†³å®šé‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ç°æ–¹ä¾¿ä¸”å¥å£®</li> <li><code>headerå‹ç¼©</code>ï¼Œ<code>HTTP1.x</code>çš„<code>header</code>å¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡éƒ½è¦é‡å¤å‘é€ï¼Œ<code>HTTP2.0</code>ä½¿ç”¨<code>encoder</code>æ¥å‡å°‘éœ€è¦ä¼ è¾“çš„<code>header</code>å¤§å°ï¼Œé€šè®¯åŒæ–¹å„è‡ª<code>cache</code>ä¸€ä»½<code>header fields</code>è¡¨ï¼Œæ—¢é¿å…äº†é‡å¤<code>header</code>çš„ä¼ è¾“ï¼Œåˆå‡å°äº†éœ€è¦ä¼ è¾“çš„å¤§å°</li> <li><code>æœåŠ¡ç«¯æ¨é€ï¼ˆserver pushï¼‰</code>ï¼Œä¾‹å¦‚æˆ‘çš„ç½‘é¡µæœ‰ä¸€ä¸ª<code>sytle.css</code>çš„è¯·æ±‚ï¼Œåœ¨å®¢æˆ·ç«¯æ”¶åˆ°<code>sytle.css</code>æ•°æ®çš„åŒæ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå°†sytle.jsçš„æ–‡ä»¶æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œå½“å®¢æˆ·ç«¯å†æ¬¡å°è¯•è·å–<code>sytle.js</code>æ—¶å°±å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è·å–åˆ°ï¼Œä¸ç”¨å†å‘è¯·æ±‚äº†</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// é€šè¿‡åœ¨åº”ç”¨ç”ŸæˆHTTPå“åº”å¤´ä¿¡æ¯ä¸­è®¾ç½®Linkå‘½ä»¤
Link: &lt;/styles.css&gt;; rel=preload; as=style, &lt;/example.png&gt;; rel=preload; as=image
</code></pre></div><ul><li>å¤šè·¯å¤ç”¨ï¼ˆ<code>MultiPlexing</code>ï¼‰
<ul><li><code>HTTP/1.0</code>  æ¯æ¬¡è¯·æ±‚å“åº”ï¼Œå»ºç«‹ä¸€ä¸ª<code>TCP</code>è¿æ¥ï¼Œç”¨å®Œå…³é—­</li> <li><code>HTTP/1.1</code> ã€Œé•¿è¿æ¥ã€ è‹¥å¹²ä¸ªè¯·æ±‚æ’é˜Ÿä¸²è¡ŒåŒ–å•çº¿ç¨‹å¤„ç†ï¼Œåé¢çš„è¯·æ±‚ç­‰å¾…å‰é¢è¯·æ±‚çš„è¿”å›æ‰èƒ½è·å¾—æ‰§è¡Œæœºä¼šï¼Œä¸€æ—¦æœ‰æŸè¯·æ±‚è¶…æ—¶ç­‰ï¼Œåç»­è¯·æ±‚åªèƒ½è¢«é˜»å¡ï¼Œæ¯«æ— åŠæ³•ï¼Œä¹Ÿå°±æ˜¯äººä»¬å¸¸è¯´çš„çº¿å¤´é˜»å¡ï¼›</li> <li><code>HTTP/2.0</code> ã€Œå¤šè·¯å¤ç”¨ã€å¤šä¸ªè¯·æ±‚å¯åŒæ—¶åœ¨ä¸€ä¸ªè¿æ¥ä¸Šå¹¶è¡Œæ‰§è¡Œï¼ŒæŸä¸ªè¯·æ±‚ä»»åŠ¡è€—æ—¶ä¸¥é‡ï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒè¿æ¥çš„æ­£å¸¸æ‰§è¡Œï¼›</li></ul></li></ul> <h2 id="ç¬¬17é¢˜-å®ç°vue-reactiveåŸç†"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC17%E9%A2%98-%E5%AE%9E%E7%8E%B0vue-reactive%E5%8E%9F%E7%90%86" class="header-anchor">#</a> ç¬¬17é¢˜ å®ç°vue reactiveåŸç†</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Dep module</span>
<span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">static</span> target <span class="token operator">=</span> <span class="token keyword">null</span>
  deps <span class="token operator">=</span> <span class="token keyword">null</span>
  
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>deps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>deps<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>deps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">w</span> <span class="token operator">=&gt;</span> w<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">pushTarget</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> t
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">popTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// reactive</span>
<span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> o <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">k</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">defineReactive</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> k<span class="token punctuation">,</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> o
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">defineReactive</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> k<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      dep<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> val
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      val <span class="token operator">=</span> newVal
      dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">reactive</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// watcher</span>
<span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">effect</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>effect <span class="token operator">=</span> effect
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Dep<span class="token punctuation">.</span><span class="token function">pushTarget</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    Dep<span class="token punctuation">.</span><span class="token function">popTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æµ‹è¯•ä»£ç </span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  msg<span class="token operator">:</span> <span class="token string">'aaa'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'===&gt; effect'</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span>msg <span class="token operator">=</span> <span class="token string">'hello'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ç¬¬16é¢˜-å¼‚æ­¥ä¸²è¡Œ-å¼‚æ­¥å¹¶è¡Œ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC16%E9%A2%98-%E5%BC%82%E6%AD%A5%E4%B8%B2%E8%A1%8C-%E5%BC%82%E6%AD%A5%E5%B9%B6%E8%A1%8C" class="header-anchor">#</a> ç¬¬16é¢˜ å¼‚æ­¥ä¸²è¡Œ | å¼‚æ­¥å¹¶è¡Œ</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å­—èŠ‚é¢è¯•é¢˜ï¼Œå®ç°ä¸€ä¸ªå¼‚æ­¥åŠ æ³•</span>
<span class="token keyword">function</span> <span class="token function">asyncAdd</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// è§£å†³æ–¹æ¡ˆ</span>
<span class="token comment">// 1. promisify</span>
<span class="token keyword">const</span> <span class="token function-variable function">promiseAdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">asyncAdd</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 2. ä¸²è¡Œå¤„ç†</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">serialSum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">task<span class="token punctuation">,</span> now</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> task<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token function">promiseAdd</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> now<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3. å¹¶è¡Œå¤„ç†</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">parallelSum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">promiseAdd</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token function">parallelSum</span><span class="token punctuation">(</span><span class="token operator">...</span>results<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æµ‹è¯•</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Running...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> res1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">serialSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span>
  <span class="token keyword">const</span> res2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">parallelSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Done'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ç¬¬15é¢˜-ä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC15%E9%A2%98-%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88" class="header-anchor">#</a> ç¬¬15é¢˜ ä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆ</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  b <span class="token operator">=</span> <span class="token number">123</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>è¾“å‡º</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  b <span class="token operator">=</span> <span class="token number">123</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>IIFE</code>ä¸­çš„<code>foo</code>å‡½æ•°åç›¸å½“äºæ˜¯ä½¿ç”¨<code>const</code>å…³é”®å­—å®šä¹‰çš„ï¼Œå› æ­¤æ²¡æœ‰åŠæ³•å¯¹ä¸€ä¸ªå¸¸é‡å†èµ‹å€¼ã€‚ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªå±€éƒ¨çš„ä½œç”¨åŸŸï¼Œå¹¶ä¸”ä»¥ <code>const</code> å£°æ˜ä¸ºå¸¸é‡ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼Œæ— æ³•å¯¹å¸¸é‡é‡æ–°èµ‹å€¼ï¼Œå› æ­¤æ‰§è¡Œç»“æœå°†æ‰“å°å‡ºå‡½æ•°å£°æ˜,ç­‰ä»·äº <code>const b = function() { }</code></li> <li>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œç›´æ¥æŠ¥<code>TypeError</code>ç±»å‹çš„é”™è¯¯ï¼Œè¿™ç±»é”™è¯¯åŒæ•°æ®ç±»å‹ç›¸å…³.</li> <li>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¼šå¿½ç•¥å¯¹å¸¸é‡çš„èµ‹å€¼</li></ul> <p>å¦‚æœæ˜¯åŒ¿åå‡½æ•°ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  b <span class="token operator">=</span> <span class="token number">123</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>åˆ™ç”±äºå±€éƒ¨å˜é‡æ— æ³•æ‰¾åˆ°ï¼Œç»§ç»­å¯»æ‰¾å…¨å±€å˜é‡ï¼Œå¯¼è‡´è¾“å‡ºç»“æœä¸º <code>123</code></p></blockquote> <h2 id="ç¬¬14é¢˜-å¦‚ä½•è®©if-a-1-a-2-æ¡ä»¶æˆç«‹"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC14%E9%A2%98-%E5%A6%82%E4%BD%95%E8%AE%A9if-a-1-a-2-%E6%9D%A1%E4%BB%B6%E6%88%90%E7%AB%8B" class="header-anchor">#</a> ç¬¬14é¢˜ å¦‚ä½•è®©if(a == 1 &amp;&amp; a == 2)æ¡ä»¶æˆç«‹</h2> <p><strong>åˆ†æ</strong></p> <blockquote><p>å¯¹è±¡è½¬åŸå§‹ç±»å‹ï¼Œä¼šè°ƒç”¨å†…ç½®çš„<code>[ToPrimitive]</code>å‡½æ•°ï¼Œå¯¹äºè¯¥å‡½æ•°è€Œè¨€ï¼Œå…¶é€»è¾‘å¦‚ä¸‹ï¼š</p></blockquote> <ul><li>å¦‚æœæœ‰<code>Symbol.toPrimitive()</code>æ–¹æ³•ï¼Œä¼˜å…ˆè°ƒç”¨å†è¿”å›</li> <li>è°ƒç”¨<code>valueOf()</code>ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œåˆ™è¿”å›</li> <li>è°ƒç”¨<code>toString()</code>ï¼Œå¦‚æœè½¬æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œåˆ™è¿”å›</li> <li>å¦‚æœéƒ½æ²¡æœ‰è¿”å›åŸå§‹ç±»å‹ï¼Œä¼šæŠ¥é”™</li></ul> <p><strong>ç­”æ¡ˆ</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre></div><h2 id="ç¬¬13é¢˜-å¼‚æ­¥æ‰§è¡Œé¡ºåºé—®é¢˜"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC13%E9%A2%98-%E5%BC%82%E6%AD%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%E9%97%AE%E9%A2%98" class="header-anchor">#</a> ç¬¬13é¢˜ å¼‚æ­¥æ‰§è¡Œé¡ºåºé—®é¢˜</h2> <p>é˜…è¯»ä¸‹é¢ä»£ç ï¼Œæˆ‘ä»¬åªè€ƒè™‘æµè§ˆå™¨ç¯å¢ƒä¸‹çš„è¾“å‡ºç»“æœï¼Œå†™å‡ºå®ƒä»¬ç»“æœæ‰“å°çš„å…ˆåé¡ºåºï¼Œå¹¶åˆ†æå‡ºåŸå› ï¼Œå°ä¼™ä¼´ä»¬ï¼ŒåŠ æ²¹å“¦ï¼</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"AAAA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"BBBB"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start <span class="token operator">&lt;</span> <span class="token number">3000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"CCCC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"DDDD"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"EEEE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"FFFF"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"GGGG"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"HHHH"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"IIII"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>ç­”æ¡ˆï¼š</strong></p> <p>æµè§ˆå™¨ä¸‹ è¾“å‡ºç»“æœçš„å…ˆåé¡ºåºæ˜¯</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">AAAA</span>
<span class="token constant">CCCC</span>
<span class="token constant">EEEE</span>
<span class="token constant">IIII</span>
<span class="token constant">HHHH</span>
<span class="token constant">BBBB</span>
<span class="token constant">DDDD</span>
</code></pre></div><blockquote><p>ç­”æ¡ˆè§£æï¼šè¿™é“é¢˜è€ƒå¯Ÿé‡ç‚¹æ˜¯  jså¼‚æ­¥æ‰§è¡Œ å®ä»»åŠ¡ å¾®ä»»åŠ¡ã€‚</p></blockquote> <ul><li>ä¸€å¼€å§‹ä»£ç æ‰§è¡Œï¼Œè¾“å‡º<code>AAAA</code>.  1</li> <li>ç¬¬äºŒè¡Œä»£ç å¼€å¯ä¸€ä¸ªè®¡æ—¶å™¨t1(ä¸€ä¸ªç§°å‘¼)ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ä¸”æ˜¯å®ä»»åŠ¡ï¼Œéœ€è¦ç­‰åˆ°1ç§’åæäº¤ã€‚</li> <li>ç¬¬å››è¡Œæ˜¯ä¸ªwhileè¯­å¥ï¼Œéœ€è¦ç­‰å¾…3ç§’åæ‰èƒ½æ‰§è¡Œä¸‹é¢çš„ä»£ç ,è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯3ç§’åä¸Šä¸€ä¸ªè®¡æ—¶å™¨t1çš„æäº¤æ—¶é—´å·²ç»è¿‡äº†ï¼Œä½†æ˜¯çº¿ç¨‹ä¸Šçš„ä»»åŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œç»“æŸï¼Œæ‰€ä»¥æš‚æ—¶ä¸èƒ½æ‰“å°ç»“æœï¼Œæ‰€ä»¥å®ƒæ’åœ¨å®ä»»åŠ¡çš„æœ€å‰é¢äº†ã€‚</li> <li>ç¬¬äº”è¡Œåˆè¾“å‡º<code>CCCC</code></li> <li>ç¬¬å…­è¡Œåˆå¼€å¯ä¸€ä¸ªè®¡æ—¶å™¨t2ï¼ˆç§°å‘¼ï¼‰ï¼Œå®ƒæäº¤çš„æ—¶é—´æ˜¯0ç§’ï¼ˆå…¶å®æ¯ä¸ªæµè§ˆå™¨å™¨æœ‰é»˜è®¤æœ€å°æ—¶é—´çš„ï¼Œæš‚æ—¶å¿½ç•¥ï¼‰ï¼Œä½†æ˜¯ä¹‹å‰çš„t1ä»»åŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œè¿˜åœ¨ç­‰å¾…ï¼Œæ‰€ä»¥t2å°±æ’åœ¨t1çš„åé¢ã€‚ï¼ˆt2æ’åœ¨t1åé¢çš„åŸå› æ˜¯whileé€ æˆçš„ï¼‰éƒ½è¿˜éœ€è¦ç­‰å¾…ï¼Œå› ä¸ºçº¿ç¨‹ä¸Šçš„ä»»åŠ¡è¿˜æ²¡æ‰§è¡Œå®Œæ¯•ã€‚</li> <li>ç¬¬ä¸ƒè¡Œ<code>new Promise</code>å°†æ‰§è¡Œpromiseå‡½æ•°ï¼Œå®ƒå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å†…çš„ä»£ç æ˜¯åŒæ­¥çš„ï¼Œå®ƒçš„å¼‚æ­¥æ ¸å¿ƒåœ¨äºresolveå’Œrejectï¼ŒåŒæ—¶è¿™ä¸ªå¼‚æ­¥ä»»åŠ¡åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­å±äºå¾®ä»»åŠ¡ï¼Œæ˜¯ä¼˜å…ˆäºå®ä»»åŠ¡æ‰§è¡Œçš„ï¼Œ(ä¸ç®¡å®ä»»åŠ¡æœ‰å¤šæ€¥ï¼Œåæ­£æˆ‘æ˜¯VIP)ã€‚æ‰€ä»¥å…ˆç›´æ¥æ‰“å°è¾“å‡ºåŒæ­¥ä»£ç <code>EEEE</code>ã€‚ç¬¬ä¹è¡Œä¸­çš„ä»£ç æ˜¯ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡ï¼Œè¿™ä¸ªé”™è¯¯è¦æŠ›ç»™rejectè¿™ä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯catchå»å¤„ç†ï¼Œä½†æ˜¯å®ƒæ˜¯å¼‚æ­¥çš„ä¸”æ˜¯å¾®ä»»åŠ¡ï¼Œåªæœ‰ç­‰åˆ°çº¿ç¨‹ä¸Šçš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç«‹é©¬æ‰§è¡Œå®ƒï¼Œä¸ç®¡å®ä»»åŠ¡ï¼ˆè®¡æ—¶å™¨ï¼Œajaxç­‰ï¼‰ç­‰å¾…å¤šä¹…äº†ã€‚</li> <li>ç¬¬åå››è¡Œï¼Œè¿™æ˜¯çº¿ç¨‹ä¸Šçš„æœ€åä¸€ä¸ªä»»åŠ¡ï¼Œæ‰“å°è¾“å‡º	<code>IIII</code></li> <li>æˆ‘ä»¬å…ˆæ‰¾å‡ºçº¿ç¨‹ä¸Šçš„åŒæ­¥ä»£ç ï¼Œå°†ç»“æœä¾æ¬¡æ’åˆ—å‡ºæ¥ï¼š<code>AAAA CCCC EEEE IIII</code></li> <li>ç„¶åæˆ‘ä»¬å†æ‰¾å‡ºæ‰€æœ‰å¼‚æ­¥ä»»åŠ¡ä¸­çš„å¾®ä»»åŠ¡ æŠŠç»“æœæ‰“å°å‡ºæ¥  HHHH</li> <li>æœ€åæˆ‘ä»¬å†æ‰¾å‡ºå¼‚æ­¥ä¸­çš„æ‰€æœ‰å®ä»»åŠ¡ï¼Œè¿™é‡Œt1æ’åœ¨å‰é¢t2æ’åœ¨åé¢ï¼ˆè¿™ä¸ªåŸå› æ˜¯whileé€ æˆçš„ï¼‰ï¼Œè¾“å‡ºç»“æœé¡ºåºæ˜¯ BBBB DDDD</li> <li>æ‰€ä»¥ç»¼ä¸Š ç»“æœæ˜¯  AAAA  CCCC  EEEE  IIII  HHHH BBBB DDDD</li></ul> <h2 id="ç¬¬12é¢˜-å¾®ä»»åŠ¡æ‰§è¡Œé—®é¢˜-async-await"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC12%E9%A2%98-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E9%97%AE%E9%A2%98-async-await" class="header-anchor">#</a> ç¬¬12é¢˜ å¾®ä»»åŠ¡æ‰§è¡Œé—®é¢˜ async await</h2> <ol><li>é—®é¢˜1</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">t1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token string">"lagou"</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">t1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>é—®é¢˜è§£æ</p> <blockquote><p><code>await</code>æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¦‚æœåé¢ä¸æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå°±ç›´æ¥è¿”å›å¯¹åº”çš„å€¼ã€‚</p></blockquote> <p>æ‰€ä»¥é—®é¢˜1å¯ä»¥ç†è§£ä¸º</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">t1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">"lagou"</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//lagou</span>
<span class="token punctuation">}</span>
<span class="token function">t1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>é—®é¢˜2</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">t2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
<span class="token punctuation">}</span>
<span class="token function">t2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>é—®é¢˜è§£æ</p> <blockquote><p><code>await</code>åé¢å¦‚æœè·Ÿä¸€ä¸ªpromiseå¯¹è±¡ï¼Œawaitå°†ç­‰å¾…è¿™ä¸ªpromiseå¯¹è±¡çš„resolveçŠ¶æ€çš„å€¼valueï¼Œä¸”å°†è¿™ä¸ªå€¼è¿”å›ç»™å‰é¢çš„å˜é‡ï¼Œæ­¤æ—¶çš„promiseå¯¹è±¡çš„çŠ¶æ€æ˜¯ä¸€ä¸ªpendingçŠ¶æ€ï¼Œæ²¡æœ‰resolveçŠ¶æ€å€¼ï¼Œæ‰€ä»¥ä»€ä¹ˆä¹Ÿæ‰“å°ä¸äº†ã€‚</p></blockquote> <ol start="3"><li>é—®é¢˜3</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">t3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
<span class="token punctuation">}</span>
<span class="token function">t3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p><code>await</code>åé¢å¦‚æœè·Ÿä¸€ä¸ªpromiseå¯¹è±¡ï¼Œawaitå°†ç­‰å¾…è¿™ä¸ªpromiseå¯¹è±¡çš„resolveçŠ¶æ€çš„å€¼valueï¼Œä¸”å°†è¿™ä¸ªå€¼è¿”å›ç»™å‰é¢çš„å˜é‡ï¼Œæ­¤æ—¶çš„promiseå¯¹è±¡çš„çŠ¶æ€æ˜¯ä¸€ä¸ªresolveçŠ¶æ€ï¼Œä½†æ˜¯å®ƒçš„çŠ¶æ€å€¼æ˜¯undefinedï¼Œæ‰€ä»¥æ‰“å°å‡ºundefinedã€‚</p></blockquote> <ol start="4"><li>é—®é¢˜4</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">t4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//hello</span>
<span class="token punctuation">}</span>
<span class="token function">t4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p><code>await</code>åé¢å¦‚æœè·Ÿä¸€ä¸ªpromiseå¯¹è±¡ï¼Œawaitå°†ç­‰å¾…è¿™ä¸ªpromiseå¯¹è±¡çš„resolveçŠ¶æ€çš„å€¼ï¼Œä¸”å°†è¿™ä¸ªå€¼è¿”å›ç»™å‰é¢çš„å˜é‡ï¼Œæ­¤æ—¶çš„promiseå¯¹è±¡çš„çŠ¶æ€æ˜¯ä¸€ä¸ªresolveçŠ¶æ€ï¼Œå®ƒçš„çŠ¶æ€å€¼æ˜¯helloï¼Œæ‰€ä»¥æ‰“å°å‡ºhelloã€‚</p></blockquote> <ol start="5"><li>é—®é¢˜5</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">t5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">"lala"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//lala</span>
<span class="token punctuation">}</span>
<span class="token function">t5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p><code>await</code>åé¢å¦‚æœè·Ÿä¸€ä¸ªpromiseå¯¹è±¡ï¼Œawaitå°†ç­‰å¾…è¿™ä¸ªpromiseå¯¹è±¡çš„resolveçŠ¶æ€çš„å€¼ï¼Œä¸”å°†è¿™ä¸ªå€¼è¿”å›ç»™å‰é¢çš„å˜é‡ï¼Œæ­¤æ—¶çš„promiseå¯¹è±¡çš„çŠ¶æ€æ˜¯ä¸€ä¸ªresolveçŠ¶æ€ï¼Œå®ƒçš„çŠ¶æ€å€¼æ˜¯helloï¼Œç´§æ¥ç€åé¢åˆæ‰§è¡Œäº†ä¸€ä¸ªthenæ–¹æ³•ï¼Œthenæ–¹æ³•åˆä¼šè¿”å›ä¸€ä¸ªå…¨æ–°çš„promiseå¯¹è±¡ï¼Œä¸”è¿™ä¸ªthenæ–¹æ³•ä¸­çš„è¿”å›å€¼ä¼šä½œä¸ºè¿™ä¸ªå…¨æ–°çš„promiseä¸­resolveçš„å€¼ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ç»“æœæ˜¯lalaã€‚</p></blockquote> <ol start="6"><li>é—®é¢˜6</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">t6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"lagou"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">t6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>é—®é¢˜è§£æ</p> <blockquote><p><code>async</code>å‡½æ•°æ‰§è¡Œè¿”å›ä¸€ä¸ª<code>promise</code>å¯¹è±¡,ä¸”<code>async</code>å‡½æ•°å†…éƒ¨çš„è¿”å›å€¼ä¼šå½“ä½œè¿™ä¸ªpromiseå¯¹è±¡resolveçŠ¶æ€çš„å€¼</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">"la"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Promise {&lt;resolved&gt;: "la"}</span>
      <span class="token comment">//__proto__: Promise</span>
                <span class="token comment">//[[PromiseStatus]]: "resolved"</span>
                <span class="token comment">//[[PromiseValue]]: "la"</span>
</code></pre></div><blockquote><p>é¦–å…ˆè€ƒè™‘ <code>fn()</code> æ‰§è¡Œè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå› ä¸ºfnæ‰§è¡Œæ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥è¿™ä¸ªpromiseå¯¹è±¡çš„çŠ¶æ€resolveçš„å€¼æ˜¯undefinedï¼Œä¸”å°†è¿™ä¸ªundefinedå½“ä½œä¸‹ä¸€ä¸ªthenä¸­å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œæ‰€ä»¥æ‰“å°çš„ç»“æœæ˜¯undefined</p></blockquote> <ol start="7"><li>é—®é¢˜7</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">t7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"lagou"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">"lala"</span>
<span class="token punctuation">}</span>
<span class="token function">t7</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><blockquote><p>é¦–å…ˆè€ƒè™‘ <code>fn()</code> æ‰§è¡Œè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå› ä¸º<code>fn()</code>æ‰§è¡Œæœ‰è¿”å›å€¼lalaï¼Œæ‰€ä»¥è¿™ä¸ªpromiseå¯¹è±¡çš„çŠ¶æ€resolveçš„å€¼æ˜¯lalaï¼Œä¸”å°†è¿™ä¸ªlalaå½“ä½œä¸‹ä¸€ä¸ªthenä¸­å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œæ‰€ä»¥æ‰“å°çš„ç»“æœæ˜¯lalaã€‚</p></blockquote> <p><strong>æ³¨æ„ç»†èŠ‚</strong></p> <ul><li>asyncå‡½æ•°æ‰§è¡Œçš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯è¿™ä¸ªpromiseçŠ¶æ€å€¼resolveçš„å€¼</li> <li>awaitåé¢å¦‚æœä¸æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå°†ç›´æ¥è¿”å›è¿™ä¸ªå€¼</li> <li>awaitåé¢å¦‚æœæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå°†ä¼šæŠŠè¿™ä¸ªpromiseçš„çŠ¶æ€resolveçš„å€¼è¿”å›å‡ºå»ã€‚</li> <li>ä»¥ä¸Šæ²¡æœ‰è€ƒè™‘rejectçŠ¶æ€ã€‚</li></ul> <h2 id="ç¬¬11é¢˜-thisæŒ‡å‘é—®é¢˜"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC11%E9%A2%98-this%E6%8C%87%E5%90%91%E9%97%AE%E9%A2%98" class="header-anchor">#</a> ç¬¬11é¢˜ thisæŒ‡å‘é—®é¢˜</h2> <p><strong>1 åˆ†æä»£ç ä¸‹é¢è¾“å‡ºä»€ä¹ˆ</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol><li>Foo.getName();</li></ol> <p>è°ƒç”¨<code>Foo</code>çš„é™æ€æ–¹æ³•ï¼Œæ‰€ä»¥ï¼Œæ‰“å°2</p> <ol start="2"><li>Foo().getName();</li></ol> <blockquote><p><code>Foo()</code>å°±æ˜¯æ™®é€šå‡½æ•°è°ƒç”¨ï¼Œè¿”å›çš„thisæ˜¯windowï¼Œåé¢è°ƒç”¨<code>window.getName()</code>è€Œ<code>window</code>ä¸‹çš„<code>getNameåœ¨Foo()</code>ä¸­è°ƒç”¨<code>getName</code>è¢«é‡æ–°èµ‹å€¼,æ‰€ä»¥,æ‰“å°1</p></blockquote> <ol start="3"><li>getName();</li></ol> <blockquote><p>åœ¨æ‰§è¡Œè¿‡<code>Foo().getName()</code>çš„åŸºç¡€ä¸Šï¼Œæ‰€ä»¥<code>getName=function(){console.log(1)}</code>,æ‰€ä»¥,æ‰“å°1ï¼Œ[å¦‚æœ<code>getName()</code>æ”¾åœ¨<code>Foo().getName()</code>ä¸Šæ‰§è¡Œæ‰“å°ç»“æœä¸º4]</p></blockquote> <ol start="4"><li>new Foo.getName();</li></ol> <p>æ„é€ å™¨ç§æœ‰å±æ€§çš„<code>getName()</code>,æ‰€ä»¥,æ‰“å°2</p> <ol start="5"><li>new Foo().getName();</li></ol> <p>åŸå‹ä¸Šçš„<code>getName()</code>ï¼Œæ‰“å°3</p> <ol start="6"><li>new new Foo().getName()</li></ol> <ul><li>é¦–å…ˆ<code>new Foo()</code>å¾—åˆ°ä¸€ä¸ªç©ºå¯¹è±¡<code>{}</code></li> <li>ç¬¬äºŒæ­¥å‘ç©ºå¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§getNameï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°</li> <li>ç¬¬ä¸‰æ­¥<code>new {}.getName()</code></li> <li>ç­‰ä»·äº <code>var bar = new (new Foo().getName)(); console.log(bar)</code></li> <li>å…ˆ<code>new Foo</code>å¾—åˆ°çš„å®ä¾‹å¯¹è±¡ä¸Šçš„<code>getName</code>æ–¹æ³•ï¼Œå†å°†è¿™ä¸ªåŸå‹ä¸Š<code>getName</code>æ–¹æ³•å½“åšæ„é€ å‡½æ•°ç»§ç»­new ï¼Œæ‰€ä»¥æ‰§è¡ŒåŸå‹ä¸Šçš„æ–¹æ³•,æ‰“å°3</li></ul> <p><strong>2 å†™å‡ºæ‰“å°ç»“æœï¼Œå¹¶åˆ†æå‡ºåŸå› </strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  length<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token function-variable function">method</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre></div><ul><li>è§£æï¼šé¦–å…ˆï¼Œæˆ‘ä»¬åœ¨å…¨å±€å®šä¹‰äº†ä¸€ä¸ªå˜é‡<code>length</code>ã€ä¸€ä¸ªå¯¹è±¡<code>obj</code>å’Œä¸€ä¸ªå‡½æ•°<code>fn</code>ï¼Œ<code>length</code>èµ‹å€¼ä¸º<code>10</code>ã€‚æ¥ä¸‹æ¥æ˜¯<code>fn</code>å‡½æ•°ï¼Œè¾“å‡º<code>this.length</code>ã€‚å¯¹è±¡<code>obj</code>ä¸­ï¼Œ<code>obj.length</code>æ˜¯5ï¼Œ<code>obj.method</code>æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚<code>method</code>å‡½æ•°é‡Œé¢çš„å½¢å‚ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°é‡Œé¢è°ƒç”¨äº†<code>fn</code>å‡½æ•°ï¼Œ<code>arguments</code>æ˜¯ä¸€ä¸ªä¼ªæ•°ç»„ï¼Œä»£è¡¨<code>method</code>å‡½æ•°å®é™…æ¥æ”¶åˆ°çš„å‚æ•°åˆ—è¡¨ï¼Œæ‰€ä»¥<code>arguments[0] ()</code>å°±ä»£è¡¨äº†è°ƒç”¨<code>arguments</code>é‡Œçš„ç¬¬ä¸€é¡¹ã€‚<code>obj.method(fn, 1)</code>ä»£è¡¨çš„å°±æ˜¯è°ƒç”¨<code>obj</code>å½“ä¸­çš„<code>method</code>å‡½æ•°ï¼Œå¹¶ä¸”ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°ï¼Œ<code>fn</code>å’Œ<code>1</code>ã€‚</li> <li>åˆ†æå®Œäº†ä»£ç çš„å«ä¹‰ï¼Œæˆ‘ä»¬æ¥çœ‹è¾“å‡ºç»“æœã€‚<code>method</code>å‡½æ•°å½“ä¸­è°ƒç”¨çš„fnå‡½æ•°æ˜¯å…¨å±€å½“ä¸­çš„å‡½æ•°ï¼Œæ‰€ä»¥<code>this</code>æŒ‡å‘çš„æ˜¯<code>window</code>ï¼Œ<code>this.length</code>å°±æ˜¯<code>10</code>ã€‚ä¸Šé¢è¯´äº†ï¼Œ<code>arguments[0] ()</code>ä»£è¡¨çš„æ˜¯è°ƒç”¨<code>arguments</code>é‡Œé¢çš„ç¬¬ä¸€é¡¹ï¼Œä¹Ÿå°±æ˜¯ä¼ å‚è¿›æ¥çš„<code>fn</code>ï¼Œæ‰€ä»¥è¿™ä¸ª<code>this</code>æŒ‡å‘çš„æ˜¯<code>argumentsï¼Œmethod</code>å‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯ä¸¤ä¸ªï¼Œæ‰€ä»¥<code>arguments.length</code>å°±æ˜¯<code>2</code>ã€‚æœ€åçš„è¾“å‡ºç»“æœå°±æ˜¯  <code>10 2</code></li></ul> <p><strong>3 å†™å‡ºæ‰“å°ç»“æœï¼Œå¹¶åˆ†æå‡ºåŸå› </strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">xx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> xx<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>è§£æï¼šé¦–å…ˆï¼Œæˆ‘ä»¬åœ¨å…¨å±€å®šä¹‰äº†ä¸€ä¸ªå˜é‡<code>x</code>ã€ä¸€ä¸ªå˜é‡yå’Œä¸€ä¸ªå‡½æ•°aï¼Œå‡½æ•°aå½“ä¸­çš„<code>this.x</code>ç­‰äºæ¥æ”¶åˆ°çš„å‚æ•°ï¼Œè¿”å›<code>this</code>ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œè¿”å›çš„ä¸æ˜¯<code>this.x</code>ï¼Œè€Œæ˜¯<code>this</code>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç»™xèµ‹å€¼ï¼Œå€¼ä¸º<code>a(5)</code>ï¼Œåˆç»™yè¿›è¡Œèµ‹å€¼ï¼Œå€¼ä¸º<code>a(6)</code>ã€‚æœ€åï¼Œæˆ‘ä»¬è¾“å‡º<code>x.x</code>ï¼Œ<code>y.x</code>ã€‚</li> <li>åˆ†æå®Œä»£ç çš„å«ä¹‰ï¼Œæˆ‘ä»¬æ¥çœ‹è¾“å‡ºç»“æœã€‚<code>a</code>å‡½æ•°ä¼ äº†ä¸€ä¸ªå‚æ•°<code>5</code>ï¼Œé‚£ä¹ˆ<code>this.x</code>å°±è¢«èµ‹å€¼ä¸ºäº†<code>5</code>ï¼Œå‡½æ•°<code>a</code>çš„<code>this</code>æŒ‡å‘çš„æ˜¯<code>window</code>ï¼Œä¹Ÿå°±æ˜¯<code>window.x = 5</code>ã€‚ä¸Šé¢æˆ‘ä»¬è¯´è¿‡ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›çš„æ˜¯<code>this</code>ï¼Œä¹Ÿå°±æ˜¯<code>this</code>æŒ‡å‘çš„<code>window</code>ï¼Œ<code>x = a(5)</code>å°±ç›¸å½“äº<code>window.x = window</code>ï¼Œæ­¤æ—¶çš„xè¢«èµ‹å€¼ä¸ºäº†<code>window</code>ã€‚ä¸‹é¢åˆæ‰§è¡Œäº†<code>y = a(6)</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œxçš„å€¼å†æ¬¡å‘ç”Ÿäº†æ”¹å˜ï¼Œè¾¹ä¸ºäº†<code>6</code>ï¼Œ<code>y</code>åˆ™è¢«èµ‹å€¼ä¸ºäº†<code>window</code>ã€‚<code>console.log(x.x)</code>å°±ç›¸å½“äº<code>console.log(6.x)</code>ï¼Œè¾“å‡ºçš„è‡ªç„¶æ˜¯<code>undefined</code>ã€‚<code>console.log(y.x)</code>ï¼Œè¾“å‡ºçš„ç›¸å½“äºæ˜¯<code>console.log(window.x)</code>ï¼Œå¾—åˆ°çš„å€¼è‡ªç„¶æ˜¯6ã€‚æœ€åè¾“å‡ºçš„ç»“æœä¸º <code>undefined 6</code></li></ul> <h2 id="ç¬¬10é¢˜-promiseæ‰§è¡Œé—®é¢˜"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC10%E9%A2%98-promise%E6%89%A7%E8%A1%8C%E9%97%AE%E9%A2%98" class="header-anchor">#</a> ç¬¬10é¢˜ promiseæ‰§è¡Œé—®é¢˜</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//ç¬¬ä¸€ç§</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'then:'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'catch:'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//ç¬¬äºŒç§</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'then:'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'catch:'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>ç¬¬ä¸€ç§ <code>catch</code> æ–¹æ³•å¯ä»¥æ•è·åˆ° <code>catch</code> ä¹‹å‰æ•´æ¡ <code>promise</code> é“¾è·¯ä¸Šæ‰€æœ‰æŠ›å‡ºçš„å¼‚å¸¸</li> <li>ç¬¬äºŒç§ then æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ•è·çš„å¼‚å¸¸ä¾èµ–äºä¸Šä¸€ä¸ª Promise å¯¹è±¡çš„æ‰§è¡Œç»“æœ</li></ul> <blockquote><p><code>promise.then(successCb, faildCd)</code> æ¥æ”¶ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ¥å¤„ç†ä¸Šä¸€ä¸ª<code>promise</code> å¯¹è±¡çš„ç»“æœã€‚<code>then f</code> æ–¹æ³•è¿”å›çš„æ˜¯ promise å¯¹è±¡ã€‚ç¬¬ä¸€ç§é“¾å¼å†™æ³•ï¼Œä½¿ç”¨catchï¼Œç›¸å½“äºç»™å‰é¢ä¸€ä¸ªthenæ–¹æ³•è¿”å›çš„promise æ³¨å†Œå›è°ƒï¼Œå¯ä»¥æ•è·åˆ°å‰é¢thenæ²¡æœ‰è¢«å¤„ç†çš„å¼‚å¸¸ã€‚ç¬¬äºŒç§æ˜¯å›è°ƒå‡½æ•°å†™æ³•ï¼Œä»…ä¸ºä¸ºä¸Šä¸€ä¸ªpromise æ³¨å†Œå¼‚å¸¸å›è°ƒã€‚</p></blockquote> <p>å¦‚æœæ˜¯<code>promise</code>å†…éƒ¨æŠ¥é”™ <code>reject</code> æŠ›å‡ºé”™è¯¯åï¼Œ<code>then</code> çš„ç¬¬äºŒä¸ªå‚æ•°å°±èƒ½æ•è·å¾—åˆ°ï¼Œå¦‚æœthençš„ç¬¬äºŒä¸ªå‚æ•°ä¸å­˜åœ¨ï¼Œåˆ™catchæ–¹æ³•ä¼šæ•è·åˆ°ã€‚</p> <p>å¦‚æœæ˜¯thençš„ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•° <code>resolve</code> ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå³æˆåŠŸå›è°ƒå‡½æ•°å‡ºç°å¼‚å¸¸åï¼Œthençš„ç¬¬äºŒä¸ªå‚æ•°reject æ•è·æ•è·ä¸åˆ°ï¼Œcatchæ–¹æ³•å¯ä»¥æ•è·åˆ°ã€‚</p> <h2 id="ç¬¬9é¢˜-promiseè§£å†³å¹¶å‘è¯·æ±‚"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC9%E9%A2%98-promise%E8%A7%A3%E5%86%B3%E5%B9%B6%E5%8F%91%E8%AF%B7%E6%B1%82" class="header-anchor">#</a> ç¬¬9é¢˜ promiseè§£å†³å¹¶å‘è¯·æ±‚</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/1'</span><span class="token punctuation">,</span>
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/2'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/3'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/4'</span><span class="token punctuation">,</span>
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/5'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/6'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/7'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/8'</span><span class="token punctuation">,</span>
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/9'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/10'</span>
<span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">loadDate</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ <code>urls</code> æ•°ç»„ä¸­å­˜æ”¾äº† 10 ä¸ªæ¥å£åœ°å€ã€‚åŒæ—¶è¿˜å®šä¹‰äº†ä¸€ä¸ª <code>loadDate</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ª <code>url</code> å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œè¯¥ <code>Promise</code> åœ¨æ¥å£è°ƒç”¨æˆåŠŸæ—¶è¿”å› <code>resolve</code>ï¼Œå¤±è´¥æ—¶è¿”å› <code>reject</code>ã€‚</p> <ul><li>è¦æ±‚ï¼šä»»æ„æ—¶åˆ»ï¼ŒåŒæ—¶ä¸‹è½½çš„é“¾æ¥æ•°é‡ä¸å¯ä»¥è¶…è¿‡ 3 ä¸ªã€‚</li> <li>è¯•å†™å‡ºä¸€æ®µä»£ç å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œè¦æ±‚å°½å¯èƒ½å¿«é€Ÿåœ°å°†æ‰€æœ‰æ¥å£ä¸­çš„æ•°æ®å¾—åˆ°ã€‚</li></ul> <p><strong>è§£é¢˜æ€è·¯</strong></p> <blockquote><p>æŒ‰ç…§é¢˜æ„æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼Œé¦–å…ˆå¹¶å‘è¯·æ±‚ 3 ä¸ª <code>url</code> ä¸­çš„æ•°æ®ï¼Œå½“å…¶ä¸­ä¸€æ¡ <code>url</code> è¯·æ±‚å¾—åˆ°æ•°æ®åï¼Œç«‹å³å‘èµ·å¯¹ä¸€æ¡æ–° <code>url</code> ä¸Šæ•°æ®çš„è¯·æ±‚ï¼Œæˆ‘ä»¬è¦å§‹ç»ˆè®©å¹¶å‘æ•°ä¿æŒåœ¨ 3 ä¸ªï¼Œç›´åˆ°æ‰€æœ‰éœ€è¦åŠ è½½æ•°æ®çš„ <code>url</code> å…¨éƒ¨éƒ½å®Œæˆè¯·æ±‚å¹¶å¾—åˆ°æ•°æ®ã€‚</p></blockquote> <p>ç”¨ Promise å®ç°çš„æ€è·¯å°±æ˜¯ï¼Œé¦–å…ˆå¹¶å‘è¯·æ±‚3ä¸ª  <code>url</code> ï¼Œå¾—åˆ° 3 ä¸ª <code>Promise</code> ï¼Œç„¶åç»„æˆä¸€ä¸ªå«  <code>promises</code> çš„æ•°ç»„ã€‚å†ä¸æ–­çš„è°ƒç”¨ <code>Promise.race</code> æ¥è¿”å›æœ€å¿«æ”¹å˜çŠ¶æ€çš„ <code>Promise</code> ï¼Œç„¶åä»æ•°ç»„<code>promises</code>ä¸­åˆ æ‰è¿™ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œå†åŠ å…¥ä¸€ä¸ªæ–°çš„ <code>Promise</code>ï¼Œç›´åˆ°æ‰€æœ‰çš„ <code>url</code> è¢«å–å®Œï¼Œæœ€åå†ä½¿ç”¨ <code>Promise.all</code> æ¥å¤„ç†ä¸€éæ•°ç»„<code>promises</code>ä¸­æ²¡æœ‰æ”¹å˜çŠ¶æ€çš„ <code>Promise</code>ã€‚</p> <p><strong>å‚è€ƒç­”æ¡ˆ</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/1'</span><span class="token punctuation">,</span>
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/2'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/3'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/4'</span><span class="token punctuation">,</span>
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/5'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/6'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/7'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/8'</span><span class="token punctuation">,</span>
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/9'</span><span class="token punctuation">,</span> 
  <span class="token string">'http://jsonplaceholder.typicode.com/posts/10'</span>
<span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">loadDate</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">limitLoad</span><span class="token punctuation">(</span><span class="token parameter">urls<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹æ•°ç»„è¿›è¡Œä¸€ä¸ªæ‹·è´</span>
    <span class="token keyword">const</span> sequence <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>urls<span class="token punctuation">)</span>
    <span class="token keyword">let</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">//å®ç°å¹¶å‘è¯·æ±‚è¾¾åˆ°æœ€å¤§å€¼</span>
    promises <span class="token operator">=</span> sequence<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> limit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿™é‡Œè¿”å›çš„ index æ˜¯ä»»åŠ¡åœ¨æ•°ç»„ promises çš„è„šæ ‡</span>
        <span class="token comment">//ç”¨äºåœ¨ Promise.race åæ‰¾åˆ°å®Œæˆçš„ä»»åŠ¡è„šæ ‡</span>
        <span class="token keyword">return</span> <span class="token function">handler</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> index
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// åˆ©ç”¨æ•°ç»„çš„ reduce æ–¹æ³•æ¥ä»¥é˜Ÿåˆ—çš„å½¢å¼æ‰§è¡Œ</span>
    <span class="token keyword">return</span> sequence<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">last<span class="token punctuation">,</span> url<span class="token punctuation">,</span> currentIndex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> last<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// è¿”å›æœ€å¿«æ”¹å˜çŠ¶æ€çš„ Promise</span>
            <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// è¿™é‡Œçš„ catch ä¸ä»…ç”¨æ¥æ•è·å‰é¢ then æ–¹æ³•æŠ›å‡ºçš„é”™è¯¯</span>
            <span class="token comment">// æ›´é‡è¦çš„æ˜¯é˜²æ­¢ä¸­æ–­æ•´ä¸ªé“¾å¼è°ƒç”¨</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// ç”¨æ–°çš„ Promise æ›¿æ¢æ‰æœ€å¿«æ”¹å˜çŠ¶æ€çš„ Promise</span>
            promises<span class="token punctuation">[</span>res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">(</span>sequence<span class="token punctuation">[</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> res <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
<span class="token punctuation">}</span>
<span class="token function">limitLoad</span><span class="token punctuation">(</span>urls<span class="token punctuation">,</span> loadDate<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">/*
å› ä¸º loadDate å‡½æ•°ä¹Ÿè¿”å›ä¸€ä¸ª Promise
æ‰€ä»¥å½“ æ‰€æœ‰å›¾ç‰‡åŠ è½½å®Œæˆåå¯ä»¥ç»§ç»­é“¾å¼è°ƒç”¨

limitLoad(urls, loadDate, 3).then(() =&gt; {
    console.log('æ‰€æœ‰urlæ•°æ®è¯·æ±‚æˆåŠŸ');
}).catch(err =&gt; {
    console.error(err);
})
*/</span>
</code></pre></div><h2 id="ç¬¬8é¢˜-è·¨åŸŸé—®é¢˜"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC8%E9%A2%98-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98" class="header-anchor">#</a> ç¬¬8é¢˜ è·¨åŸŸé—®é¢˜</h2> <blockquote><p>åœ¨ä½ å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜ï¼Œä½ æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿ</p></blockquote> <ol><li>APIè·¨åŸŸå¯ä»¥é€šè¿‡æœåŠ¡å™¨ä¸Šnginxåå‘ä»£ç†</li> <li>æœ¬åœ°webpack dev serverå¯ä»¥è®¾ç½® proxyï¼Œ</li> <li><code>new Image</code>, è®¾src çš„æ—¶å€™ï¼Œå›¾ç‰‡éœ€è¦è®¾ç½®Cors</li></ol> <blockquote><p>corséœ€è¦åå°é…åˆè®¾ç½®HTTPå“åº”å¤´ï¼Œå¦‚æœè¯·æ±‚ä¸æ˜¯ç®€å•è¯·æ±‚ï¼ˆ1. methodï¼šgetï¼Œpostï¼Œ2. content-typeï¼šä¸‰ç§è¡¨å•è‡ªå¸¦çš„content-typeï¼Œ3. æ²¡æœ‰è‡ªå®šä¹‰çš„HTTP headerï¼‰ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€optioné¢„æ£€è¯·æ±‚ï¼Œåç«¯éœ€è¦å“åº”optionè¯·æ±‚ï¼Œç„¶åæµè§ˆå™¨æ‰ä¼šå‘é€æ­£å¼è¯·æ±‚ï¼Œcorsé€šè¿‡ç™½åå•çš„å½¢å¼å…è®¸æŒ‡å®šçš„åŸŸå‘é€è¯·æ±‚</p></blockquote> <p><code>jsonp</code>æ˜¯æµè§ˆå™¨ä¼šæ”¾è¿‡ img scriptæ ‡ç­¾å¼•å…¥èµ„æºçš„æ–¹å¼ã€‚æ‰€ä»¥å¯ä»¥é€šè¿‡åç«¯è¿”å›ä¸€æ®µæ‰§è¡Œjså‡½æ•°çš„è„šæœ¬ï¼Œå°†æ•°æ®ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚ç„¶ååœ¨å‰ç«¯æ‰§è¡Œè¿™æ®µè„šæœ¬ã€‚åŒæ–¹çº¦å®šä¸€ä¸ªå‡½æ•°çš„åç§°ã€‚</p> <blockquote><p>è”è°ƒçš„æ—¶å€™ä¼šéœ€è¦è·¨åŸŸï¼Œçº¿ä¸Šå‰ç«¯ç«™ç‚¹åŸŸå’Œåå°æ¥å£ä¸ä¸€è‡´ä¹Ÿéœ€è¦è·¨åŸŸï¼Œå¼€å‘æ—¶è·¨åŸŸå¯ä»¥é€šè¿‡ä»£ç†æœåŠ¡å™¨æ¥è½¬å‘è¯·æ±‚ï¼Œå› ä¸ºè·¨åŸŸæœ¬èº«æ˜¯æµè§ˆå™¨å¯¹è¯·æ±‚çš„é™åˆ¶ï¼Œå¸¸è§çš„è·¨åŸŸå¤„ç†è¿˜æœ‰JSONPå’Œcorsï¼Œjsonpæ˜¯åˆ©ç”¨è„šæœ¬èµ„æºè¯·æ±‚æœ¬èº«å°±å¯ä»¥è·¨åŸŸçš„ç‰¹æ€§ï¼Œé€šè¿‡ä¸è¯·æ±‚ä¸€èµ·å‘é€å›è°ƒå‡½æ•°åï¼Œåå°è¿”å›scriptè„šæœ¬ç›´æ¥æ‰§è¡Œå›è°ƒï¼Œä½†æ˜¯ç”±äºèµ„æºè¯·æ±‚æ˜¯getç±»å‹ï¼Œè¯·æ±‚å‚æ•°é•¿åº¦æœ‰é™åˆ¶ï¼Œä¹Ÿä¸èƒ½è¿›è¡Œpostè¯·æ±‚ã€‚corséœ€è¦åå°é…åˆè®¾ç½®HTTPå“åº”å¤´ï¼Œå¦‚æœè¯·æ±‚ä¸æ˜¯ç®€å•è¯·æ±‚ï¼ˆ1. methodï¼šgetï¼Œpostï¼Œ2. content-typeï¼šä¸‰ç§è¡¨å•è‡ªå¸¦çš„content-typeï¼Œ3. æ²¡æœ‰è‡ªå®šä¹‰çš„HTTP headerï¼‰ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€optioné¢„æ£€è¯·æ±‚ï¼Œåç«¯éœ€è¦å“åº”optionè¯·æ±‚ï¼Œç„¶åæµè§ˆå™¨æ‰ä¼šå‘é€æ­£å¼è¯·æ±‚ï¼Œcorsé€šè¿‡ç™½åå•çš„å½¢å¼å…è®¸æŒ‡å®šçš„åŸŸå‘é€è¯·æ±‚</p></blockquote> <p>åŒæºç­–ç•¥åªæ˜¯æµè§ˆå™¨å®¢æˆ·ç«¯çš„é˜²æŠ¤æœºåˆ¶ï¼Œå½“å‘ç°éåŒæºHTTPè¯·æ±‚æ—¶ä¼šæ‹¦æˆªå“åº”ï¼Œä½†æœåŠ¡å™¨ä¾ç„¶å¤„ç†äº†è¿™ä¸ªè¯·æ±‚ã€‚
æœåŠ¡å™¨ç«¯ä¸æ‹¦æˆªï¼Œæ‰€ä»¥åœ¨åŒæºæœåŠ¡å™¨ä¸‹åšä»£ç†ï¼Œå¯ä»¥å®ç°è·¨åŸŸã€‚</p> <h2 id="ç¬¬7é¢˜-ä¸‹é¢è¾“å‡ºä»€ä¹ˆ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC7%E9%A2%98-%E4%B8%8B%E9%9D%A2%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88" class="header-anchor">#</a> ç¬¬7é¢˜ ä¸‹é¢è¾“å‡ºä»€ä¹ˆ</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token number">10</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  length<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token function-variable function">method</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span><span class="token string">'arguments'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token comment">// 10 1</span>
obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// 10 2</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>n<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a 
a <span class="token operator">=</span> <span class="token punctuation">{</span>n<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span>
a<span class="token punctuation">.</span>x <span class="token operator">=</span> a 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token comment">// {n:2, x:{n:2,x:{n:2}}}</span>
</code></pre></div><p><img src="./æ¯æ—¥ä¸€é¢˜_files/7.png" alt="image.png" class="medium-zoom-image"></p> <h2 id="ç¬¬6é¢˜-éªŒè¯å›æ–‡ä¸²"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC6%E9%A2%98-%E9%AA%8C%E8%AF%81%E5%9B%9E%E6%96%87%E4%B8%B2" class="header-anchor">#</a> ç¬¬6é¢˜ éªŒè¯å›æ–‡ä¸²</h2> <p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒéªŒè¯å®ƒæ˜¯å¦æ˜¯å›æ–‡ä¸²ï¼Œåªè€ƒè™‘å­—æ¯å’Œæ•°å­—å­—ç¬¦ï¼Œå¯ä»¥å¿½ç•¥å­—æ¯çš„å¤§å°å†™ã€‚</p> <p>è¯´æ˜ï¼šæœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬å°†ç©ºå­—ç¬¦ä¸²å®šä¹‰ä¸ºæœ‰æ•ˆçš„å›æ–‡ä¸²ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>ç¤ºä¾‹1
è¾“å…¥: "A man, a plan, a canal: Panama"
è¾“å‡º: true
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>ç¤ºä¾‹ 2:

è¾“å…¥: "race a car"
è¾“å‡º: false
</code></pre></div><p><strong>æ€è·¯</strong></p> <blockquote><p>é¦–å…ˆï¼Œå»é™¤å­—ç¬¦ä¸²ä¸­çš„éå­—æ¯å’Œæ•°å­—ï¼Œç„¶åï¼Œåˆ©ç”¨æ•°ç»„å°†å­—ç¬¦ä¸²ç¿»è½¬ï¼Œå†å’ŒåŸå­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œå³å¯å¾—åˆ°ç»“æœã€‚</p></blockquote> <p><strong>è¯¦è§£</strong></p> <ul><li>å°†ä¼ å…¥çš„å­—ç¬¦ä¸²ï¼Œåˆ©ç”¨ <code>toLowerCase()</code> æ–¹æ³•ç»Ÿä¸€è½¬åŒ–ä¸ºå°å†™ï¼Œå†åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼ <code>/[ ^ A-Za-z0-9]/g</code> åœ¨å­—ç¬¦ä¸²ä¸­å»é™¤éå­—æ¯å’Œæ•°å­—ï¼Œå¾—åˆ°å­—ç¬¦ä¸² <code>arr</code>ã€‚</li> <li>å°†å­—ç¬¦ä¸² <code>arr</code> è½¬æ¢ä¸ºæ•°ç»„ï¼Œåˆ©ç”¨æ•°ç»„çš„æ–¹æ³•åè½¬æ•°ç»„ï¼Œå†å°†æ•°ç»„è½¬ä¸ºå­—ç¬¦ä¸² <code>newArr</code>ã€‚</li> <li>å°†å­—ç¬¦ä¸² <code>arr</code> å’Œ å­—ç¬¦ä¸² <code>newArr</code> è¿›è¡Œæ¯”è¾ƒï¼Œç›¸ç­‰å³ä¸ºå›æ–‡ä¸²ï¼Œä¸ç›¸ç­‰åˆ™ä¸ä¸ºå›æ–‡ä¸²</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {string} s
 * @return {boolean}
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">isPalindrome</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ–¹ä¾¿æ¯”è¾ƒ,ç»Ÿä¸€è½¬åŒ–ä¸ºå°å†™,å¹¶å»é™¤éå­—æ¯å’Œæ•°å­—</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^A-Za-z0-9]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å°†æ–°å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„,åˆ©ç”¨æ•°ç»„çš„æ–¹æ³•è·å¾—åè½¬çš„å­—ç¬¦ä¸²</span>
  <span class="token keyword">const</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å°†2ä¸ªå­—ç¬¦è¿›è¡Œæ¯”è¾ƒå¾—å‡ºç»“æœ</span>
  <span class="token keyword">return</span> arr <span class="token operator">===</span> newArr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ç¬¬5é¢˜-å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯-3-çš„å¹‚æ¬¡æ–¹"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC5%E9%A2%98-%E5%86%99%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E6%9D%A5%E5%88%A4%E6%96%AD%E5%AE%83%E6%98%AF%E5%90%A6%E6%98%AF-3-%E7%9A%84%E5%B9%82%E6%AC%A1%E6%96%B9" class="header-anchor">#</a> ç¬¬5é¢˜ å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ 3 çš„å¹‚æ¬¡æ–¹</h2> <p>ç»™å®šä¸€ä¸ªæ•´æ•°ï¼Œå†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ 3 çš„å¹‚æ¬¡æ–¹</p> <div class="language- extra-class"><pre class="language-text"><code>è¾“å…¥: 27
è¾“å‡º: true
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>è¾“å…¥: 45
è¾“å‡º: false
</code></pre></div><p><strong>é¢˜ç›®åˆ†æ</strong></p> <ul><li>3 çš„å¹‚ï¼Œé¡¾åæ€ä¹‰ï¼Œéœ€è¦åˆ¤æ–­å½“å‰æ•°å­—æ˜¯å¦å¯ä»¥ä¸€ç›´è¢« 3 æ•´é™¤</li> <li>ç‰¹æ®Šæƒ…å†µï¼šå¦‚æœ n === 1ï¼Œå³ 3 çš„ 0 æ¬¡å¹‚çš„æƒ…å†µï¼Œåº”è¾“å‡º true</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {number} n
 * @return {boolean}
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">isPowerOfThree</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœè¯¥æ•°å­—ä¸èƒ½è¢« 3 æ•´é™¤ï¼Œåˆ™ç›´æ¥è¾“å‡º false</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      n <span class="token operator">=</span> n <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>é€’å½’æ±‚è§£</strong></p> <ul><li>æ€è·¯</li></ul> <blockquote><p>æˆ–è®¸ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨é€’å½’çš„æ–¹æ³•å®ç°ã€‚é€’å½’çš„æ€è·¯ç±»ä¼¼äºå¾ªç¯ï¼Œåªä¸è¿‡å°†å¾ªç¯ä½“æ”¹ä¸ºæ–¹æ³•çš„é€’å½’è°ƒç”¨ã€‚</p></blockquote> <ol><li>åˆ¤æ–­ç‰¹æ®Šæƒ…å†µ <code>n === 1</code> æ—¶ï¼Œç›´æ¥è¿”å› true</li> <li>åˆ¤æ–­ç‰¹æ®Šæƒ…å†µ <code>n &lt;= 0</code> æ—¶ï¼Œç›´æ¥è¿”å› false</li> <li>è‹¥å¾…å®šå€¼ n å¯ä»¥è¢« 3 æ•´é™¤ï¼Œåˆ™å¼€å§‹é€’å½’</li> <li>è‹¥ä¸æ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œåˆ™è¿”å› false</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {number} n
 * @return {boolean}
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">isPowerOfThree</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// n === 1ï¼Œå³ 3 çš„ 0 æ¬¡å¹‚ï¼Œè¿”å› true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€’å½’è°ƒç”¨ isPowerOfThree æ–¹æ³•</span>
    <span class="token keyword">return</span> <span class="token function">isPowerOfThree</span><span class="token punctuation">(</span>n <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ç¬¬4é¢˜-æ—‹è½¬æ•°ç»„"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC4%E9%A2%98-%E6%97%8B%E8%BD%AC%E6%95%B0%E7%BB%84" class="header-anchor">#</a> ç¬¬4é¢˜ æ—‹è½¬æ•°ç»„</h2> <p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³ç§»åŠ¨ k ä¸ªä½ç½®ï¼Œå…¶ä¸­ k æ˜¯éè´Ÿæ•°</p> <div class="language- extra-class"><pre class="language-text"><code>è¾“å…¥: [1,2,3,4,5,6,7] å’Œ k = 3
è¾“å‡º: [5,6,7,1,2,3,4]
è§£é‡Š:
å‘å³æ—‹è½¬ 1 æ­¥: [7,1,2,3,4,5,6]
å‘å³æ—‹è½¬ 2 æ­¥: [6,7,1,2,3,4,5]
å‘å³æ—‹è½¬ 3 æ­¥: [5,6,7,1,2,3,4]
</code></pre></div><ul><li>é¦–å…ˆè®¡ç®—å‡ºéœ€è¦å¾ªç¯ç§»åŠ¨çš„æ¬¡æ•°ï¼›</li> <li>é€šè¿‡æ•°ç»„çš„ <code>unshift()</code> å’Œ <code>pop()</code>æ–¹æ³•å®ç°æ—‹è½¬ï¼Œå¾ªç¯æ‰§è¡Œ <code>k</code> æ¬¡ã€‚</li></ul> <blockquote><ul><li><code>unshift()</code> æ–¹æ³•å°†æŠŠå®ƒçš„å‚æ•°æ’å…¥æ•°ç»„çš„å¤´éƒ¨ï¼Œå¹¶å°†å·²ç»å­˜åœ¨çš„å…ƒç´ é¡ºæ¬¡åœ°ç§»åˆ°è¾ƒé«˜çš„ä¸‹æ ‡å¤„ï¼Œè¯¥æ–¹æ³•ä¸ä¼šåˆ›å»ºæ–°æ•°ç»„ï¼Œè€Œæ˜¯ç›´æ¥ä¿®æ”¹åŸæ•°ç»„ã€‚</li> <li><code>pop()</code> æ–¹æ³•å°†åˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ŒæŠŠæ•°ç»„é•¿åº¦å‡ 1ï¼Œå¹¶ä¸”è¿”å›å®ƒåˆ é™¤çš„å…ƒç´ çš„å€¼</li></ul></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {number[]} nums
 * @param {number} k
 * @return {void} Do not return anything, modify nums in-place instead.
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">rotate</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> l <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  k <span class="token operator">=</span> k <span class="token operator">%</span> l<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nums<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>æ–¹æ³•äºŒ</strong></p> <ul><li>é¦–å…ˆè¿˜æ˜¯è®¡ç®—å‡ºéœ€è¦æˆªå–çš„æ•°ç»„å…ƒç´ çš„é•¿åº¦ï¼›</li> <li>é€šè¿‡æ•°ç»„çš„ <code>splice()</code> æ–¹æ³•æˆªå–éœ€è¦ç§»åŠ¨çš„å…ƒç´ ï¼Œç„¶åä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦â€˜...â€˜å°†æˆªå–çš„å…ƒç´ å½“ä½œå‚æ•°ï¼Œé€šè¿‡ <code>unshift()</code> æ–¹æ³•å°†æˆªå–çš„ å…ƒç´ æ”¾åˆ°æ•°ç»„çš„å‰è¾¹ã€‚</li></ul> <blockquote><ul><li>splice() æ–¹æ³•å¯åˆ é™¤ä» index å¤„å¼€å§‹çš„é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œç„¶åè¿”å›è¢«åˆ é™¤çš„é¡¹ç›®ã€‚</li> <li>æ•°ç»„çš„æ‰©å±•è¿ç®—ç¬¦...ç›¸å½“äºå°†æ•°ç»„å±•å¼€,ä¸»è¦çš„ä½¿ç”¨åœºæ™¯æ˜¯ç”¨äºæ•°ç»„å¤åˆ¶ã€åˆå¹¶ç­‰ã€‚</li> <li>unshift() æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†æˆä¸ºæ•°ç»„çš„ index ä¸º0çš„æ–°å…ƒç´ ï¼Œå¦‚æœè¿˜æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒå°†æˆä¸º index ä¸º1çš„æ–°å…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li></ul></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {number[]} nums
 * @param {number} k
 * @return {void} Do not return anything, modify nums in-place instead.
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">rotate</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> l <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  k <span class="token operator">=</span> k <span class="token operator">%</span> l<span class="token punctuation">;</span>
  nums<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token operator">...</span>nums<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>l <span class="token operator">-</span> k<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ç¬¬3é¢˜-ä¿®æ”¹åµŒå¥—å±‚çº§å¾ˆæ·±å¯¹è±¡çš„-key"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC3%E9%A2%98-%E4%BF%AE%E6%94%B9%E5%B5%8C%E5%A5%97%E5%B1%82%E7%BA%A7%E5%BE%88%E6%B7%B1%E5%AF%B9%E8%B1%A1%E7%9A%84-key" class="header-anchor">#</a> ç¬¬3é¢˜ ä¿®æ”¹åµŒå¥—å±‚çº§å¾ˆæ·±å¯¹è±¡çš„ key</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æœ‰ä¸€ä¸ªåµŒå¥—å±‚æ¬¡å¾ˆæ·±çš„å¯¹è±¡ï¼Œkey éƒ½æ˜¯ a_b å½¢å¼ ï¼Œéœ€è¦æ”¹æˆ ab çš„å½¢å¼ï¼Œæ³¨æ„ä¸èƒ½ç”¨é€’å½’ã€‚</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  a_y<span class="token operator">:</span> <span class="token punctuation">{</span>
    a_z<span class="token operator">:</span> <span class="token punctuation">{</span>
      y_x<span class="token operator">:</span> <span class="token number">6</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    b_c<span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// {</span>
<span class="token comment">//   ay: {</span>
<span class="token comment">//     az: {</span>
<span class="token comment">//       yx: 6</span>
<span class="token comment">//     },</span>
<span class="token comment">//     bc: 1</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
</code></pre></div><p><strong>æ–¹æ³•1ï¼šåºåˆ—åŒ– JSON.stringify + æ­£åˆ™åŒ¹é…</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">regularExpress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">_</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>æ–¹æ³•2ï¼šé€’å½’</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">recursion</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newKey <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">_</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">[</span>newKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">recursion</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ç¬¬2é¢˜-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC2%E9%A2%98-%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97" class="header-anchor">#</a> ç¬¬2é¢˜ åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</h2> <p>ç»™å®šä¸€ä¸ªéç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>ç¤ºä¾‹ 1:
è¾“å…¥: [2,2,1]
è¾“å‡º: 1
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>ç¤ºä¾‹ 2:
è¾“å…¥: [4,1,2,1,2]
è¾“å‡º: 4
</code></pre></div><ul><li>éå†æ•°ç»„ï¼Œç”±äºéœ€è¦è¿”å›å€¼ï¼Œè¿™é‡Œä½¿ç”¨mapæ–¹æ³•</li> <li>ä½¿ç”¨è¿‡æ»¤å‡½æ•°ï¼Œè¿‡æ»¤æ•°ç»„ä¸­å€¼ä¸å½“å‰éå†çš„å…ƒç´ çš„å€¼ç›¸åŒçš„å…ƒç´ </li> <li>ç°åœ¨å¾—åˆ°äº†ä¸€ä¸ªå­˜åœ¨å¤šä¸ªé›†åˆçš„æ•°ç»„ï¼Œè€Œæ•°ç»„ä¸­å”¯ä¸€å€¼çš„é‚£ä¸ªå…ƒç´ çš„é›†åˆè‚¯å®šå€¼å­˜åœ¨å®ƒè‡ªå·±</li> <li>æŸ¥è¯¢è¿™ä¸ªé›†åˆä¸­é•¿åº¦åªæœ‰1çš„é›†åˆï¼Œå†å–è¿™ä¸ªé›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå³æ˜¯åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">singleNumber</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> numsGroup <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">num</span> <span class="token operator">=&gt;</span> nums<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> v <span class="token operator">===</span> num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> numsGroup<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">num</span> <span class="token operator">=&gt;</span> num<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ç¬¬1é¢˜-ä¸¤æ•°ä¹‹å’Œ"><a href="http://interview.poetries.top/days/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98.html#%E7%AC%AC1%E9%A2%98-%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C" class="header-anchor">#</a> ç¬¬1é¢˜ ä¸¤æ•°ä¹‹å’Œ</h2> <p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„numså’Œä¸€ä¸ªç›®æ ‡å€¼targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>ç¤ºä¾‹
ç»™å®š nums = [2, 7, 11, 15], target = 9

å› ä¸º nums[0] + nums[1] = 2 + 7 = 9
æ‰€ä»¥è¿”å› [0, 1]
</code></pre></div><ul><li>éå†æ¯ä¸ªå…ƒç´  x</li> <li>å¹¶æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå€¼ä¸ <code>target - x</code> ç›¸ç­‰çš„ç›®æ ‡å…ƒç´ </li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">twoSum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> target <span class="token operator">-</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> </body></html>